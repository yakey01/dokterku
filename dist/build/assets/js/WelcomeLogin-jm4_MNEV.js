var N=Object.defineProperty;var S=(o,s,t)=>s in o?N(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var f=(o,s,t)=>S(o,typeof s!="symbol"?s+"":s,t);import{r,j as e}from"./index-CmmmkQkd.js";import{S as k,U as C,b as M,E as A,A as L,a as R,C as P}from"./user-kzwFVkUo.js";import{H as E,a as w,S as T,L as z,Z as B}from"./zap-BZ853rAq.js";class D{constructor(){f(this,"isAnimating",!1);f(this,"particles",[]);f(this,"canvas",null);f(this,"ctx",null);this.isAnimating=!1,this.particles=[],this.canvas=null,this.ctx=null}initCanvas(){return this.canvas=document.createElement("canvas"),this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="9999",this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.canvas}createParticles(s,t,a=50){this.particles=[];for(let i=0;i<a;i++)this.particles.push({x:s,y:t,vx:(Math.random()-.5)*15,vy:(Math.random()-.5)*15,life:1,decay:Math.random()*.015+.01,size:Math.random()*4+2,color:this.getRandomColor(),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.2})}getRandomColor(){const s=["#00f5ff","#8b5cf6","#ec4899","#10b981","#f59e0b","#ef4444"];return s[Math.floor(Math.random()*s.length)]}animateParticles(){if(!(!this.ctx||this.particles.length===0)){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let s=this.particles.length-1;s>=0;s--){const t=this.particles[s];if(t.x+=t.vx,t.y+=t.vy,t.vy+=.3,t.life-=t.decay,t.rotation+=t.rotationSpeed,t.life<=0){this.particles.splice(s,1);continue}this.ctx.save(),this.ctx.globalAlpha=t.life,this.ctx.translate(t.x,t.y),this.ctx.rotate(t.rotation),this.drawStar(t.size,t.color),this.ctx.restore()}this.particles.length>0?requestAnimationFrame(()=>this.animateParticles()):this.canvas&&document.body.contains(this.canvas)&&document.body.removeChild(this.canvas)}}drawStar(s,t){if(this.ctx){this.ctx.fillStyle=t,this.ctx.beginPath();for(let a=0;a<5;a++){const i=a*Math.PI*2/5,d=Math.cos(i)*s,h=Math.sin(i)*s;a===0?this.ctx.moveTo(d,h):this.ctx.lineTo(d,h)}this.ctx.closePath(),this.ctx.fill()}}createRippleEffect(s){const t=document.createElement("div");t.style.position="absolute",t.style.borderRadius="50%",t.style.background="radial-gradient(circle, rgba(139,92,246,0.3) 0%, rgba(139,92,246,0) 70%)",t.style.transform="scale(0)",t.style.animation="rippleAnimation 1s ease-out forwards",t.style.pointerEvents="none",t.style.zIndex="1000";const a=s.getBoundingClientRect(),i=Math.max(a.width,a.height)*2;t.style.width=i+"px",t.style.height=i+"px",t.style.left=a.left+a.width/2-i/2+"px",t.style.top=a.top+a.height/2-i/2+"px",document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},1e3)}showSuccessMessage(s="Login Berhasil!",t=3e3){const a=document.createElement("div");a.innerHTML=`
      <div style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 20px;
        font-size: clamp(14px, 4vw, 18px);
        font-weight: bold;
        text-align: center;
        z-index: 10000;
        box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        animation: successMessageAnimation 3s ease forwards;
        border: 2px solid rgba(255,255,255,0.2);
      ">
        <div style="margin-bottom: 10px; font-size: 24px;">🎉</div>
        ${s}
      </div>
    `,document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},t)}slideOutLoginForm(s,t="left"){const a=t==="left"?"-100%":"100%";s.style.transition="transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s ease",s.style.transform=`translateX(${a})`,s.style.opacity="0"}playLoginSuccessAnimation(s={}){if(this.isAnimating){console.warn("🚫 Animation already in progress, skipping");return}console.log("🎬 Starting playLoginSuccessAnimation with options:",s),this.isAnimating=!0;const{loginButton:t=null,loginForm:a=null,showParticles:i=!0,showRipple:d=!0,showSuccessMessage:h=!0,successMessage:v="Login Berhasil!",slideDirection:u="left",onComplete:g=null}=s;if(d&&t&&(console.log("💫 Creating ripple effect..."),this.createRippleEffect(t)),i&&t){console.log("✨ Creating particles...");const m=t.getBoundingClientRect(),x=m.left+m.width/2,p=m.top+m.height/2;console.log("🎯 Button position:",{centerX:x,centerY:p,rect:m}),this.initCanvas(),this.createParticles(x,p,30),this.animateParticles()}h&&(console.log("💬 Scheduling success message..."),setTimeout(()=>{console.log("💬 Showing success message now"),this.showSuccessMessage(v)},500)),a&&(console.log("📱 Scheduling form slide out..."),setTimeout(()=>{console.log("📱 Sliding form out now"),this.slideOutLoginForm(a,u)},1500)),setTimeout(()=>{console.log("🏁 Animation sequence complete"),this.isAnimating=!1,g&&g()},4e3)}cleanup(){this.canvas&&document.body.contains(this.canvas)&&document.body.removeChild(this.canvas),this.particles=[],this.isAnimating=!1}}function K({onLogin:o}){const[s,t]=r.useState(!1),[a,i]=r.useState(""),[d,h]=r.useState(""),[v,u]=r.useState(!1),[g,m]=r.useState(!1),x=r.useRef(null),p=r.useRef(null),b=r.useRef(null);r.useEffect(()=>{if(b.current=new D,!document.querySelector('meta[name="viewport"]')){const c=document.createElement("meta");c.name="viewport",c.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.head.appendChild(c)}const n=document.createElement("style");return n.textContent=`
      @keyframes rippleAnimation {
        to {
          transform: scale(1);
          opacity: 0;
        }
      }

      @keyframes successMessageAnimation {
        0% {
          transform: translate(-50%, -50%) scale(0);
          opacity: 0;
        }
        15% {
          transform: translate(-50%, -50%) scale(1.1);
          opacity: 1;
        }
        30% {
          transform: translate(-50%, -50%) scale(1);
        }
        85% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate(-50%, -50%) scale(0.8);
          opacity: 0;
        }
      }
    `,document.head.appendChild(n),()=>{b.current&&b.current.cleanup(),document.head.contains(n)&&document.head.removeChild(n)}},[]);const y=async()=>{var l;u(!0),console.log("🔄 Starting login process...");try{const n=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"),c=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n||"",Accept:"application/json"},body:JSON.stringify({email_or_username:a,password:d,remember:!1}),credentials:"same-origin"});if(c.ok)u(!1),m(!0),console.log("✅ Login successful, triggering animation..."),b.current&&x.current&&p.current?(console.log("🎨 All refs available, starting animation..."),b.current.playLoginSuccessAnimation({loginButton:x.current,loginForm:p.current,showParticles:!0,showRipple:!0,showSuccessMessage:!0,successMessage:"🎉 Selamat Datang di Klinik Dokterku!",slideDirection:"left",onComplete:()=>{console.log("🎯 Animation completed - ready to redirect"),o&&o(),window.location.href=c.url||"/dokter/mobile-app"}})):window.location.href=c.url||"/dokter/mobile-app";else{const j=await c.json();u(!1),alert(j.message||"Login failed. Please check your credentials.")}}catch(n){console.error("Login error:",n),u(!1),alert("An error occurred during login. Please try again.")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white overflow-hidden",children:e.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg mx-auto min-h-screen relative px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-400/10 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"absolute top-40 right-5 w-24 h-24 bg-purple-400/10 rounded-full blur-lg animate-bounce"}),e.jsx("div",{className:"absolute bottom-40 left-5 w-40 h-40 bg-pink-400/10 rounded-full blur-2xl animate-pulse"}),Array.from({length:window.innerWidth<768?8:15}).map((l,n)=>e.jsx("div",{className:"absolute w-1 h-1 bg-cyan-400/30 rounded-full animate-ping",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${n*200}ms`,animationDuration:"3s"}},n))]}),e.jsxs("div",{className:"relative z-10 pt-4 sm:pt-6 lg:pt-8",ref:p,children:[e.jsx("div",{className:"text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 lg:w-28 lg:h-28 mx-auto mb-4 sm:mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-400 via-purple-500 to-pink-500 rounded-3xl animate-pulse shadow-2xl shadow-purple-500/30"}),e.jsx("div",{className:"absolute inset-2 bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 text-cyan-400 animate-bounce"})}),e.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 border-l-2 border-t-2 border-cyan-400 rounded-tl-lg"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 border-r-2 border-t-2 border-purple-400 rounded-tr-lg"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 w-4 h-4 border-l-2 border-b-2 border-pink-400 rounded-bl-lg"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-4 h-4 border-r-2 border-b-2 border-cyan-400 rounded-br-lg"}),e.jsx("div",{className:"absolute -top-3 -right-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold px-2 py-1 rounded-full text-xs border-2 border-white shadow-lg",children:"PRO"})]}),e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"KLINIK DOKTERKU"}),e.jsx("p",{className:"text-purple-200 text-base sm:text-lg lg:text-xl font-medium mb-2",children:"Sahabat Menuju Sehat"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 lg:gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-xl rounded-lg sm:rounded-xl p-2 sm:p-3 lg:p-4 border border-cyan-400/20 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400/5 to-purple-400/5 animate-pulse"}),e.jsx(E,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-red-400 mx-auto mb-1 sm:mb-2"}),e.jsx("div",{className:"text-sm sm:text-base lg:text-lg font-bold text-white",children:"24/7"}),e.jsx("div",{className:"sm:text-xs lg:text-sm text-gray-300",style:{fontSize:"10px"},children:"Service"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-xl rounded-lg sm:rounded-xl p-2 sm:p-3 lg:p-4 border border-purple-400/20 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/5 to-pink-400/5 animate-pulse"}),e.jsx(w,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-green-400 mx-auto mb-1 sm:mb-2"}),e.jsx("div",{className:"text-sm sm:text-base lg:text-lg font-bold text-white",children:"100%"}),e.jsx("div",{className:"sm:text-xs lg:text-sm text-gray-300",style:{fontSize:"10px"},children:"Trusted"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-xl rounded-lg sm:rounded-xl p-2 sm:p-3 lg:p-4 border border-pink-400/20 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-400/5 to-cyan-400/5 animate-pulse"}),e.jsx(T,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-yellow-400 mx-auto mb-1 sm:mb-2"}),e.jsx("div",{className:"text-sm sm:text-base lg:text-lg font-bold text-white",children:"4.9"}),e.jsx("div",{className:"sm:text-xs lg:text-sm text-gray-300",style:{fontSize:"10px"},children:"Rating"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-xl rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 border border-white/20 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Masuk ke sistem klinik"})]}),g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"w-16 h-16 text-green-400 mx-auto mb-4 animate-bounce"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Login Berhasil!"}),e.jsx("p",{className:"text-gray-300",children:"Mengalihkan ke dashboard..."})]}):e.jsxs("form",{onSubmit:l=>{l.preventDefault(),y()},className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(C,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:l=>i(l.target.value),placeholder:"Email atau Username",className:"w-full bg-white/10 border border-white/20 rounded-xl pl-12 pr-4 py-3 text-base sm:text-base lg:text-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-400/50 focus:bg-white/15 transition-all duration-300 touch-manipulation"}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(z,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:s?"text":"password",value:d,onChange:l=>h(l.target.value),placeholder:"Password",className:"w-full bg-white/10 border border-white/20 rounded-xl pl-12 pr-12 py-3 text-base sm:text-base lg:text-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-400/50 focus:bg-white/15 transition-all duration-300 touch-manipulation"}),e.jsx("button",{type:"button",onClick:()=>t(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors p-1 touch-manipulation",children:s?e.jsx(M,{className:"w-5 h-5"}):e.jsx(A,{className:"w-5 h-5"})})]}),e.jsxs("button",{ref:x,type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 hover:from-cyan-600 hover:via-purple-600 hover:to-pink-600 text-white font-bold py-3 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 shadow-lg shadow-purple-500/30 disabled:opacity-70 relative overflow-hidden group touch-manipulation text-base sm:text-lg",style:{minHeight:"44px"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-white/5 to-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),v?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Connecting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{children:"LOGIN"}),e.jsx(R,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"})]})]})]}),!g&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-500 to-transparent flex-1"}),e.jsx("span",{className:"px-4 text-gray-400 text-sm",children:"atau"}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-500 to-transparent flex-1"})]}),e.jsxs("button",{className:"w-full bg-white/10 hover:bg-white/15 border border-white/20 text-white py-3 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 touch-manipulation text-sm sm:text-base",style:{minHeight:"44px"},children:[e.jsx(w,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{children:"Login sebagai Tamu"})]})]})]}),e.jsxs("div",{className:"text-center mt-6 pb-safe",children:[e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm lg:text-base mb-2",children:"Butuh bantuan? Hubungi admin"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 sm:text-xs lg:text-sm text-gray-500",style:{fontSize:"10px"},children:[e.jsx("span",{children:"© 2025 Klinik Dokterku"}),e.jsx("div",{className:"w-1 h-1 bg-gray-500 rounded-full"}),e.jsx("span",{children:"v2.1.0"})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-purple-900/20 to-transparent pointer-events-none"})]})})}export{K as W};
