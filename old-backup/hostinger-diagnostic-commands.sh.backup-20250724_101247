#!/bin/bash

echo "=== HOSTINGER PRODUCTION DIAGNOSTIC COMMANDS ==="
echo "Run these commands on your Hostinger server"
echo "================================================="
echo ""

echo "1. Navigate to project directory:"
echo "cd ~/domains/dokterkuklinic.com/public_html"
echo ""

echo "2. Check database connection:"
echo 'php artisan tinker --execute="echo '\''DB Test: '\'' . DB::connection()->getDatabaseName() . PHP_EOL;"'
echo ""

echo "3. Check JadwalJaga table:"
echo 'php artisan tinker --execute="echo '\''JadwalJaga count: '\'' . App\Models\JadwalJaga::count() . PHP_EOL;"'
echo ""

echo "4. Check Dr. Yaya user and schedules:"
echo 'php artisan tinker --execute="
$user = App\Models\User::where('\''email'\'', '\''yaya@dokterkuklinic.com'\'')->first();
if ($user) {
    echo '\''Dr. Yaya ID: '\'' . $user->id . PHP_EOL;
    $schedules = App\Models\JadwalJaga::where('\''pegawai_id'\'', $user->id)->count();
    echo '\''Dr. Yaya schedules: '\'' . $schedules . PHP_EOL;
    echo '\''Dr. Yaya name: '\'' . $user->nama_lengkap . PHP_EOL;
    echo '\''Dr. Yaya role: '\'' . $user->role . PHP_EOL;
} else {
    echo '\''Dr. Yaya not found'\'' . PHP_EOL;
}
"'
echo ""

echo "5. Check AttendanceRecap count:"
echo 'php artisan tinker --execute="echo '\''AttendanceRecap count: '\'' . App\Models\AttendanceRecap::count() . PHP_EOL;"'
echo ""

echo "6. Check all users count by role:"
echo 'php artisan tinker --execute="
echo '\''Total users: '\'' . App\Models\User::count() . PHP_EOL;
echo '\''Dokter users: '\'' . App\Models\User::where('\''role'\'', '\''dokter'\'')->count() . PHP_EOL;
echo '\''Paramedis users: '\'' . App\Models\User::where('\''role'\'', '\''paramedis'\'')->count() . PHP_EOL;
"'
echo ""

echo "7. Test API endpoint directly:"
echo "curl -X GET 'https://dokterkuklinic.com/api/v2/dokter/dashboard' -H 'Authorization: Bearer YOUR_TOKEN'"
echo ""

echo "8. Or run the comprehensive diagnostic script:"
echo "php hostinger-database-diagnostic.php"
echo ""

echo "=== END OF COMMANDS ==="