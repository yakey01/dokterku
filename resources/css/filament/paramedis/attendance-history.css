/* Attendance History Table Optimizations */

/* Enhanced Mobile responsiveness for attendance table */

/* Base Mobile (0-575px) */
@media (max-width: 575px) {
    /* Ultra-compact mobile view */
    .fi-ta-table {
        font-size: 0.75rem;
    }
    
    /* Minimal padding on mobile */
    .fi-ta-cell {
        padding: 0.375rem 0.25rem;
    }
    
    /* Show only critical columns: Date, Time In, Time Out, Status */
    .fi-ta-col-user\.name,
    .fi-ta-col-work_duration,
    .fi-ta-col-location_coordinates,
    .fi-ta-col-location_validated,
    .fi-ta-col-created_at {
        display: none !important;
    }
    
    /* Compact badges */
    .fi-badge {
        font-size: 0.625rem;
        padding: 0.125rem 0.375rem;
    }
    
    /* Truncate long text */
    .fi-ta-text {
        max-width: 100px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
}

/* Small Mobile (576px-767px) */
@media (min-width: 576px) and (max-width: 767px) {
    /* Slightly larger on landscape mobile */
    .fi-ta-table {
        font-size: 0.8125rem;
    }
    
    /* Better padding */
    .fi-ta-cell {
        padding: 0.5rem 0.375rem;
    }
    
    /* Show Date, Time In/Out, Duration, Status */
    .fi-ta-col-user\.name,
    .fi-ta-col-location_coordinates,
    .fi-ta-col-location_validated,
    .fi-ta-col-created_at {
        display: none !important;
    }
    
    /* Regular badge size */
    .fi-badge {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
}

/* Tablet (768px-1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    /* Comfortable tablet view */
    .fi-ta-table {
        font-size: 0.875rem;
    }
    
    /* Good padding for touch */
    .fi-ta-cell {
        padding: 0.625rem 0.5rem;
    }
    
    /* Hide only non-essential columns */
    .fi-ta-col-location_coordinates,
    .fi-ta-col-created_at {
        display: none !important;
    }
    
    /* Normal badge size */
    .fi-badge {
        font-size: 0.8125rem;
        padding: 0.375rem 0.625rem;
    }
}

/* Scrollable table for large datasets */
.attendance-history-wrapper {
    overflow-x: auto;
    max-height: 70vh;
    border-radius: 0.5rem;
    border: 1px solid rgb(229 231 235);
}

.attendance-history-wrapper::-webkit-scrollbar {
    height: 8px;
}

.attendance-history-wrapper::-webkit-scrollbar-track {
    background: rgb(243 244 246);
    border-radius: 4px;
}

.attendance-history-wrapper::-webkit-scrollbar-thumb {
    background: rgb(156 163 175);
    border-radius: 4px;
}

.attendance-history-wrapper::-webkit-scrollbar-thumb:hover {
    background: rgb(107 114 128);
}

/* Dark mode scrollbar */
.dark .attendance-history-wrapper::-webkit-scrollbar-track {
    background: rgb(55 65 81);
}

.dark .attendance-history-wrapper::-webkit-scrollbar-thumb {
    background: rgb(75 85 99);
}

.dark .attendance-history-wrapper::-webkit-scrollbar-thumb:hover {
    background: rgb(107 114 128);
}

/* Optimized column widths */
.fi-ta-col-date {
    width: 140px;
    min-width: 140px;
}

.fi-ta-col-time_in,
.fi-ta-col-time_out {
    width: 90px;
    min-width: 90px;
}

.fi-ta-col-total_working_hours {
    width: 150px;
    min-width: 150px;
}

.fi-ta-col-status {
    width: 100px;
    min-width: 100px;
}

.fi-ta-col-location_name_in {
    width: 200px;
    min-width: 150px;
    max-width: 250px;
}

/* Sticky header for long tables */
.fi-ta-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: white;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
}

.dark .fi-ta-header {
    background: rgb(17 24 39);
}

/* Enhanced pagination */
.fi-pagination {
    padding: 1rem;
    border-top: 1px solid rgb(229 231 235);
    background: rgb(249 250 251);
}

.dark .fi-pagination {
    border-color: rgb(55 65 81);
    background: rgb(17 24 39);
}

/* Loading state improvements */
.fi-ta-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

/* Filter badges */
.fi-ta-filters .fi-badge {
    margin: 0.25rem;
}

/* Compact filter layout */
.fi-ta-filters-form {
    gap: 0.5rem;
}

/* Stats widget optimizations */
.fi-stats-overview {
    gap: 1rem;
}

@media (max-width: 1024px) {
    .fi-stats-overview {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 640px) {
    .fi-stats-overview {
        grid-template-columns: 1fr;
    }
}

/* Modal optimizations */
.fi-modal-content {
    max-height: 80vh;
    overflow-y: auto;
}

.attendance-detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
}

/* Performance optimizations */
.fi-ta-table {
    contain: layout;
    will-change: scroll-position;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    .fi-ta-skeleton {
        animation: none;
    }
    
    .fi-ta-table {
        scroll-behavior: auto;
    }
}

/* Responsive Table Actions */
@media (max-width: 575px) {
    /* Stack table actions vertically on mobile */
    .fi-ta-actions {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .fi-ta-actions .fi-btn {
        width: 100%;
        justify-content: center;
    }
    
    /* Compact filter form */
    .fi-ta-filters-form {
        flex-direction: column;
    }
    
    .fi-ta-filters-form > * {
        width: 100%;
    }
}

/* Responsive Forms in Attendance Pages */
@media (max-width: 767px) {
    /* Stack all form fields on mobile */
    .fi-fo-grid {
        grid-template-columns: 1fr !important;
    }
    
    /* Full width map on mobile */
    .fi-fo-field-wrp.col-span-full {
        grid-column: span 1;
    }
    
    /* Collapse sections by default on mobile */
    .fi-section.fi-collapsible {
        --collapsed: 1;
    }
}

/* iPad-specific optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
    /* Optimize for iPad portrait and landscape */
    .fi-page {
        padding: 1.5rem;
    }
    
    /* Two-column layout for forms */
    .fi-fo-grid {
        grid-template-columns: repeat(2, 1fr) !important;
    }
    
    /* Better touch targets for iPad */
    .fi-btn, .fi-link {
        min-height: 48px;
        padding: 0.75rem 1.25rem;
    }
}

/* Desktop enhancements */
@media (min-width: 1025px) {
    /* Wider content area on desktop */
    .fi-page {
        padding: 2rem;
    }
    
    /* Multi-column layouts */
    .fi-fo-grid {
        grid-template-columns: repeat(3, 1fr) !important;
    }
    
    /* Hover states for desktop */
    .fi-ta-row:hover {
        background-color: var(--primary-50);
    }
    
    .dark .fi-ta-row:hover {
        background-color: var(--primary-950);
    }
}

/* Print styles for attendance reports */
@media print {
    /* Hide navigation and actions */
    .fi-sidebar,
    .fi-topbar,
    .fi-ta-actions,
    .fi-ta-filters,
    .fi-pagination {
        display: none !important;
    }
    
    /* Full width table for printing */
    .fi-ta-table-wrp {
        overflow: visible !important;
    }
    
    /* Show all columns when printing */
    .fi-ta-col-location_coordinates,
    .fi-ta-col-created_at {
        display: table-cell !important;
    }
    
    /* Better print formatting */
    .fi-ta-table {
        font-size: 10pt;
        border: 1px solid #000;
    }
    
    .fi-ta-cell {
        border: 1px solid #ccc;
        padding: 4pt;
    }
}