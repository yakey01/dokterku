import{r as o,j as e,c as H,R as L}from"./index-ClR2o9Bl.js";import{J as U,C as y,U as B,d as K,S as G}from"./setup-csrf-CIiWP8iI.js";import{S as k,M as O,C as M,a as q}from"./trending-up-DmJG-YAw.js";import{A as Q}from"./activity-BpHUwRg8.js";import{D}from"./target-rAQgpO39.js";import{g as V}from"./UnifiedAuth-Bo5tzQqB.js";/* empty css            */import"./chevron-right-DjLsWaQd.js";import"./zap-B4KSnBV3.js";const W=({userData:r})=>{const[s,l]=o.useState(new Date),[i,n]=o.useState("dashboard"),[c,h]=o.useState({jaspel:{currentMonth:0,previousMonth:0,growthPercentage:0,progressPercentage:0},attendance:{rate:0,daysPresent:0,totalDays:30,displayText:"0%"},patients:{today:0,thisMonth:0}}),[u,p]=o.useState({dashboard:!1,error:null});o.useEffect(()=>{let t=!0;return(async()=>{var g,f,j,N,v;try{if(!t)return;p({dashboard:!0,error:null}),console.log("HolisticMedicalDashboardSimple: Starting dashboard data fetch...");const a=await K.getDashboard();if(!t)return;if(a){console.log("HolisticMedicalDashboardSimple: Dashboard data received:",a);const d=((g=a.jaspel_summary)==null?void 0:g.current_month)||0,x=((f=a.jaspel_summary)==null?void 0:f.last_month)||0,J=x>0?(d-x)/x*100:0,$=Math.min(Math.max(d/1e7*100,0),100),m=((j=a.performance)==null?void 0:j.attendance_rate)||0,w=30,z=Math.round(m/100*w);t&&(h({jaspel:{currentMonth:d,previousMonth:x,growthPercentage:Math.round(J*10)/10,progressPercentage:Math.round($*10)/10},attendance:{rate:m,daysPresent:z,totalDays:w,displayText:`${m}%`},patients:{today:((N=a.patient_count)==null?void 0:N.today)||0,thisMonth:((v=a.patient_count)==null?void 0:v.this_month)||0}}),console.log("HolisticMedicalDashboardSimple: Dashboard metrics updated successfully"))}}catch(a){if(!t)return;const d=a instanceof Error?a.message:"Unknown error occurred";console.error("HolisticMedicalDashboardSimple: Error fetching dashboard data:",a),p({dashboard:!1,error:`Failed to load dashboard data: ${d}`}),t&&(h({jaspel:{currentMonth:0,previousMonth:0,growthPercentage:0,progressPercentage:0},attendance:{rate:0,daysPresent:0,totalDays:30,displayText:"0%"},patients:{today:0,thisMonth:0}}),console.log("HolisticMedicalDashboardSimple: Fallback data set due to error"))}finally{t&&p({dashboard:!1,error:null})}})(),()=>{t=!1}},[]),o.useEffect(()=>{const t=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(t)},[]);const P=o.useCallback(t=>t.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),[]),b=o.useCallback(()=>{const t=s.getHours();return t<12?{greeting:"Good Morning, Doctor!",icon:k,color:"from-amber-400 to-orange-500"}:t<17?{greeting:"Good Afternoon, Doctor!",icon:k,color:"from-blue-400 to-cyan-500"}:{greeting:"Good Evening, Doctor!",icon:O,color:"from-purple-400 to-indigo-500"}},[s]),E=o.useCallback(()=>{switch(i){case"missions":return e.jsx("div",{className:"w-full",children:e.jsx(U,{userData:r,onNavigate:t=>n(t)})});case"presensi":return e.jsx("div",{className:"w-full px-6 pt-8 pb-6",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Presensi"}),e.jsx("p",{className:"text-purple-200",children:"Fitur presensi akan segera tersedia"})]})});case"jaspel":return e.jsx("div",{className:"w-full px-6 pt-8 pb-6",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Jaspel"}),e.jsx("p",{className:"text-purple-200",children:"Fitur jaspel akan segera tersedia"})]})});case"profile":return e.jsx("div",{className:"w-full px-6 pt-8 pb-6",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Profile"}),e.jsx("p",{className:"text-purple-200",children:"Fitur profile akan segera tersedia"})]})});default:return R()}},[i,r]),{greeting:I,icon:F,color:_}=o.useMemo(()=>b(),[b]),R=()=>e.jsxs(e.Fragment,{children:[u.dashboard&&e.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"}),e.jsx("p",{className:"text-purple-300",children:"Loading dashboard data..."})]})}),u.error&&e.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:e.jsxs("div",{className:"bg-red-900/30 border border-red-500/30 rounded-2xl p-4 text-center",children:[e.jsx("p",{className:"text-red-300 mb-2",children:"Failed to load dashboard data"}),e.jsx("p",{className:"text-red-200 text-sm",children:"Using fallback data"})]})}),e.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/30 via-purple-600/30 to-pink-600/30 rounded-3xl backdrop-blur-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-3xl border border-white/20"}),e.jsxs("div",{className:"relative p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-cyan-400 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),e.jsx(y,{className:"w-10 h-10 text-white relative z-10 animate-bounce"})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:(r==null?void 0:r.name)||"Doctor"}),e.jsx("p",{className:"text-purple-200 text-sm",children:"Level 5 Medical Professional"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white text-sm opacity-80",children:P(s)}),e.jsx("div",{className:"text-purple-200 text-xs",children:s.toLocaleDateString("id-ID")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:`p-3 bg-gradient-to-r ${_} rounded-xl`,children:e.jsx(F,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:I}),e.jsx("p",{className:"text-purple-200 text-sm",children:"Ready for today's challenges?"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl",children:e.jsx(B,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm opacity-80",children:"Patients Today"}),e.jsx("p",{className:"text-white text-xl font-bold",children:c.patients.today})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-xl",children:e.jsx(Q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm opacity-80",children:"Attendance"}),e.jsx("p",{className:"text-white text-xl font-bold",children:c.attendance.displayText})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl",children:e.jsx(D,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm opacity-80",children:"Jaspel This Month"}),e.jsx("p",{className:"text-white text-xl font-bold",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(c.jaspel.currentMonth)})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-400 to-pink-500 rounded-xl",children:e.jsx(M,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm opacity-80",children:"Total Patients"}),e.jsx("p",{className:"text-white text-xl font-bold",children:c.patients.thisMonth})]})]})})]})]})]})})]}),A=()=>e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/10 backdrop-blur-2xl border-t border-white/20 px-6 py-4",children:e.jsxs("div",{className:"flex justify-around items-center",children:[e.jsxs("button",{onClick:()=>n("dashboard"),className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${i==="dashboard"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-purple-200 hover:text-white"}`,children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"Dashboard"})]}),e.jsxs("button",{onClick:()=>n("missions"),className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${i==="missions"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-purple-200 hover:text-white"}`,children:[e.jsx(M,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"Jadwal"})]}),e.jsxs("button",{onClick:()=>n("presensi"),className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${i==="presensi"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-purple-200 hover:text-white"}`,children:[e.jsx(q,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"Presensi"})]}),e.jsxs("button",{onClick:()=>n("jaspel"),className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${i==="jaspel"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-purple-200 hover:text-white"}`,children:[e.jsx(D,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"Jaspel"})]}),e.jsxs("button",{onClick:()=>n("profile"),className:`flex flex-col items-center space-y-1 p-2 rounded-xl transition-all duration-200 ${i==="profile"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-purple-200 hover:text-white"}`,children:[e.jsx(G,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1),transparent_50%)]"})}),e.jsx("div",{className:"relative z-10 pb-24",children:E()}),A()]})};function C(){if(console.log("🚀 DOKTERKU: Starting simple app initialization"),document.readyState==="loading"){document.addEventListener("DOMContentLoaded",C);return}const r=document.getElementById("dokter-app");if(!r){console.error("❌ Container element #dokter-app not found"),setTimeout(()=>{const s=document.getElementById("dokter-app");s?(console.log("✅ Container found on retry"),S(s)):(console.error("❌ Container still not found after retry"),T("Container element not found. Please refresh the page."))},1e3);return}console.log("✅ Container element found, mounting app"),S(r)}function S(r){try{const s=V();H.createRoot(r).render(e.jsx(L.StrictMode,{children:e.jsx(W,{})})),console.log("✅ DOKTERKU: Simple app mounted successfully"),setTimeout(()=>{const i=document.getElementById("loading");i&&(i.style.display="none")},1e3)}catch(s){console.error("❌ Failed to mount app:",s),T("Failed to initialize application. Please refresh the page.")}}function T(r){const s=document.getElementById("dokter-app");s&&(s.innerHTML=`
            <div style="padding: 20px; text-align: center; background: #fee2e2; color: #991b1b; margin: 20px; border-radius: 8px;">
                <h3>Application Error</h3>
                <p>${r}</p>
                <button onclick="window.location.reload()" style="margin-top: 10px; padding: 8px 16px; background: #dc2626; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    Refresh Page
                </button>
            </div>
        `);const l=document.getElementById("loading");l&&(l.style.display="none")}console.log("🚀 DOKTERKU: Simple app script loaded");C();
