var jr=Object.defineProperty;var Nr=(c,r,o)=>r in c?jr(c,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[r]=o;var ke=(c,r,o)=>Nr(c,typeof r!="symbol"?r+"":r,o);import{r as f,j as i,R as qe,g as Pr,c as At}from"./index-CmmmkQkd.js";import{L as Qn,C as It,T as pn,g as fn,r as Sr,N as os,M as vt,f as Tr,R as ls,d as Vt,a as nt,X as la,P as Cr,F as Lr,S as cn,h as es,D as ts,c as Mr,i as ca,A as Ci,b as Er,B as Ir}from"./index-DX02L_O1.js";import{c as _e,A as Mi,a as dn,b as Ar,E as Dr,C as Ei,S as da,U as on}from"./user-kzwFVkUo.js";import{S as hn,Z as is,a as Ii,H as ha,L as Qs}from"./zap-BZ853rAq.js";/* empty css            */const ns=_e("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),zr=_e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ua=_e("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Or=_e("Bug",[["rect",{width:"8",height:"14",x:"8",y:"6",rx:"4",key:"hq8nra"}],["path",{d:"m19 7-3 2",key:"fmg8ec"}],["path",{d:"m5 7 3 2",key:"dkxqes"}],["path",{d:"m19 19-3-2",key:"1hbhi4"}],["path",{d:"m5 19 3-2",key:"dvt2ee"}],["path",{d:"M20 13h-4",key:"1agfp2"}],["path",{d:"M4 13h4",key:"1bwh8b"}],["path",{d:"m10 4 1 2",key:"1pot59"}],["path",{d:"m14 4-1 2",key:"m8sn0o"}]]),Rr=_e("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Br=_e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ma=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),$r=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Zr=_e("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),ss=_e("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),pa=_e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),fa=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),ea=_e("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),ga=_e("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Hr=_e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Fr=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Gr=_e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ur=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),xa=_e("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]),Wr=_e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jr=_e("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),un=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kn=_e("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Kr=_e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),qr=_e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),mn=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),va=_e("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Vr={BASE_URL:"/build/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Dokter Ku Klinik",VITE_DEV_SERVER_URL:"http://127.0.0.1:5173",VITE_PUSHER_APP_CLUSTER:"mt1",VITE_PUSHER_APP_KEY:"",VITE_USER_NODE_ENV:"production"};var Xr={};class Yr{constructor(){ke(this,"config");const r=this.isDevelopmentMode();this.config={enabled:r,level:"debug",prefix:"🔧"}}isDevelopmentMode(){try{const r=[];try{typeof import.meta<"u"}catch{}try{typeof process<"u"}catch{}if(typeof window<"u"&&window.location){const o=window.location.hostname,d=window.location.port;(o==="localhost"||o==="127.0.0.1"||o.includes("local")||d!==""||o.includes("dev")||o.includes("staging")||o.includes("test"))&&r.push(!0)}try{typeof localStorage<"u"&&localStorage.getItem("debug_mode")==="true"&&r.push(!0)}catch{}try{typeof window<"u"&&new URLSearchParams(window.location.search).has("debug")&&r.push(!0)}catch{}try{if(typeof document<"u"){const o=document.querySelector('meta[name="app-debug"]');o&&o.getAttribute("content")==="true"&&r.push(!0)}}catch{}return r.length>0}catch{return!1}}log(r,o){this.config.enabled&&(o!==void 0?console.log(`${this.config.prefix} ${r}`,o):console.log(`${this.config.prefix} ${r}`))}info(r,o){this.config.enabled&&(o!==void 0?console.info(`ℹ️ ${r}`,o):console.info(`ℹ️ ${r}`))}warn(r,o){this.config.enabled&&(o!==void 0?console.warn(`⚠️ ${r}`,o):console.warn(`⚠️ ${r}`))}error(r,o){this.config.enabled&&(o!==void 0?console.error(`❌ ${r}`,o):console.error(`❌ ${r}`))}api(r,o){this.config.enabled&&(o?console.log(`🌐 API Call: ${r}`,o):console.log(`🌐 API Call: ${r}`))}performance(r,o){this.config.enabled&&console.log(o!==void 0?`⚡ Performance: ${r} took ${o}ms`:`⚡ Performance: ${r}`)}state(r,o){this.config.enabled&&console.log(`📊 State Update [${r}]:`,o)}transform(r,o){this.config.enabled&&console.log(`🔄 Transform [${r}]:`,o)}group(r,o){if(!this.config.enabled){o();return}console.group(`📁 ${r}`),o(),console.groupEnd()}table(r,o){this.config.enabled&&(console.log(`📋 ${r}:`),console.table(o))}toggle(){this.config.enabled=!this.config.enabled,localStorage.setItem("debug_mode",this.config.enabled.toString()),console.log(`🔧 Debug mode ${this.config.enabled?"ENABLED":"DISABLED"}`)}isEnabled(){return this.config.enabled}prodError(r,o){o!==void 0?console.error(`🚨 CRITICAL: ${r}`,o):console.error(`🚨 CRITICAL: ${r}`)}prodPerformance(r,o){o>1e3&&console.warn(`⚡ SLOW: ${r} took ${o}ms`)}getEnvInfo(){return{isDev:this.config.enabled,hostname:window.location.hostname,port:window.location.port,href:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}}}const Se=new Yr,xe=Se;Se.log.bind(Se);Se.info.bind(Se);Se.warn.bind(Se);Se.error.bind(Se);const Qr=Se.api.bind(Se);Se.performance.bind(Se);const eo=Se.state.bind(Se),qn=Se.transform.bind(Se);Se.group.bind(Se);Se.table.bind(Se);const to=Se.prodError.bind(Se);Se.prodPerformance.bind(Se);function io({userData:c,onNavigate:r}){const[o,d]=f.useState(!0),[p,u]=f.useState(null),[m,b]=f.useState([]),[y,U]=f.useState(12),[T,_]=f.useState(8),[D,C]=f.useState(4),[E,S]=f.useState(96),[se,z]=f.useState(!1),[I,B]=f.useState("portrait"),[$,ce]=f.useState(0),[P,Y]=f.useState(1),te=6,je=async(w=!1)=>{var Q,O,ge,ve,De,ye,Oe,bt,st,k;xe.log(`JadwalJaga: ${w?"Refreshing":"Starting"} API fetch at ${new Date().toLocaleTimeString()}`);try{w||d(!0),u(null);const Te=(c==null?void 0:c.token)||localStorage.getItem("auth_token")||((Q=document.querySelector('meta[name="api-token"]'))==null?void 0:Q.getAttribute("content"))||"";if(xe.log("Token check:",{hasUserDataToken:!!(c!=null&&c.token),hasLocalStorageToken:!!localStorage.getItem("auth_token"),hasMetaToken:!!((O=document.querySelector('meta[name="api-token"]'))!=null&&O.getAttribute("content")),tokenLength:(Te==null?void 0:Te.length)||0}),!Te){xe.warn("No authentication token available - using fallback data"),u("Authentication required");const Pe=Ae();xe.log("Setting fallback missions:",`${Pe.length} missions`),b(Pe),d(!1);return}xe.log("Making API call to /api/v2/dashboards/dokter/jadwal-jaga");const $e=w?`?refresh=${Date.now()}`:"",He=await fetch(`/api/v2/dashboards/dokter/jadwal-jaga${$e}`,{headers:{Authorization:`Bearer ${Te}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Cache-Control":w?"no-cache":"default"}});if(Qr("jadwal-jaga",{status:He.status,ok:He.ok}),!He.ok)throw new Error(`API Error: ${He.status}`);const Me=await He.json();if(xe.log("API Data received:",{hasData:!!Me.data,calendarEventsCount:((ve=(ge=Me.data)==null?void 0:ge.calendar_events)==null?void 0:ve.length)||0,weeklyScheduleCount:((ye=(De=Me.data)==null?void 0:De.weekly_schedule)==null?void 0:ye.length)||0,hasScheduleStats:!!((Oe=Me.data)!=null&&Oe.schedule_stats)}),(bt=Me.data)!=null&&bt.schedule_stats){const Pe=Me.data.schedule_stats;xe.log("Schedule stats from API:",Pe),_(Pe.completed||0),C(Pe.upcoming||0),S(Pe.total_hours||0),U(Pe.total_shifts||0)}const ze=((st=Me.data)==null?void 0:st.weekly_schedule)||[],W=((k=Me.data)==null?void 0:k.calendar_events)||[],Qe=[...ze,...W],_t=new Set,Tt=Qe.filter(Pe=>{const Ve=Pe.id;return _t.has(Ve)?!1:(_t.add(Ve),!0)});xe.log("Schedule sources:",{weeklySchedulesCount:ze.length,calendarEventsCount:W.length,totalCombined:Qe.length,afterDeduplication:Tt.length,duplicatesRemoved:Qe.length-Tt.length});const Re=he(Tt);if(qn("missions",{count:Re.length}),Re.length===0){xe.warn("No API schedules found - checking user authentication");const Pe=Ae();b(Pe),xe.log("Using fallback data for demonstration")}else xe.log(`Using real API schedule data - ${Re.length} schedules loaded`),xe.log("Schedule cards that will be displayed:",Re.map(Ve=>{var Ct;return{id:Ve.id,title:Ve.title,shift:(Ct=Ve.shift_template)==null?void 0:Ct.nama_shift,time:Ve.time,date:Ve.date}})),JSON.stringify(Re)!==JSON.stringify(m)&&eo("JadwalJaga",`Schedule data has changed, updating UI with ${Re.length} cards`),b(Re);xe.log("JadwalJaga: Data loaded successfully")}catch(Te){to("Failed to fetch jadwal jaga:",Te),xe.error("Failed to fetch jadwal jaga:",Te),u("Failed to load schedule data"),b(Ae()),xe.log("Using fallback missions")}finally{d(!1),xe.log("JadwalJaga: Loading complete"),ce(Date.now())}};f.useEffect(()=>{je()},[]),f.useEffect(()=>{const w=setInterval(()=>{xe.log("Auto-refresh: Fetching latest schedule data..."),je(!0).catch(Q=>{xe.error("Auto-refresh failed:",Q)})},3e4);return()=>clearInterval(w)},[]);const Ne=async()=>{xe.log("Manual refresh triggered"),await je(!0)},he=w=>{qn("starting",w);const Q=w.map((O,ge)=>{var Oe,bt,st;xe.log(`Processing schedule ${ge}:`,O),xe.log("Schedule details:",{hasTime:!!O.time,timeValue:O.time||"no time field",start:O.start,end:O.end,shift_info:O.shift_info,shift_template:O.shift_template});const ve=O.start&&O.title,De=O.tanggal_jaga||O.shift_template;xe.log("Schedule type:",{isCalendarEvent:ve,isWeeklySchedule:De,hasShiftTemplate:!!O.shift_template,hasShiftInfo:!!O.shift_info,shiftData:O.shift_template||O.shift_info||null});let ye;if(ve){const k=O.shift_info||{},Te=ze=>{if(!ze)return ze;if(ze.includes("T")){const W=ze.split("T")[1];if(W)return W.split(":").slice(0,2).join(":")}return ze.split(":").slice(0,2).join(":")},$e=Te(k.jam_masuk)||"08:00",He=Te(k.jam_pulang)||"16:00",Me=`${$e} - ${He}`;xe.log("Time formatting:",{originalJamMasuk:k.jam_masuk,originalJamPulang:k.jam_pulang,formattedJamMasuk:$e,formattedJamPulang:He,finalTime:Me}),ye={id:O.id||ge+1,title:"Dokter Jaga",subtitle:ae(k.nama_shift),date:new Date(O.start).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),full_date:O.start,day_name:new Date(O.start).toLocaleDateString("id-ID",{weekday:"long"}),time:Me,location:k.unit_kerja||O.description||"Unit Kerja",type:J(k.nama_shift),difficulty:"easy",status:"available",status_jaga:ie(k.status||"aktif"),description:O.description||`${k.nama_shift||"Shift"} duty assignment`,peran:k.peran||"Dokter Jaga",employee_name:k.employee_name||(c==null?void 0:c.name)||"dr. Medical Officer",shift_template:{id:k.id||ge+1,nama_shift:k.nama_shift||"Pagi",jam_masuk:Te(k.jam_masuk)||"08:00",jam_pulang:Te(k.jam_pulang)||"16:00"}}}else if(De){const k=O.shift_template||{},Te=O.tanggal_jaga||O.date,$e=W=>{if(!W)return W;if(W.includes("T")){const Qe=W.split("T")[1];if(Qe)return Qe.split(":").slice(0,2).join(":")}return W.split(":").slice(0,2).join(":")},He=$e(k.jam_masuk)||"08:00",Me=$e(k.jam_pulang)||"16:00",ze=`${He} - ${Me}`;xe.log("Weekly schedule time formatting:",{originalJamMasuk:k.jam_masuk,originalJamPulang:k.jam_pulang,formattedJamMasuk:He,formattedJamPulang:Me,finalTime:ze}),ye={id:O.id||ge+1,title:"Dokter Jaga",subtitle:ae(k.nama_shift),date:new Date(Te).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),full_date:Te,day_name:new Date(Te).toLocaleDateString("id-ID",{weekday:"long"}),time:ze,location:O.unit_kerja||"Unit Kerja",type:J(k.nama_shift),difficulty:"easy",status:"available",status_jaga:ie(O.status_jaga||"aktif"),description:O.keterangan||`${k.nama_shift||"Shift"} duty assignment`,peran:O.peran||"Dokter Jaga",employee_name:O.employee_name||(c==null?void 0:c.name)||"dr. Medical Officer",shift_template:{id:k.id||ge+1,nama_shift:k.nama_shift||"Pagi",jam_masuk:$e(k.jam_masuk)||"08:00",jam_pulang:$e(k.jam_pulang)||"16:00"}}}else xe.warn("Unknown schedule format, using fallback:",O),ye={id:O.id||ge+1,title:"Dokter Jaga",subtitle:"General Medical Duty",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),full_date:new Date().toISOString(),day_name:new Date().toLocaleDateString("id-ID",{weekday:"long"}),time:"08:00 - 16:00",location:"Unit Kerja",type:"regular",difficulty:"easy",status:"available",status_jaga:"Terjadwal",description:"Medical duty assignment",peran:"Dokter Jaga",employee_name:(c==null?void 0:c.name)||"dr. Medical Officer",shift_template:{id:ge+1,nama_shift:"Pagi",jam_masuk:"08:00",jam_pulang:"16:00"}};return xe.log("Created mission:",ye),xe.log("Mission time details:",{id:ye.id,shift:(Oe=ye.shift_template)==null?void 0:Oe.nama_shift,displayTime:ye.time,jam_masuk:(bt=ye.shift_template)==null?void 0:bt.jam_masuk,jam_pulang:(st=ye.shift_template)==null?void 0:st.jam_pulang,originalScheduleTime:O.time||"no time in schedule"}),ye}).filter(O=>O!==null);return qn("final missions",Q),Q},ae=w=>{switch(w==null?void 0:w.toLowerCase()){case"malam":return"Emergency Critical Care";case"pagi":return"Morning Patient Rounds";case"siang":return"Afternoon Clinical Care";case"sore":return"Evening Medical Service";default:return"General Outpatient Care"}},J=w=>{switch(w==null?void 0:w.toLowerCase()){case"malam":return"urgent";case"emergency":return"urgent";case"training":return"training";case"workshop":return"training";default:return"regular"}},ie=w=>({selesai:"Completed",completed:"Completed",aktif:"Aktif",active:"Aktif",berlangsung:"Aktif",upcoming:"Terjadwal",terjadwal:"Terjadwal",cuti:"Cuti",izin:"Izin",oncall:"OnCall"})[w==null?void 0:w.toLowerCase()]||"Terjadwal",Ae=()=>[{id:1,title:"Dokter Jaga",subtitle:"Emergency Critical Care",date:"1 Agustus 2025",full_date:"2025-08-01",day_name:"Jumat",time:"21:00 - 07:00",location:"IGD - Trauma Center",type:"urgent",difficulty:"easy",status:"available",status_jaga:"Aktif",description:"Siaga tinggi - malam weekend dengan tingkat emergensi tinggi",peran:"Dokter Jaga",employee_name:"dr. Ahmad Rizki, M.Kes",shift_template:{id:1,nama_shift:"Malam",jam_masuk:"21:00",jam_pulang:"07:00"}},{id:2,title:"Dokter Jaga",subtitle:"Morning Patient Rounds",date:"4 Agustus 2025",full_date:"2025-08-04",day_name:"Minggu",time:"07:00 - 14:00",location:"Ward 3A - Internal Medicine",type:"regular",difficulty:"easy",status:"available",status_jaga:"Terjadwal",description:"Visite rutin weekend dengan monitoring pasien rawat inap",peran:"Dokter Jaga",employee_name:(c==null?void 0:c.name)||"dr. Yaya Mulyana, M.Kes",shift_template:{id:2,nama_shift:"Pagi",jam_masuk:"07:00",jam_pulang:"14:00"}},{id:3,title:"Dokter Jaga",subtitle:"General Outpatient Care",date:"5 Agustus 2025",full_date:"2025-08-05",day_name:"Selasa",time:"08:00 - 15:00",location:"Outpatient Clinic 2",type:"regular",difficulty:"easy",status:"available",status_jaga:"Terjadwal",description:"Pelayanan rawat jalan rutin dengan jadwal reguler",peran:"Dokter Jaga",employee_name:"dr. Budi Santoso, M.Kes",shift_template:{id:3,nama_shift:"Pagi",jam_masuk:"08:00",jam_pulang:"15:00"}},{id:4,title:"Dokter Jaga",subtitle:"Intensive Care Unit",date:"7 Agustus 2025",full_date:"2025-08-07",day_name:"Kamis",time:"20:00 - 08:00",location:"ICU - Level 2",type:"urgent",difficulty:"easy",status:"available",status_jaga:"Aktif",description:"ICU monitoring 24/7 dengan pasien kritis",peran:"Dokter Jaga",employee_name:"dr. Sari Dewi, Sp.An",shift_template:{id:4,nama_shift:"Malam",jam_masuk:"20:00",jam_pulang:"08:00"}},{id:5,title:"Dokter Jaga",subtitle:"Evening Medical Service",date:"10 Agustus 2025",full_date:"2025-08-10",day_name:"Minggu",time:"16:00 - 21:00",location:"Conference Hall A",type:"regular",difficulty:"easy",status:"available",status_jaga:"Terjadwal",description:"Evening shift medical service",peran:"Dokter Jaga",employee_name:"dr. Rahman Ali, M.Kes",shift_template:{id:5,nama_shift:"Sore",jam_masuk:"16:00",jam_pulang:"21:00"}},{id:6,title:"Dokter Jaga",subtitle:"Emergency Night Shift",date:"12 Agustus 2025",full_date:"2025-08-12",day_name:"Selasa",time:"22:00 - 06:00",location:"IGD - Emergency Room",type:"urgent",difficulty:"easy",status:"available",status_jaga:"Aktif",description:"Jaga malam IGD dengan tingkat kesiapsiagaan tinggi",peran:"Dokter Jaga",employee_name:"dr. Maya Sari, M.Kes",shift_template:{id:6,nama_shift:"Malam",jam_masuk:"22:00",jam_pulang:"06:00"}}].filter(w=>{var Q;return((Q=w.shift_template)==null?void 0:Q.nama_shift)!=="Sore"});f.useEffect(()=>{const w=()=>{const Q=window.innerWidth,O=window.innerHeight;z(Q>=768),B(Q>O?"landscape":"portrait")};return w(),window.addEventListener("resize",w),window.addEventListener("orientationchange",w),()=>{window.removeEventListener("resize",w),window.removeEventListener("orientationchange",w)}},[]),f.useEffect(()=>{if(m.length>0&&T===8&&D===4&&E===96){xe.log("Calculating stats from missions as fallback"),U(m.length),_(m.filter(Q=>Q.status_jaga==="Completed").length),C(m.filter(Q=>Q.status_jaga==="Terjadwal").length);const w=m.reduce((Q,O)=>{if(O.shift_template){const ge=O.shift_template.jam_masuk.split(":"),ve=O.shift_template.jam_pulang.split(":"),De=parseInt(ge[0])*60+parseInt(ge[1]);let Oe=parseInt(ve[0])*60+parseInt(ve[1])-De;return Oe<0&&(Oe+=1440),Q+Oe/60}return Q+8},0);S(Math.round(w))}else m.length>0&&xe.log("Using API-provided schedule stats, skipping mission-based calculation")},[m,T,D,E]);const de=Math.ceil(m.length/te),Ue=(P-1)*te,K=Ue+te,We=m.slice(Ue,K),G=w=>{Y(w)},M=()=>{P>1&&Y(P-1)},H=()=>{P<de&&Y(P+1)},q=w=>w.difficulty==="legendary"?Ii:w.type==="urgent"?Mi:w.type==="special"?is:w.type==="training"?fn:w.subtitle.toLowerCase().includes("malam")?Ii:w.subtitle.toLowerCase().includes("pagi")?ha:mn,ne=w=>{switch(w.status_jaga){case"Aktif":return"from-green-600 to-emerald-600";case"OnCall":return"from-red-600 to-orange-600";case"Cuti":return"from-purple-600 to-pink-600";case"Izin":return"from-blue-600 to-cyan-600";default:return"from-indigo-600 to-blue-600"}},X=w=>{switch(w.status_jaga){case"Aktif":return"from-green-500/20 to-emerald-500/20";case"OnCall":return"from-red-500/20 to-orange-500/20";case"Cuti":return"from-purple-500/20 to-pink-500/20";case"Izin":return"from-blue-500/20 to-cyan-500/20";default:return"from-indigo-500/20 to-blue-500/20"}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:i.jsxs("div",{className:"w-full min-h-screen relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[i.jsx("div",{className:"absolute top-20 bg-blue-500 bg-opacity-5 rounded-full blur-3xl animate-pulse",style:{left:"10%",width:"30vw",maxWidth:"400px",height:"30vw",maxHeight:"400px"}}),i.jsx("div",{className:"absolute top-60 bg-purple-500 bg-opacity-5 rounded-full blur-2xl animate-bounce",style:{right:"5%",width:"25vw",maxWidth:"350px",height:"25vw",maxHeight:"350px"}}),i.jsx("div",{className:"absolute bottom-80 bg-pink-500 bg-opacity-5 rounded-full blur-3xl animate-pulse",style:{left:"15%",width:"28vw",maxWidth:"380px",height:"28vw",maxHeight:"380px"}})]}),i.jsxs("div",{className:"relative z-10 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 pt-8 pb-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx("h1",{className:`font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent
                ${se?"text-3xl md:text-4xl lg:text-5xl":"text-2xl sm:text-3xl"}
              `,children:"Medical Mission Central"}),i.jsx("button",{onClick:Ne,disabled:o,className:"ml-4 p-2 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 transition-all duration-300 disabled:opacity-50",title:"Refresh schedules",children:i.jsx(Qn,{className:`w-5 h-5 text-cyan-400 ${o?"animate-spin":""}`})})]}),i.jsx("p",{className:`text-purple-200 ${se?"text-lg md:text-xl":"text-base"}`,children:"Elite Doctor Duty Assignments"}),p&&i.jsx("div",{className:"flex items-center justify-center mt-4",children:i.jsxs("div",{className:"text-xs bg-red-600/20 hover:bg-red-600/40 border border-red-400/30 text-red-300 px-4 py-2 rounded-xl backdrop-blur-sm",children:["⚠️ ",p]})}),$>0&&i.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Last updated: ",new Date($).toLocaleTimeString()]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-4 border border-purple-400/20 hover:border-purple-400/40 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(It,{className:"w-5 h-5 text-purple-400"}),i.jsx(ss,{className:"w-4 h-4 text-purple-300/50"})]}),i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:y}),i.jsx("div",{className:"text-xs text-purple-300/80",children:"Total Missions"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-4 border border-green-400/20 hover:border-green-400/40 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(qr,{className:"w-5 h-5 text-green-400"}),i.jsx(hn,{className:"w-4 h-4 text-green-300/50"})]}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:T}),i.jsx("div",{className:"text-xs text-green-300/80",children:"Completed"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-4 border border-orange-400/20 hover:border-orange-400/40 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(is,{className:"w-5 h-5 text-orange-400"}),i.jsx(pa,{className:"w-4 h-4 text-orange-300/50"})]}),i.jsx("div",{className:"text-2xl font-bold text-orange-400",children:D}),i.jsx("div",{className:"text-xs text-orange-300/80",children:"Upcoming"})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-4 border border-blue-400/20 hover:border-blue-400/40 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(Mi,{className:"w-5 h-5 text-blue-400"}),i.jsx(pn,{className:"w-4 h-4 text-blue-300/50"})]}),i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:E}),i.jsx("div",{className:"text-xs text-blue-300/80",children:"Total Hours"})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-4 border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-semibold",children:"Mission Progress"}),i.jsxs("span",{className:"text-cyan-400 font-bold",children:[T," / ",y]})]}),i.jsx("div",{className:"bg-gray-800/50 rounded-full h-3 relative overflow-hidden",children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 rounded-full transition-all duration-1000 ease-out",style:{width:`${y>0?T/y*100:0}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]})]}),o&&i.jsx("div",{className:"relative z-10 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 py-12",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-8 border border-purple-400/20",children:[i.jsx(Qn,{className:"w-8 h-8 animate-spin text-purple-400 mx-auto mb-3"}),i.jsx("span",{className:"text-purple-300 text-center block",children:"Loading Mission Database..."})]})})}),!o&&i.jsxs("div",{className:"relative z-10 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 pb-32",children:[i.jsx("div",{className:`
              grid gap-6 md:gap-8
              ${se&&I==="landscape"?"lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3":"sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3"}
            `,children:We.map(w=>{var ve;const Q=q(w),O=ne(w),ge=X(w);return i.jsx("div",{className:"relative group cursor-default transform transition-all duration-300 hover:scale-[1.01]",children:i.jsxs("div",{className:`
                      relative bg-white/8 backdrop-blur-xl rounded-2xl overflow-hidden
                      border border-white/15 group-hover:border-white/25
                      transition-all duration-300 group-hover:bg-white/10
                      ${se?"p-4":"p-3"}
                    `,children:[i.jsx("div",{className:`
                        absolute inset-0 bg-gradient-to-br ${ge} opacity-0 
                        group-hover:opacity-30 transition-opacity duration-400
                      `}),i.jsxs("div",{className:"relative z-10 mb-3",children:[i.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[i.jsx("div",{className:`
                            bg-gradient-to-br ${O} rounded-xl flex items-center justify-center
                            shadow-sm transition-all duration-300
                            ${se?"w-10 h-10 p-2.5":"w-8 h-8 p-2"}
                          `,children:i.jsx(Q,{className:`text-white ${se?"w-5 h-5":"w-4 h-4"}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`font-semibold text-white mb-1 ${se?"text-base":"text-sm"}`,children:"Dokter Jaga"}),i.jsx("p",{className:`text-gray-300 font-medium ${se?"text-sm":"text-xs"}`,children:((ve=w.shift_template)==null?void 0:ve.nama_shift)||"Pagi"})]})]}),i.jsx("div",{className:`
                          bg-white/8 backdrop-blur-md rounded-xl border border-white/10
                          ${se?"p-3":"p-2.5"}
                        `,children:i.jsxs("div",{className:"text-center space-y-1",children:[i.jsx("div",{className:`text-gray-300 font-medium ${se?"text-sm":"text-xs"}`,children:new Date(w.full_date).toLocaleDateString("en-US",{month:"short",day:"2-digit"})}),i.jsx("div",{className:"text-gray-400 text-xs",children:w.peran}),i.jsx("div",{className:`text-white font-semibold ${se?"text-base":"text-sm"}`,children:w.time})]})})]})]})},w.id)})}),We.length===0&&i.jsx("div",{className:"text-center py-12",children:i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-8 border border-white/10 max-w-md mx-auto",children:[i.jsx(Ii,{className:"h-16 w-16 mx-auto mb-4 text-purple-400"}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Schedules"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"No medical schedules available for this page"})]})}),de>1&&i.jsxs("div",{className:"flex flex-col items-center mt-10 space-y-4",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-4 border border-white/10 shadow-2xl shadow-purple-500/10",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:M,disabled:P===1,className:`
                        group relative flex items-center justify-center w-12 h-12 rounded-xl
                        transition-all duration-300 transform font-medium
                        ${P===1?"bg-white/5 text-gray-500 cursor-not-allowed opacity-50":"bg-gradient-to-br from-cyan-500/70 via-purple-500/70 to-pink-500/70 text-white hover:from-cyan-400 hover:via-purple-400 hover:to-pink-400 hover:scale-110 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95"}
                      `,"aria-label":"Previous page",children:[i.jsx(dn,{className:"w-5 h-5 rotate-180 transition-transform duration-300 group-hover:-translate-x-0.5"}),P!==1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-purple-500/20 to-pink-500/20 rounded-xl blur opacity-0 group-hover:opacity-60 transition-opacity duration-300 -z-10 scale-150"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:de},(w,Q)=>Q+1).map(w=>i.jsxs("button",{onClick:()=>G(w),className:`
                            group relative w-12 h-12 rounded-xl font-bold text-sm
                            transition-all duration-300 transform overflow-hidden
                            focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:ring-offset-2 focus:ring-offset-transparent
                            ${P===w?"bg-gradient-to-br from-cyan-500 via-purple-500 to-pink-500 text-white scale-110 shadow-xl shadow-purple-500/40 border border-white/20":"bg-white/5 text-purple-200 hover:bg-white/10 hover:text-white hover:scale-105 hover:shadow-lg hover:shadow-white/10 border border-white/10 hover:border-white/20"}
                          `,"aria-label":`Go to page ${w}`,"aria-current":P===w?"page":void 0,children:[P===w&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-white/10 to-transparent animate-pulse rounded-xl"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/30 via-purple-500/30 to-pink-500/30 rounded-xl blur opacity-60 -z-10 scale-150"})]}),P!==w&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"}),i.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"})]}),i.jsx("span",{className:"relative z-10 transition-all duration-300 group-hover:scale-110",children:w})]},w))}),i.jsxs("button",{onClick:H,disabled:P===de,className:`
                        group relative flex items-center justify-center w-12 h-12 rounded-xl
                        transition-all duration-300 transform font-medium
                        ${P===de?"bg-white/5 text-gray-500 cursor-not-allowed opacity-50":"bg-gradient-to-br from-cyan-500/70 via-purple-500/70 to-pink-500/70 text-white hover:from-cyan-400 hover:via-purple-400 hover:to-pink-400 hover:scale-110 hover:shadow-xl hover:shadow-purple-500/30 active:scale-95"}
                      `,"aria-label":"Next page",children:[i.jsx(dn,{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-0.5"}),P!==de&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/20 via-purple-500/20 to-pink-500/20 rounded-xl blur opacity-0 group-hover:opacity-60 transition-opacity duration-300 -z-10 scale-150"})]})]})]})}),i.jsx("div",{className:"bg-white/5 backdrop-blur-xl rounded-full px-5 py-2.5 border border-white/10 shadow-lg",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsxs("span",{className:"text-purple-200 text-sm font-medium tracking-wide",children:["Medical Mission ",Ue+1,"-",Math.min(K,m.length)," of ",m.length]}),i.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-pulse"})]})})]})]})]})})}var xt;let no=(xt=class{static getInstance(){return xt.instance||(xt.instance=new xt),xt.instance}getAuthHeaders(){const r={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},o=this.getToken();return o&&(r.Authorization=`Bearer ${o}`),r}getToken(){const r=localStorage.getItem("dokterku_auth_token")||sessionStorage.getItem("dokterku_auth_token")||localStorage.getItem("api_token")||sessionStorage.getItem("api_token");if(r&&r.trim())return r.trim();const o=this.extractTokenFromMeta();return o?(this.setToken(o),console.log("✅ Token extracted and stored from meta tag"),o):null}extractTokenFromMeta(){try{const r=document.querySelector('meta[name="api-token"]');if(!r)return console.warn("⚠️ No api-token meta tag found"),null;const o=r.getAttribute("content");if(!o||!o.trim())return console.warn("⚠️ api-token meta tag is empty"),null;const d=o.trim();return d.length<10?(console.warn("⚠️ api-token appears to be too short:",d.substring(0,5)+"..."),null):(console.log("✅ Valid token extracted from meta tag:",d.substring(0,10)+"..."),d)}catch(r){return console.error("🔥 Error extracting token from meta tag:",r),null}}setToken(r,o=!0){o?(localStorage.setItem("dokterku_auth_token",r),localStorage.setItem("api_token",r)):(sessionStorage.setItem("dokterku_auth_token",r),sessionStorage.setItem("api_token",r))}clearToken(){localStorage.removeItem("dokterku_auth_token"),sessionStorage.removeItem("dokterku_auth_token"),localStorage.removeItem("api_token"),sessionStorage.removeItem("api_token")}async isAuthenticated(){try{return this.getToken()?(await this.makeRequest("/api/v2/auth/me")).ok?!0:(await this.makeRequest("/api/user")).ok:!1}catch{return!1}}async login(r,o,d){var p,u,m;try{const b=await fetch("/api/v2/auth/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({login:r,password:o,device_id:d||`web-${Date.now()}`,device_name:"Web Browser",client_type:"web_app",device_type:"desktop",platform:"web"})}),y=await b.json();return b.ok&&y.success&&((u=(p=y.data)==null?void 0:p.authentication)!=null&&u.token)?(this.setToken(y.data.authentication.token),{success:!0,data:y.data}):b.ok&&y.success&&((m=y.data)!=null&&m.token)?(this.setToken(y.data.token),{success:!0,data:y.data}):{success:!1,error:y.message||"Login failed"}}catch(b){return console.error("Login error:",b),{success:!1,error:"Network error during login"}}}async logout(){try{await this.makeRequest("/api/v2/auth/logout",{method:"POST"})}catch{}finally{this.clearToken()}}async makeRequest(r,o={}){const d={...this.getAuthHeaders(),...o.headers};return fetch(r,{...o,headers:d,credentials:"include"})}async makeJsonRequest(r,o={},d=0){try{const u=await this.makeRequest(r,o);if(!u.ok){if(u.status===401&&d<2){console.log("🔄 401 Unauthorized - attempting token refresh and retry"),this.clearToken();const U=this.extractTokenFromMeta();if(U)return this.setToken(U),console.log("✅ Fresh token extracted from meta tag, retrying request"),this.makeJsonRequest(r,o,d+1);if(window.location.pathname.includes("/dokter"))throw console.log("🚨 No valid token found, redirecting to login"),window.location.href="/login?redirect="+encodeURIComponent(window.location.pathname),new Error("Authentication required - redirecting to login")}let m={};try{m=await u.json()}catch{m={message:`HTTP ${u.status}: ${u.statusText}`}}let b=m.message||m.error||`Request failed: ${u.status}`;m.code&&(b=`${m.code}: ${b}`),console.error("🔥 API Request failed:",{url:r,status:u.status,statusText:u.statusText,error:b,errorCode:m.code,errorDetails:m,retryCount:d});const y=new Error(b);throw y.code=m.code,y.details=m,y}return u.json()}catch(u){if(d<2&&this.isRetryableError(u))return console.log("🔄 Network error - retrying request"),await this.delay(1e3*(d+1)),this.makeJsonRequest(r,o,d+1);throw u}}isRetryableError(r){var o;return!!(r instanceof TypeError&&r.message.includes("fetch")||(o=r.message)!=null&&o.includes("timeout"))}delay(r){return new Promise(o=>setTimeout(o,r))}initializeFromMetaTag(){if(this.getToken())console.log("🔧 UnifiedAuth initialized with existing stored token");else{const r=this.extractTokenFromMeta();r?(this.setToken(r),console.log("🔧 UnifiedAuth initialized with meta tag token")):console.warn("⚠️ No token found in storage or meta tags during initialization")}}},ke(xt,"instance"),xt),Vn=null;const Fe=()=>(Vn||(Vn=no.getInstance()),Vn);if(typeof document<"u"&&typeof window<"u"){const c=()=>{try{const r=Fe();if(r&&typeof r.initializeFromMetaTag=="function")r.initializeFromMetaTag(),console.log("✅ UnifiedAuth initialized successfully");else throw console.warn("⚠️ UnifiedAuth instance not ready, deferring initialization"),new Error("UnifiedAuth instance not ready")}catch(r){console.warn("⚠️ UnifiedAuth initialization deferred due to error:",r);let o=0;const d=3,p=()=>{o++;const u=Math.min(100*Math.pow(2,o-1),1e3);setTimeout(()=>{try{const m=Fe();m&&typeof m.initializeFromMetaTag=="function"?(m.initializeFromMetaTag(),console.log(`✅ UnifiedAuth initialized successfully on retry ${o}`)):o<d?p():console.error("❌ UnifiedAuth initialization failed after all retries")}catch(m){o<d?(console.warn(`⚠️ UnifiedAuth retry ${o} failed, trying again...`,m),p()):console.error("❌ UnifiedAuth initialization failed after all retries:",m)}},u)};p()}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):setTimeout(c,0)}else console.warn("⚠️ Browser environment not detected - UnifiedAuth initialization skipped");class so{async getCurrentUser(){try{const r=await Fe().makeJsonRequest("/api/v2/auth/me");if(!r.success)throw new Error("Failed to fetch user data");return r.data}catch(r){throw console.error("Error fetching current user:",r),r}}async getDashboard(){try{const r=await Fe().makeJsonRequest("/api/v2/dashboards/dokter");if(!r.success)throw new Error("Failed to fetch dashboard data");return r.data}catch(r){throw console.error("Error fetching dashboard data:",r),r}}async getJaspel(){return(await Fe().makeJsonRequest("/api/v2/dashboards/dokter/jaspel")).data}async getAttendanceStatus(){return(await Fe().makeJsonRequest("/api/v2/dashboards/dokter/attendance/status")).data}async getSchedule(){return(await Fe().makeJsonRequest("/api/v2/dashboards/dokter/jadwal-jaga")).data}async getCurrentSchedule(){try{const r=await Fe().makeJsonRequest("/api/v2/jadwal-jaga/current");return r.data||r}catch(r){throw console.error("Error fetching current schedule:",r),r.message.includes("404")?new Error("No active schedule found for today"):r.message.includes("401")||r.message.includes("Unauthorized")?new Error("Authentication required. Please login again."):r}}async getTodaySchedule(r){const o=r?`?date=${r}`:"";return(await Fe().makeJsonRequest(`/api/v2/jadwal-jaga/today${o}`)).data}async getWeeklySchedule(r){const o=r?`?week_start=${r}`:"";return(await Fe().makeJsonRequest(`/api/v2/jadwal-jaga/week${o}`)).data}async validateCheckin(r,o,d,p){try{const u=await Fe().makeJsonRequest("/api/v2/jadwal-jaga/validate-checkin",{method:"POST",body:JSON.stringify({latitude:r,longitude:o,accuracy:d||50,date:p||new Date().toISOString().split("T")[0]})});return u.data||u}catch(u){if(console.error("Error validating check-in:",u),u.message){if(u.message.includes("SHIFT_NOT_ALLOWED")||u.message.includes("shift")&&u.message.includes("allowed"))throw new Error("❌ Shift Anda tidak sesuai dengan lokasi kerja yang dikonfigurasi. Silakan hubungi administrator untuk penyesuaian jadwal.");if(u.message.includes("work_location"))throw new Error("📍 Lokasi kerja belum dikonfigurasi. Silakan hubungi administrator.");if(u.message.includes("radius")||u.message.includes("distance"))throw new Error("📏 Anda berada di luar radius lokasi kerja yang diizinkan.");if(u.message.includes("schedule"))throw new Error("📅 Jadwal kerja tidak ditemukan untuk hari ini.");if(u.message.includes("401")||u.message.includes("Unauthorized"))throw new Error("🔐 Sesi telah berakhir. Silakan login kembali.");if(u.message.includes("time")||u.message.includes("window"))throw new Error("⏰ Check-in hanya dapat dilakukan pada jam kerja yang telah ditentukan.")}throw u}}async submitGPSDebugData(r){try{const o=await Fe().makeJsonRequest("/api/v2/gps/debug",{method:"POST",body:JSON.stringify(r)});return o.data||o}catch(o){throw console.error("Error submitting GPS debug data:",o),o}}async getGPSDebugHistory(r=50){try{const o=await Fe().makeJsonRequest(`/api/v2/gps/debug/history?limit=${r}`);return o.data||o}catch(o){throw console.error("Error fetching GPS debug history:",o),o}}async validateCheckinWithDebug(r){try{const o=await Fe().makeJsonRequest("/api/v2/jadwal-jaga/validate-checkin-debug",{method:"POST",body:JSON.stringify(r)});return o.data||o}catch(o){if(console.error("Error validating check-in with debug:",o),o.message){if(o.message.includes("distance"))throw new Error(`Distance validation failed: ${o.message}. Current coordinates: ${r.latitude}, ${r.longitude}`);if(o.message.includes("vpn")||o.message.includes("proxy"))throw new Error("VPN/Proxy detected. Please disable VPN and try again with your actual location.");if(o.message.includes("accuracy"))throw new Error(`GPS accuracy too low (±${r.accuracy}m). Please move to an area with better GPS signal.`);if(o.message.includes("work_location"))throw new Error("Work location not configured. Please contact administrator.")}throw o}}async getWorkLocationForGPS(){try{const r=await Fe().makeJsonRequest("/api/v2/work-location/current");return r.data||r}catch(r){throw console.error("Error fetching work location for GPS:",r),r}}}const ln=new so;function ba(c,r){const o=f.useRef(r);f.useEffect(function(){r!==o.current&&c.attributionControl!=null&&(o.current!=null&&c.attributionControl.removeAttribution(o.current),r!=null&&c.attributionControl.addAttribution(r)),o.current=r},[c,r])}const ao=1;function ro(c){return Object.freeze({__version:ao,map:c})}function oo(c,r){return Object.freeze({...c,...r})}const _a=f.createContext(null),ya=_a.Provider;function cs(){const c=f.useContext(_a);if(c==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return c}function lo(c){function r(o,d){const{instance:p,context:u}=c(o).current;return f.useImperativeHandle(d,()=>p),o.children==null?null:qe.createElement(ya,{value:u},o.children)}return f.forwardRef(r)}function co(c){function r(o,d){const[p,u]=f.useState(!1),{instance:m}=c(o,u).current;f.useImperativeHandle(d,()=>m),f.useEffect(function(){p&&m.update()},[m,p,o.children]);const b=m._contentNode;return b?Sr.createPortal(o.children,b):null}return f.forwardRef(r)}function ho(c){function r(o,d){const{instance:p}=c(o).current;return f.useImperativeHandle(d,()=>p),null}return f.forwardRef(r)}function wa(c,r){const o=f.useRef();f.useEffect(function(){return r!=null&&c.instance.on(r),o.current=r,function(){o.current!=null&&c.instance.off(o.current),o.current=null}},[c,r])}function ds(c,r){const o=c.pane??r.pane;return o?{...c,pane:o}:c}function uo(c,r){return function(d,p){const u=cs(),m=c(ds(d,u),u);return ba(u.map,d.attribution),wa(m.current,d.eventHandlers),r(m.current,u,d,p),m}}var Li={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var mo=Li.exports,ta;function po(){return ta||(ta=1,function(c,r){(function(o,d){d(r)})(mo,function(o){var d="1.9.4";function p(e){var t,n,s,a;for(n=1,s=arguments.length;n<s;n++){a=arguments[n];for(t in a)e[t]=a[t]}return e}var u=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function m(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var s=n.call(arguments,2);return function(){return e.apply(t,s.length?s.concat(n.call(arguments)):arguments)}}var b=0;function y(e){return"_leaflet_id"in e||(e._leaflet_id=++b),e._leaflet_id}function U(e,t,n){var s,a,l,h;return h=function(){s=!1,a&&(l.apply(n,a),a=!1)},l=function(){s?a=arguments:(e.apply(n,arguments),setTimeout(h,t),s=!0)},l}function T(e,t,n){var s=t[1],a=t[0],l=s-a;return e===s&&n?e:((e-a)%l+l)%l+a}function _(){return!1}function D(e,t){if(t===!1)return e;var n=Math.pow(10,t===void 0?6:t);return Math.round(e*n)/n}function C(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function E(e){return C(e).split(/\s+/)}function S(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?u(e.options):{});for(var n in t)e.options[n]=t[n];return e.options}function se(e,t,n){var s=[];for(var a in e)s.push(encodeURIComponent(n?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(!t||t.indexOf("?")===-1?"?":"&")+s.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function I(e,t){return e.replace(z,function(n,s){var a=t[s];if(a===void 0)throw new Error("No value provided for variable "+n);return typeof a=="function"&&(a=a(t)),a})}var B=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function $(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var ce="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Y=0;function te(e){var t=+new Date,n=Math.max(0,16-(t-Y));return Y=t+n,window.setTimeout(e,n)}var je=window.requestAnimationFrame||P("RequestAnimationFrame")||te,Ne=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function he(e,t,n){if(n&&je===te)e.call(t);else return je.call(window,m(e,t))}function ae(e){e&&Ne.call(window,e)}var J={__proto__:null,extend:p,create:u,bind:m,get lastId(){return b},stamp:y,throttle:U,wrapNum:T,falseFn:_,formatNum:D,trim:C,splitWords:E,setOptions:S,getParamString:se,template:I,isArray:B,indexOf:$,emptyImageUrl:ce,requestFn:je,cancelFn:Ne,requestAnimFrame:he,cancelAnimFrame:ae};function ie(){}ie.extend=function(e){var t=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,s=u(n);s.constructor=t,t.prototype=s;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(t[a]=this[a]);return e.statics&&p(t,e.statics),e.includes&&(Ae(e.includes),p.apply(null,[s].concat(e.includes))),p(s,e),delete s.statics,delete s.includes,s.options&&(s.options=n.options?u(n.options):{},p(s.options,e.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var l=0,h=s._initHooks.length;l<h;l++)s._initHooks[l].call(this)}},t},ie.include=function(e){var t=this.prototype.options;return p(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},ie.mergeOptions=function(e){return p(this.prototype.options,e),this},ie.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Ae(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=B(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var de={on:function(e,t,n){if(typeof e=="object")for(var s in e)this._on(s,e[s],t);else{e=E(e);for(var a=0,l=e.length;a<l;a++)this._on(e[a],t,n)}return this},off:function(e,t,n){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var s in e)this._off(s,e[s],t);else{e=E(e);for(var a=arguments.length===1,l=0,h=e.length;l<h;l++)a?this._off(e[l]):this._off(e[l],t,n)}return this},_on:function(e,t,n,s){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,n)===!1){n===this&&(n=void 0);var a={fn:t,ctx:n};s&&(a.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(a)}},_off:function(e,t,n){var s,a,l;if(this._events&&(s=this._events[e],!!s)){if(arguments.length===1){if(this._firingCount)for(a=0,l=s.length;a<l;a++)s[a].fn=_;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var h=this._listens(e,t,n);if(h!==!1){var g=s[h];this._firingCount&&(g.fn=_,this._events[e]=s=s.slice()),s.splice(h,1)}}},fire:function(e,t,n){if(!this.listens(e,n))return this;var s=p({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var l=0,h=a.length;l<h;l++){var g=a[l],v=g.fn;g.once&&this.off(e,v,g.ctx),v.call(g.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(e,t,n,s){typeof e!="string"&&console.warn('"string" type argument expected');var a=t;typeof t!="function"&&(s=!!t,a=void 0,n=void 0);var l=this._events&&this._events[e];if(l&&l.length&&this._listens(e,a,n)!==!1)return!0;if(s){for(var h in this._eventParents)if(this._eventParents[h].listens(e,t,n,s))return!0}return!1},_listens:function(e,t,n){if(!this._events)return!1;var s=this._events[e]||[];if(!t)return!!s.length;n===this&&(n=void 0);for(var a=0,l=s.length;a<l;a++)if(s[a].fn===t&&s[a].ctx===n)return a;return!1},once:function(e,t,n){if(typeof e=="object")for(var s in e)this._on(s,e[s],t,!0);else{e=E(e);for(var a=0,l=e.length;a<l;a++)this._on(e[a],t,n,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[y(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[y(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,p({layer:e.target,propagatedFrom:e.target},e),!0)}};de.addEventListener=de.on,de.removeEventListener=de.clearAllEventListeners=de.off,de.addOneTimeEventListener=de.once,de.fireEvent=de.fire,de.hasEventListeners=de.listens;var Ue=ie.extend(de);function K(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var We=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(e){return this.clone()._add(G(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(G(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new K(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new K(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=We(this.x),this.y=We(this.y),this},distanceTo:function(e){e=G(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=G(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=G(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+D(this.x)+", "+D(this.y)+")"}};function G(e,t,n){return e instanceof K?e:B(e)?new K(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new K(e.x,e.y):new K(e,t,n)}function M(e,t){if(e)for(var n=t?[e,t]:e,s=0,a=n.length;s<a;s++)this.extend(n[s])}M.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof K||typeof e[0]=="number"||"x"in e)t=n=G(e);else if(e=H(e),t=e.min,n=e.max,!t||!n)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=n.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(e){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return typeof e[0]=="number"||e instanceof K?e=G(e):e=H(e),e instanceof M?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=H(e);var t=this.min,n=this.max,s=e.min,a=e.max,l=a.x>=t.x&&s.x<=n.x,h=a.y>=t.y&&s.y<=n.y;return l&&h},overlaps:function(e){e=H(e);var t=this.min,n=this.max,s=e.min,a=e.max,l=a.x>t.x&&s.x<n.x,h=a.y>t.y&&s.y<n.y;return l&&h},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,n=this.max,s=Math.abs(t.x-n.x)*e,a=Math.abs(t.y-n.y)*e;return H(G(t.x-s,t.y-a),G(n.x+s,n.y+a))},equals:function(e){return e?(e=H(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function H(e,t){return!e||e instanceof M?e:new M(e,t)}function q(e,t){if(e)for(var n=t?[e,t]:e,s=0,a=n.length;s<a;s++)this.extend(n[s])}q.prototype={extend:function(e){var t=this._southWest,n=this._northEast,s,a;if(e instanceof X)s=e,a=e;else if(e instanceof q){if(s=e._southWest,a=e._northEast,!s||!a)return this}else return e?this.extend(w(e)||ne(e)):this;return!t&&!n?(this._southWest=new X(s.lat,s.lng),this._northEast=new X(a.lat,a.lng)):(t.lat=Math.min(s.lat,t.lat),t.lng=Math.min(s.lng,t.lng),n.lat=Math.max(a.lat,n.lat),n.lng=Math.max(a.lng,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,s=Math.abs(t.lat-n.lat)*e,a=Math.abs(t.lng-n.lng)*e;return new q(new X(t.lat-s,t.lng-a),new X(n.lat+s,n.lng+a))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof X||"lat"in e?e=w(e):e=ne(e);var t=this._southWest,n=this._northEast,s,a;return e instanceof q?(s=e.getSouthWest(),a=e.getNorthEast()):s=a=e,s.lat>=t.lat&&a.lat<=n.lat&&s.lng>=t.lng&&a.lng<=n.lng},intersects:function(e){e=ne(e);var t=this._southWest,n=this._northEast,s=e.getSouthWest(),a=e.getNorthEast(),l=a.lat>=t.lat&&s.lat<=n.lat,h=a.lng>=t.lng&&s.lng<=n.lng;return l&&h},overlaps:function(e){e=ne(e);var t=this._southWest,n=this._northEast,s=e.getSouthWest(),a=e.getNorthEast(),l=a.lat>t.lat&&s.lat<n.lat,h=a.lng>t.lng&&s.lng<n.lng;return l&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=ne(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ne(e,t){return e instanceof q?e:new q(e,t)}function X(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}X.prototype={equals:function(e,t){if(!e)return!1;e=w(e);var n=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+D(this.lat,e)+", "+D(this.lng,e)+")"},distanceTo:function(e){return O.distance(this,w(e))},wrap:function(){return O.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return ne([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function w(e,t,n){return e instanceof X?e:B(e)&&typeof e[0]!="object"?e.length===3?new X(e[0],e[1],e[2]):e.length===2?new X(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new X(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new X(e,t,n)}var Q={latLngToPoint:function(e,t){var n=this.projection.project(e),s=this.scale(t);return this.transformation._transform(n,s)},pointToLatLng:function(e,t){var n=this.scale(t),s=this.transformation.untransform(e,n);return this.projection.unproject(s)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),s=this.transformation.transform(t.min,n),a=this.transformation.transform(t.max,n);return new M(s,a)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?T(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?T(e.lat,this.wrapLat,!0):e.lat,s=e.alt;return new X(n,t,s)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),s=t.lat-n.lat,a=t.lng-n.lng;if(s===0&&a===0)return e;var l=e.getSouthWest(),h=e.getNorthEast(),g=new X(l.lat-s,l.lng-a),v=new X(h.lat-s,h.lng-a);return new q(g,v)}},O=p({},Q,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,s=e.lat*n,a=t.lat*n,l=Math.sin((t.lat-e.lat)*n/2),h=Math.sin((t.lng-e.lng)*n/2),g=l*l+Math.cos(s)*Math.cos(a)*h*h,v=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return this.R*v}}),ge=6378137,ve={R:ge,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,e.lat),-n),a=Math.sin(s*t);return new K(this.R*e.lng*t,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(e){var t=180/Math.PI;return new X((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=ge*Math.PI;return new M([-e,-e],[e,e])}()};function De(e,t,n,s){if(B(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=s}De.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new K((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function ye(e,t,n,s){return new De(e,t,n,s)}var Oe=p({},O,{code:"EPSG:3857",projection:ve,transformation:function(){var e=.5/(Math.PI*ve.R);return ye(e,.5,-e,.5)}()}),bt=p({},Oe,{code:"EPSG:900913"});function st(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function k(e,t){var n="",s,a,l,h,g,v;for(s=0,l=e.length;s<l;s++){for(g=e[s],a=0,h=g.length;a<h;a++)v=g[a],n+=(a?"L":"M")+v.x+" "+v.y;n+=t?F.svg?"z":"x":""}return n||"M0 0"}var Te=document.documentElement.style,$e="ActiveXObject"in window,He=$e&&!document.addEventListener,Me="msLaunchUri"in navigator&&!("documentMode"in document),ze=et("webkit"),W=et("android"),Qe=et("android 2")||et("android 3"),_t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Tt=W&&et("Google")&&_t<537&&!("AudioNode"in window),Re=!!window.opera,Pe=!Me&&et("chrome"),Ve=et("gecko")&&!ze&&!Re&&!$e,Ct=!Pe&&et("safari"),Qt=et("phantom"),Di="OTransition"in Te,Dt=navigator.platform.indexOf("Win")===0,Lt=$e&&"transition"in Te,di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qe,at="MozPerspective"in Te,gn=!window.L_DISABLE_3D&&(Lt||di||at)&&!Di&&!Qt,zt=typeof orientation<"u"||et("mobile"),zi=zt&&ze,xn=zt&&di,Ot=!window.PointerEvent&&window.MSPointerEvent,yt=!!(window.PointerEvent||Ot),ei="ontouchstart"in window||!!window.TouchEvent,hi=!window.L_NO_TOUCH&&(ei||yt),wt=zt&&Re,vn=zt&&Ve,ti=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Oi=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",_,t),window.removeEventListener("testPassiveEventSupport",_,t)}catch{}return e}(),Ri=function(){return!!document.createElement("canvas").getContext}(),ui=!!(document.createElementNS&&st("svg").createSVGRect),bn=!!ui&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_n=!ui&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),Bi=navigator.platform.indexOf("Mac")===0,yn=navigator.platform.indexOf("Linux")===0;function et(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var F={ie:$e,ielt9:He,edge:Me,webkit:ze,android:W,android23:Qe,androidStock:Tt,opera:Re,chrome:Pe,gecko:Ve,safari:Ct,phantom:Qt,opera12:Di,win:Dt,ie3d:Lt,webkit3d:di,gecko3d:at,any3d:gn,mobile:zt,mobileWebkit:zi,mobileWebkit3d:xn,msPointer:Ot,pointer:yt,touch:hi,touchNative:ei,mobileOpera:wt,mobileGecko:vn,retina:ti,passiveEvents:Oi,canvas:Ri,svg:ui,vml:_n,inlineSvg:bn,mac:Bi,linux:yn},$i=F.msPointer?"MSPointerDown":"pointerdown",Zi=F.msPointer?"MSPointerMove":"pointermove",Hi=F.msPointer?"MSPointerUp":"pointerup",Fi=F.msPointer?"MSPointerCancel":"pointercancel",mi={touchstart:$i,touchmove:Zi,touchend:Hi,touchcancel:Fi},Gi={touchstart:jn,touchmove:$t,touchend:$t,touchcancel:$t},Rt={},Bt=!1;function ii(e,t,n){return t==="touchstart"&&kn(),Gi[t]?(n=Gi[t].bind(this,n),e.addEventListener(mi[t],n,!1),n):(console.warn("wrong event specified:",t),_)}function pi(e,t,n){if(!mi[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(mi[t],n,!1)}function Ui(e){Rt[e.pointerId]=e}function wn(e){Rt[e.pointerId]&&(Rt[e.pointerId]=e)}function ni(e){delete Rt[e.pointerId]}function kn(){Bt||(document.addEventListener($i,Ui,!0),document.addEventListener(Zi,wn,!0),document.addEventListener(Hi,ni,!0),document.addEventListener(Fi,ni,!0),Bt=!0)}function $t(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var n in Rt)t.touches.push(Rt[n]);t.changedTouches=[t],e(t)}}function jn(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ze(t),$t(e,t)}function Nn(e){var t={},n,s;for(s in e)n=e[s],t[s]=n&&n.bind?n.bind(e):n;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var Pn=200;function Sn(e,t){e.addEventListener("dblclick",t);var n=0,s;function a(l){if(l.detail!==1){s=l.detail;return}if(!(l.pointerType==="mouse"||l.sourceCapabilities&&!l.sourceCapabilities.firesTouchEvents)){var h=fs(l);if(!(h.some(function(v){return v instanceof HTMLLabelElement&&v.attributes.for})&&!h.some(function(v){return v instanceof HTMLInputElement||v instanceof HTMLSelectElement}))){var g=Date.now();g-n<=Pn?(s++,s===2&&t(Nn(l))):s=1,n=g}}}return e.addEventListener("click",a),{dblclick:t,simDblclick:a}}function Tn(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var fi=kt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zt=kt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gi=Zt==="webkitTransition"||Zt==="OTransition"?Zt+"End":"transitionend";function xi(e){return typeof e=="string"?document.getElementById(e):e}function x(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||n==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(e,null);n=s?s[t]:null}return n==="auto"?null:n}function j(e,t,n){var s=document.createElement(e);return s.className=t||"",n&&n.appendChild(s),s}function A(e){var t=e.parentNode;t&&t.removeChild(e)}function le(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ue(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function be(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Ee(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=dt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function Z(e,t){if(e.classList!==void 0)for(var n=E(t),s=0,a=n.length;s<a;s++)e.classList.add(n[s]);else if(!Ee(e,t)){var l=dt(e);ct(e,(l?l+" ":"")+t)}}function pe(e,t){e.classList!==void 0?e.classList.remove(t):ct(e,C((" "+dt(e)+" ").replace(" "+t+" "," ")))}function ct(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function dt(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Ce(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&ht(e,t)}function ht(e,t){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(s)}catch{if(t===1)return}t=Math.round(t*100),n?(n.Enabled=t!==100,n.Opacity=t):e.style.filter+=" progid:"+s+"(opacity="+t+")"}function kt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function ut(e,t,n){var s=t||new K(0,0);e.style[fi]=(F.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function Le(e,t){e._leaflet_pos=t,F.any3d?ut(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function mt(e){return e._leaflet_pos||new K(0,0)}var re,ee,Je;if("onselectstart"in document)re=function(){oe(window,"selectstart",Ze)},ee=function(){we(window,"selectstart",Ze)};else{var Ht=kt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);re=function(){if(Ht){var e=document.documentElement.style;Je=e[Ht],e[Ht]="none"}},ee=function(){Ht&&(document.documentElement.style[Ht]=Je,Je=void 0)}}function vi(){oe(window,"dragstart",Ze)}function bi(){we(window,"dragstart",Ze)}var Wi,Cn;function Ln(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Ji(),Wi=e,Cn=e.style.outlineStyle,e.style.outlineStyle="none",oe(window,"keydown",Ji))}function Ji(){Wi&&(Wi.style.outlineStyle=Cn,Wi=void 0,Cn=void 0,we(window,"keydown",Ji))}function ms(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Mn(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var La={__proto__:null,TRANSFORM:fi,TRANSITION:Zt,TRANSITION_END:gi,get:xi,getStyle:x,create:j,remove:A,empty:le,toFront:ue,toBack:be,hasClass:Ee,addClass:Z,removeClass:pe,setClass:ct,getClass:dt,setOpacity:Ce,testProp:kt,setTransform:ut,setPosition:Le,getPosition:mt,get disableTextSelection(){return re},get enableTextSelection(){return ee},disableImageDrag:vi,enableImageDrag:bi,preventOutline:Ln,restoreOutline:Ji,getSizedParentNode:ms,getScale:Mn};function oe(e,t,n,s){if(t&&typeof t=="object")for(var a in t)In(e,a,t[a],n);else{t=E(t);for(var l=0,h=t.length;l<h;l++)In(e,t[l],n,s)}return this}var pt="_leaflet_events";function we(e,t,n,s){if(arguments.length===1)ps(e),delete e[pt];else if(t&&typeof t=="object")for(var a in t)An(e,a,t[a],n);else if(t=E(t),arguments.length===2)ps(e,function(g){return $(t,g)!==-1});else for(var l=0,h=t.length;l<h;l++)An(e,t[l],n,s);return this}function ps(e,t){for(var n in e[pt]){var s=n.split(/\d/)[0];(!t||t(s))&&An(e,s,null,null,n)}}var En={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function In(e,t,n,s){var a=t+y(n)+(s?"_"+y(s):"");if(e[pt]&&e[pt][a])return this;var l=function(g){return n.call(s||e,g||window.event)},h=l;!F.touchNative&&F.pointer&&t.indexOf("touch")===0?l=ii(e,t,l):F.touch&&t==="dblclick"?l=Sn(e,l):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(En[t]||t,l,F.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(l=function(g){g=g||window.event,zn(e,g)&&h(g)},e.addEventListener(En[t],l,!1)):e.addEventListener(t,h,!1):e.attachEvent("on"+t,l),e[pt]=e[pt]||{},e[pt][a]=l}function An(e,t,n,s,a){a=a||t+y(n)+(s?"_"+y(s):"");var l=e[pt]&&e[pt][a];if(!l)return this;!F.touchNative&&F.pointer&&t.indexOf("touch")===0?pi(e,t,l):F.touch&&t==="dblclick"?Tn(e,l):"removeEventListener"in e?e.removeEventListener(En[t]||t,l,!1):e.detachEvent("on"+t,l),e[pt][a]=null}function Ft(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Dn(e){return In(e,"wheel",Ft),this}function _i(e){return oe(e,"mousedown touchstart dblclick contextmenu",Ft),e._leaflet_disable_click=!0,this}function Ze(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gt(e){return Ze(e),Ft(e),this}function fs(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function gs(e,t){if(!t)return new K(e.clientX,e.clientY);var n=Mn(t),s=n.boundingClientRect;return new K((e.clientX-s.left)/n.x-t.clientLeft,(e.clientY-s.top)/n.y-t.clientTop)}var Ma=F.linux&&F.chrome?window.devicePixelRatio:F.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xs(e){return F.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Ma:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function zn(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var Ea={__proto__:null,on:oe,off:we,stopPropagation:Ft,disableScrollPropagation:Dn,disableClickPropagation:_i,preventDefault:Ze,stop:Gt,getPropagationPath:fs,getMousePosition:gs,getWheelDelta:xs,isExternalTarget:zn,addListener:oe,removeListener:we},vs=Ue.extend({run:function(e,t,n,s){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=mt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=he(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Le(this._el,n),this.fire("step")},_complete:function(){ae(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),fe=Ue.extend({options:{crs:Oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=S(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(w(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zt&&F.any3d&&!F.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,gi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(w(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=p({animate:n.animate},n.zoom),n.pan=p({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,n.pan&&n.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var s=this.getZoomScale(t),a=this.getSize().divideBy(2),l=e instanceof K?e:this.latLngToContainerPoint(e),h=l.subtract(a).multiplyBy(1-1/s),g=this.containerPointToLatLng(a.add(h));return this.setView(g,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():ne(e);var n=G(t.paddingTopLeft||t.padding||[0,0]),s=G(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,n.add(s));if(a=typeof t.maxZoom=="number"?Math.min(t.maxZoom,a):a,a===1/0)return{center:e.getCenter(),zoom:a};var l=s.subtract(n).divideBy(2),h=this.project(e.getSouthWest(),a),g=this.project(e.getNorthEast(),a),v=this.unproject(h.add(g).divideBy(2).add(l),a);return{center:v,zoom:a}},fitBounds:function(e,t){if(e=ne(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=G(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){Z(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(n=n||{},n.animate===!1||!F.any3d)return this.setView(e,t,n);this._stop();var s=this.project(this.getCenter()),a=this.project(e),l=this.getSize(),h=this._zoom;e=w(e),t=t===void 0?h:t;var g=Math.max(l.x,l.y),v=g*this.getZoomScale(h,t),N=a.distanceTo(s)||1,R=1.42,V=R*R;function me(Ie){var rn=Ie?-1:1,_r=Ie?v:g,yr=v*v-g*g+rn*V*V*N*N,wr=2*_r*V*N,Jn=yr/wr,Ys=Math.sqrt(Jn*Jn+1)-Jn,kr=Ys<1e-9?-18:Math.log(Ys);return kr}function Ke(Ie){return(Math.exp(Ie)-Math.exp(-Ie))/2}function Be(Ie){return(Math.exp(Ie)+Math.exp(-Ie))/2}function it(Ie){return Ke(Ie)/Be(Ie)}var Xe=me(0);function ci(Ie){return g*(Be(Xe)/Be(Xe+R*Ie))}function gr(Ie){return g*(Be(Xe)*it(Xe+R*Ie)-Ke(Xe))/V}function xr(Ie){return 1-Math.pow(1-Ie,1.5)}var vr=Date.now(),Vs=(me(1)-Xe)/R,br=n.duration?1e3*n.duration:1e3*Vs*.8;function Xs(){var Ie=(Date.now()-vr)/br,rn=xr(Ie)*Vs;Ie<=1?(this._flyToFrame=he(Xs,this),this._move(this.unproject(s.add(a.subtract(s).multiplyBy(gr(rn)/N)),h),this.getScaleZoom(g/ci(rn),h),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Xs.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=ne(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,ne(e));return n.equals(s)||this.panTo(s,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var n=G(t.paddingTopLeft||t.padding||[0,0]),s=G(t.paddingBottomRight||t.padding||[0,0]),a=this.project(this.getCenter()),l=this.project(e),h=this.getPixelBounds(),g=H([h.min.add(n),h.max.subtract(s)]),v=g.getSize();if(!g.contains(l)){this._enforcingBounds=!0;var N=l.subtract(g.getCenter()),R=g.extend(l).getSize().subtract(v);a.x+=N.x<0?-R.x:R.x,a.y+=N.y<0?-R.y:R.y,this.panTo(this.unproject(a),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=p({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=t.divideBy(2).round(),a=n.divideBy(2).round(),l=s.subtract(a);return!l.x&&!l.y?this:(e.animate&&e.pan?this.panBy(l):(e.pan&&this._rawPanBy(l),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=p({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=m(this._handleGeolocationResponse,this),n=m(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,n=e.coords.longitude,s=new X(t,n),a=s.toBounds(e.coords.accuracy*2),l=this._locateOptions;if(l.setView){var h=this.getBoundsZoom(a);this.setView(s,l.maxZoom?Math.min(h,l.maxZoom):h)}var g={latlng:s,bounds:a,timestamp:e.timestamp};for(var v in e.coords)typeof e.coords[v]=="number"&&(g[v]=e.coords[v]);this.fire("locationfound",g)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),A(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ae(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)A(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),s=j("div",n,t||this._mapPane);return e&&(this._panes[e]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new q(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=ne(e),n=G(n||[0,0]);var s=this.getZoom()||0,a=this.getMinZoom(),l=this.getMaxZoom(),h=e.getNorthWest(),g=e.getSouthEast(),v=this.getSize().subtract(n),N=H(this.project(g,s),this.project(h,s)).getSize(),R=F.any3d?this.options.zoomSnap:1,V=v.x/N.x,me=v.y/N.y,Ke=t?Math.max(V,me):Math.min(V,me);return s=this.getScaleZoom(Ke,s),R&&(s=Math.round(s/(R/100))*(R/100),s=t?Math.ceil(s/R)*R:Math.floor(s/R)*R),Math.max(a,Math.min(l,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new M(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===void 0?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var s=n.zoom(e*n.scale(t));return isNaN(s)?1/0:s},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(w(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(G(e),t)},layerPointToLatLng:function(e){var t=G(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(w(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(w(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ne(e))},distance:function(e,t){return this.options.crs.distance(w(e),w(t))},containerPointToLayerPoint:function(e){return G(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return G(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(G(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(w(e)))},mouseEventToContainerPoint:function(e){return gs(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=xi(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(t,"scroll",this._onScroll,this),this._containerId=y(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&F.any3d,Z(e,"leaflet-container"+(F.touch?" leaflet-touch":"")+(F.retina?" leaflet-retina":"")+(F.ielt9?" leaflet-oldie":"")+(F.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=x(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Z(e.markerPane,"leaflet-zoom-hide"),Z(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Le(this._mapPane,new K(0,0));var s=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a,n)._move(e,t)._moveEnd(a),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,s){t===void 0&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),s?n&&n.pinch&&this.fire("zoom",n):((a||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ae(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Le(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[y(this._container)]=this;var t=e?we:oe;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),F.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ae(this._resizeRequest),this._resizeRequest=he(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n=[],s,a=t==="mouseout"||t==="mouseover",l=e.target||e.srcElement,h=!1;l;){if(s=this._targets[y(l)],s&&(t==="click"||t==="preclick")&&this._draggableMoved(s)){h=!0;break}if(s&&s.listens(t,!0)&&(a&&!zn(l,e)||(n.push(s),a))||l===this._container)break;l=l.parentNode}return!n.length&&!h&&!a&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var n=e.type;n==="mousedown"&&Ln(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,n){if(e.type==="click"){var s=p({},e);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var a=this._findEventTargets(e,t);if(n){for(var l=[],h=0;h<n.length;h++)n[h].listens(t,!0)&&l.push(n[h]);a=l.concat(a)}if(a.length){t==="contextmenu"&&Ze(e);var g=a[0],v={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var N=g.getLatLng&&(!g._radius||g._radius<=10);v.containerPoint=N?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(e),v.layerPoint=this.containerPointToLayerPoint(v.containerPoint),v.latlng=N?g.getLatLng():this.layerPointToLatLng(v.layerPoint)}for(h=0;h<a.length;h++)if(a[h].fire(t,v,!0),v.originalEvent._stopped||a[h].options.bubblingMouseEvents===!1&&$(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return mt(this._mapPane)||new K(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var s=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(s)},_latLngBoundsToNewLayerBounds:function(e,t,n){var s=this._getNewPixelOrigin(n,t);return H([this.project(e.getSouthWest(),t)._subtract(s),this.project(e.getNorthWest(),t)._subtract(s),this.project(e.getSouthEast(),t)._subtract(s),this.project(e.getNorthEast(),t)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var s=this.project(e,t),a=this.getSize().divideBy(2),l=new M(s.subtract(a),s.add(a)),h=this._getBoundsOffset(l,n,t);return Math.abs(h.x)<=1&&Math.abs(h.y)<=1?e:this.unproject(s.add(h),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),s=new M(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(s,t))},_getBoundsOffset:function(e,t,n){var s=H(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),a=s.min.subtract(e.min),l=s.max.subtract(e.max),h=this._rebound(a.x,-l.x),g=this._rebound(a.y,-l.y);return new K(h,g)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),s=F.any3d?this.options.zoomSnap:1;return s&&(e=Math.round(e/s)*s),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=j("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var n=fi,s=this._proxy.style[n];ut(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),s===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){A(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();ut(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/s);return n.animate!==!0&&!this.getSize().contains(a)?!1:(he(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,Z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ia(e,t){return new fe(e,t)}var rt=ie.extend({options:{position:"topright"},initialize:function(e){S(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),s=e._controlCorners[n];return Z(t,"leaflet-control"),n.indexOf("bottom")!==-1?s.insertBefore(t,s.firstChild):s.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(A(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),yi=function(e){return new rt(e)};fe.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=j("div",t+"control-container",this._container);function s(a,l){var h=t+a+" "+t+l;e[a+l]=j("div",h,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)A(this._controlCorners[e]);A(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bs=rt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,s){return n<s?-1:s<n?1:0}},initialize:function(e,t,n){S(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in e)this._addLayer(e[s],s);for(s in t)this._addLayer(t[s],s,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return rt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(y(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){Z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(Z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=j("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),_i(t),Dn(t);var s=this._section=j("section",e+"-list");n&&(this._map.on("click",this.collapse,this),oe(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=j("a",e+"-toggle",t);a.href="#",a.title="Layers",a.setAttribute("role","button"),oe(a,{keydown:function(l){l.keyCode===13&&this._expandSafely()},click:function(l){Ze(l),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=j("div",e+"-base",s),this._separator=j("div",e+"-separator",s),this._overlaysList=j("div",e+"-overlays",s),t.appendChild(s)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&y(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(m(function(s,a){return this.options.sortFunction(s.layer,a.layer,s.name,a.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var e,t,n,s,a=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),t=t||s.overlay,e=e||!s.overlay,a+=s.overlay?0:1;return this.options.hideSingleBase&&(e=e&&a>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(y(e.target)),n=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),s;e.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=this._createRadioElement("leaflet-base-layers_"+y(this),n),this._layerControlInputs.push(s),s.layerId=y(e.layer),oe(s,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var l=document.createElement("span");t.appendChild(l),l.appendChild(s),l.appendChild(a);var h=e.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,n,s=[],a=[];this._handlingClick=!0;for(var l=e.length-1;l>=0;l--)t=e[l],n=this._getLayer(t.layerId).layer,t.checked?s.push(n):t.checked||a.push(n);for(l=0;l<a.length;l++)this._map.hasLayer(a[l])&&this._map.removeLayer(a[l]);for(l=0;l<s.length;l++)this._map.hasLayer(s[l])||this._map.addLayer(s[l]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,n,s=this._map.getZoom(),a=e.length-1;a>=0;a--)t=e[a],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==void 0&&s<n.options.minZoom||n.options.maxZoom!==void 0&&s>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,oe(e,"click",Ze),this.expand();var t=this;setTimeout(function(){we(e,"click",Ze),t._preventClick=!1})}}),Aa=function(e,t,n){return new bs(e,t,n)},On=rt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=j("div",t+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,s,a){var l=j("a",n,s);return l.innerHTML=e,l.href="#",l.title=t,l.setAttribute("role","button"),l.setAttribute("aria-label",t),_i(l),oe(l,"click",Gt),oe(l,"click",a,this),oe(l,"click",this._refocusOnMap,this),l},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";pe(this._zoomInButton,t),pe(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(Z(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(Z(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});fe.mergeOptions({zoomControl:!0}),fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new On,this.addControl(this.zoomControl))});var Da=function(e){return new On(e)},_s=rt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=j("div",t),s=this.options;return this._addScales(s,t+"-line",n),e.on(s.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=j("div",t,n)),e.imperial&&(this._iScale=j("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=e*3.2808399,n,s,a;t>5280?(n=t/5280,s=this._getRoundNum(n),this._updateScale(this._iScale,s+" mi",s/n)):(a=this._getRoundNum(t),this._updateScale(this._iScale,a+" ft",a/t))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),za=function(e){return new _s(e)},Oa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rn=rt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(F.inlineSvg?Oa+" ":"")+"Leaflet</a>"},initialize:function(e){S(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=j("div","leaflet-control-attribution"),_i(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});fe.mergeOptions({attributionControl:!0}),fe.addInitHook(function(){this.options.attributionControl&&new Rn().addTo(this)});var Ra=function(e){return new Rn(e)};rt.Layers=bs,rt.Zoom=On,rt.Scale=_s,rt.Attribution=Rn,yi.layers=Aa,yi.zoom=Da,yi.scale=za,yi.attribution=Ra;var ft=ie.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ft.addTo=function(e,t){return e.addHandler(t,this),this};var Ba={Events:de},ys=F.touch?"touchstart mousedown":"mousedown",Mt=Ue.extend({options:{clickTolerance:3},initialize:function(e,t,n,s){S(this,s),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(oe(this._dragStartTarget,ys,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mt._dragging===this&&this.finishDrag(!0),we(this._dragStartTarget,ys,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Ee(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Mt._dragging===this&&this.finishDrag();return}if(!(Mt._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Mt._dragging=this,this._preventOutline&&Ln(this._element),vi(),re(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=ms(this._element);this._startPoint=new K(t.clientX,t.clientY),this._startPos=mt(this._element),this._parentScale=Mn(n);var s=e.type==="mousedown";oe(document,s?"mousemove":"touchmove",this._onMove,this),oe(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,n=new K(t.clientX,t.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ze(e),this._moved||(this.fire("dragstart"),this._moved=!0,Z(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Le(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){pe(document.body,"leaflet-dragging"),this._lastTarget&&(pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),we(document,"mousemove touchmove",this._onMove,this),we(document,"mouseup touchend touchcancel",this._onUp,this),bi(),ee();var t=this._moved&&this._moving;this._moving=!1,Mt._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function ws(e,t,n){var s,a=[1,4,2,8],l,h,g,v,N,R,V,me;for(l=0,R=e.length;l<R;l++)e[l]._code=Ut(e[l],t);for(g=0;g<4;g++){for(V=a[g],s=[],l=0,R=e.length,h=R-1;l<R;h=l++)v=e[l],N=e[h],v._code&V?N._code&V||(me=Ki(N,v,V,t,n),me._code=Ut(me,t),s.push(me)):(N._code&V&&(me=Ki(N,v,V,t,n),me._code=Ut(me,t),s.push(me)),s.push(v));e=s}return e}function ks(e,t){var n,s,a,l,h,g,v,N,R;if(!e||e.length===0)throw new Error("latlngs not passed");tt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var V=w([0,0]),me=ne(e),Ke=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());Ke<1700&&(V=Bn(e));var Be=e.length,it=[];for(n=0;n<Be;n++){var Xe=w(e[n]);it.push(t.project(w([Xe.lat-V.lat,Xe.lng-V.lng])))}for(g=v=N=0,n=0,s=Be-1;n<Be;s=n++)a=it[n],l=it[s],h=a.y*l.x-l.y*a.x,v+=(a.x+l.x)*h,N+=(a.y+l.y)*h,g+=h*3;g===0?R=it[0]:R=[v/g,N/g];var ci=t.unproject(G(R));return w([ci.lat+V.lat,ci.lng+V.lng])}function Bn(e){for(var t=0,n=0,s=0,a=0;a<e.length;a++){var l=w(e[a]);t+=l.lat,n+=l.lng,s++}return w([t/s,n/s])}var $a={__proto__:null,clipPolygon:ws,polygonCenter:ks,centroid:Bn};function js(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Fa(e,n),e=Ha(e,n),e}function Ns(e,t,n){return Math.sqrt(wi(e,t,n,!0))}function Za(e,t,n){return wi(e,t,n)}function Ha(e,t){var n=e.length,s=typeof Uint8Array<"u"?Uint8Array:Array,a=new s(n);a[0]=a[n-1]=1,$n(e,a,t,0,n-1);var l,h=[];for(l=0;l<n;l++)a[l]&&h.push(e[l]);return h}function $n(e,t,n,s,a){var l=0,h,g,v;for(g=s+1;g<=a-1;g++)v=wi(e[g],e[s],e[a],!0),v>l&&(h=g,l=v);l>n&&(t[h]=1,$n(e,t,n,s,h),$n(e,t,n,h,a))}function Fa(e,t){for(var n=[e[0]],s=1,a=0,l=e.length;s<l;s++)Ga(e[s],e[a])>t&&(n.push(e[s]),a=s);return a<l-1&&n.push(e[l-1]),n}var Ps;function Ss(e,t,n,s,a){var l=s?Ps:Ut(e,n),h=Ut(t,n),g,v,N;for(Ps=h;;){if(!(l|h))return[e,t];if(l&h)return!1;g=l||h,v=Ki(e,t,g,n,a),N=Ut(v,n),g===l?(e=v,l=N):(t=v,h=N)}}function Ki(e,t,n,s,a){var l=t.x-e.x,h=t.y-e.y,g=s.min,v=s.max,N,R;return n&8?(N=e.x+l*(v.y-e.y)/h,R=v.y):n&4?(N=e.x+l*(g.y-e.y)/h,R=g.y):n&2?(N=v.x,R=e.y+h*(v.x-e.x)/l):n&1&&(N=g.x,R=e.y+h*(g.x-e.x)/l),new K(N,R,a)}function Ut(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Ga(e,t){var n=t.x-e.x,s=t.y-e.y;return n*n+s*s}function wi(e,t,n,s){var a=t.x,l=t.y,h=n.x-a,g=n.y-l,v=h*h+g*g,N;return v>0&&(N=((e.x-a)*h+(e.y-l)*g)/v,N>1?(a=n.x,l=n.y):N>0&&(a+=h*N,l+=g*N)),h=e.x-a,g=e.y-l,s?h*h+g*g:new K(a,l)}function tt(e){return!B(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Ts(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tt(e)}function Cs(e,t){var n,s,a,l,h,g,v,N;if(!e||e.length===0)throw new Error("latlngs not passed");tt(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var R=w([0,0]),V=ne(e),me=V.getNorthWest().distanceTo(V.getSouthWest())*V.getNorthEast().distanceTo(V.getNorthWest());me<1700&&(R=Bn(e));var Ke=e.length,Be=[];for(n=0;n<Ke;n++){var it=w(e[n]);Be.push(t.project(w([it.lat-R.lat,it.lng-R.lng])))}for(n=0,s=0;n<Ke-1;n++)s+=Be[n].distanceTo(Be[n+1])/2;if(s===0)N=Be[0];else for(n=0,l=0;n<Ke-1;n++)if(h=Be[n],g=Be[n+1],a=h.distanceTo(g),l+=a,l>s){v=(l-s)/a,N=[g.x-v*(g.x-h.x),g.y-v*(g.y-h.y)];break}var Xe=t.unproject(G(N));return w([Xe.lat+R.lat,Xe.lng+R.lng])}var Ua={__proto__:null,simplify:js,pointToSegmentDistance:Ns,closestPointOnSegment:Za,clipSegment:Ss,_getEdgeIntersection:Ki,_getBitCode:Ut,_sqClosestPointOnSegment:wi,isFlat:tt,_flat:Ts,polylineCenter:Cs},Zn={project:function(e){return new K(e.lng,e.lat)},unproject:function(e){return new X(e.y,e.x)},bounds:new M([-180,-90],[180,90])},Hn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new M([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,n=this.R,s=e.lat*t,a=this.R_MINOR/n,l=Math.sqrt(1-a*a),h=l*Math.sin(s),g=Math.tan(Math.PI/4-s/2)/Math.pow((1-h)/(1+h),l/2);return s=-n*Math.log(Math.max(g,1e-10)),new K(e.lng*t*n,s)},unproject:function(e){for(var t=180/Math.PI,n=this.R,s=this.R_MINOR/n,a=Math.sqrt(1-s*s),l=Math.exp(-e.y/n),h=Math.PI/2-2*Math.atan(l),g=0,v=.1,N;g<15&&Math.abs(v)>1e-7;g++)N=a*Math.sin(h),N=Math.pow((1-N)/(1+N),a/2),v=Math.PI/2-2*Math.atan(l*N)-h,h+=v;return new X(h*t,e.x*t/n)}},Wa={__proto__:null,LonLat:Zn,Mercator:Hn,SphericalMercator:ve},Ja=p({},O,{code:"EPSG:3395",projection:Hn,transformation:function(){var e=.5/(Math.PI*Hn.R);return ye(e,.5,-e,.5)}()}),Ls=p({},O,{code:"EPSG:4326",projection:Zn,transformation:ye(1/180,1,-1/180,.5)}),Ka=p({},Q,{projection:Zn,transformation:ye(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,s=t.lat-e.lat;return Math.sqrt(n*n+s*s)},infinite:!0});Q.Earth=O,Q.EPSG3395=Ja,Q.EPSG3857=Oe,Q.EPSG900913=bt,Q.EPSG4326=Ls,Q.Simple=Ka;var ot=Ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[y(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[y(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});fe.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=y(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=y(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return y(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?B(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[y(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=y(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var a=this._zoomBoundLayers[s].options;e=a.minZoom===void 0?e:Math.min(e,a.minZoom),t=a.maxZoom===void 0?t:Math.max(t,a.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var si=ot.extend({initialize:function(e,t){S(this,t),this._layers={};var n,s;if(e)for(n=0,s=e.length;n<s;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,s;for(n in this._layers)s=this._layers[n],s[e]&&s[e].apply(s,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return y(e)}}),qa=function(e,t){return new si(e,t)},jt=si.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),si.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),si.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new q;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Va=function(e,t){return new jt(e,t)},ai=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){S(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(s,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(e,t){var n=this.options,s=n[t+"Size"];typeof s=="number"&&(s=[s,s]);var a=G(s),l=G(t==="shadow"&&n.shadowAnchor||n.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),l&&(e.style.marginLeft=-l.x+"px",e.style.marginTop=-l.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return F.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Xa(e){return new ai(e)}var ki=ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof ki.imagePath!="string"&&(ki.imagePath=this._detectIconPath()),(this.options.imagePath||ki.imagePath)+ai.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(n,s,a){var l=s.exec(n);return l&&l[a]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=j("div","leaflet-default-icon-path",document.body),t=x(e,"background-image")||x(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Ms=ft.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Mt(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Z(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,s=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,l=mt(t._icon),h=n.getPixelBounds(),g=n.getPixelOrigin(),v=H(h.min._subtract(g).add(a),h.max._subtract(g).subtract(a));if(!v.contains(l)){var N=G((Math.max(v.max.x,l.x)-v.max.x)/(h.max.x-v.max.x)-(Math.min(v.min.x,l.x)-v.min.x)/(h.min.x-v.min.x),(Math.max(v.max.y,l.y)-v.max.y)/(h.max.y-v.max.y)-(Math.min(v.min.y,l.y)-v.min.y)/(h.min.y-v.min.y)).multiplyBy(s);n.panBy(N,{animate:!1}),this._draggable._newPos._add(N),this._draggable._startPos._add(N),Le(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=he(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(ae(this._panRequest),this._panRequest=he(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,s=mt(t._icon),a=t._map.layerPointToLatLng(s);n&&Le(n,s),t._latlng=a,e.latlng=a,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){ae(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),qi=ot.extend({options:{icon:new ki,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){S(this,t),this._latlng=w(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=w(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,e.title&&(n.title=e.title),n.tagName==="IMG"&&(n.alt=e.alt||"")),Z(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(n,"focus",this._panOnFocus,this);var a=e.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&(Z(a,t),a.alt=""),this._shadow=a,e.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&l&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(this._icon,"focus",this._panOnFocus,this),A(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&A(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Le(this._icon,e),this._shadow&&Le(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(Z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ms)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ms(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Ce(this._icon,e),this._shadow&&Ce(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?G(t.iconSize):G(0,0),s=t.iconAnchor?G(t.iconAnchor):G(0,0);e.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ya(e,t){return new qi(e,t)}var Et=ot.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return S(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vi=Et.extend({options:{fill:!0,radius:10},initialize:function(e,t){S(this,t),this._latlng=w(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=w(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Et.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),s=[e+n,t+n];this._pxBounds=new M(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qa(e,t){return new Vi(e,t)}var Fn=Vi.extend({initialize:function(e,t,n){if(typeof t=="number"&&(t=p({},n,{radius:t})),S(this,t),this._latlng=w(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Et.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===O.distance){var a=Math.PI/180,l=this._mRadius/O.R/a,h=n.project([t+l,e]),g=n.project([t-l,e]),v=h.add(g).divideBy(2),N=n.unproject(v).lat,R=Math.acos((Math.cos(l*a)-Math.sin(t*a)*Math.sin(N*a))/(Math.cos(t*a)*Math.cos(N*a)))/a;(isNaN(R)||R===0)&&(R=l/Math.cos(Math.PI/180*t)),this._point=v.subtract(n.getPixelOrigin()),this._radius=isNaN(R)?0:v.x-n.project([N,e-R]).x,this._radiusY=v.y-h.y}else{var V=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(V).x}this._updateBounds()}});function er(e,t,n){return new Fn(e,t,n)}var Nt=Et.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){S(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,n=null,s=wi,a,l,h=0,g=this._parts.length;h<g;h++)for(var v=this._parts[h],N=1,R=v.length;N<R;N++){a=v[N-1],l=v[N];var V=s(e,a,l,!0);V<t&&(t=V,n=s(e,a,l))}return n&&(n.distance=Math.sqrt(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=w(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new q,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return tt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=tt(e),s=0,a=e.length;s<a;s++)n?(t[s]=w(e[s]),this._bounds.extend(t[s])):t[s]=this._convertLatLngs(e[s]);return t},_project:function(){var e=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new K(e,e);this._rawPxBounds&&(this._pxBounds=new M([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var s=e[0]instanceof X,a=e.length,l,h;if(s){for(h=[],l=0;l<a;l++)h[l]=this._map.latLngToLayerPoint(e[l]),n.extend(h[l]);t.push(h)}else for(l=0;l<a;l++)this._projectLatlngs(e[l],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,n,s,a,l,h,g,v;for(n=0,a=0,l=this._rings.length;n<l;n++)for(v=this._rings[n],s=0,h=v.length;s<h-1;s++)g=Ss(v[s],v[s+1],e,s,!0),g&&(t[a]=t[a]||[],t[a].push(g[0]),(g[1]!==v[s+1]||s===h-2)&&(t[a].push(g[1]),a++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,s=e.length;n<s;n++)e[n]=js(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,s,a,l,h,g,v=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,l=this._parts.length;n<l;n++)for(g=this._parts[n],s=0,h=g.length,a=h-1;s<h;a=s++)if(!(!t&&s===0)&&Ns(e,g[a],g[s])<=v)return!0;return!1}});function tr(e,t){return new Nt(e,t)}Nt._flat=Ts;var ri=Nt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ks(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Nt.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof X&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){Nt.prototype._setLatLngs.call(this,e),tt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new K(t,t);if(e=new M(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,a=this._rings.length,l;s<a;s++)l=ws(this._rings[s],e,!0),l.length&&this._parts.push(l)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,s,a,l,h,g,v,N;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(l=0,v=this._parts.length;l<v;l++)for(n=this._parts[l],h=0,N=n.length,g=N-1;h<N;g=h++)s=n[h],a=n[g],s.y>e.y!=a.y>e.y&&e.x<(a.x-s.x)*(e.y-s.y)/(a.y-s.y)+s.x&&(t=!t);return t||Nt.prototype._containsPoint.call(this,e,!0)}});function ir(e,t){return new ri(e,t)}var Pt=jt.extend({initialize:function(e,t){S(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=B(e)?e:e.features,n,s,a;if(t){for(n=0,s=t.length;n<s;n++)a=t[n],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var l=this.options;if(l.filter&&!l.filter(e))return this;var h=Xi(e,l);return h?(h.feature=en(e),h.defaultOptions=h.options,this.resetStyle(h),l.onEachFeature&&l.onEachFeature(e,h),this.addLayer(h)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=p({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function Xi(e,t){var n=e.type==="Feature"?e.geometry:e,s=n?n.coordinates:null,a=[],l=t&&t.pointToLayer,h=t&&t.coordsToLatLng||Gn,g,v,N,R;if(!s&&!n)return null;switch(n.type){case"Point":return g=h(s),Es(l,e,g,t);case"MultiPoint":for(N=0,R=s.length;N<R;N++)g=h(s[N]),a.push(Es(l,e,g,t));return new jt(a);case"LineString":case"MultiLineString":return v=Yi(s,n.type==="LineString"?0:1,h),new Nt(v,t);case"Polygon":case"MultiPolygon":return v=Yi(s,n.type==="Polygon"?1:2,h),new ri(v,t);case"GeometryCollection":for(N=0,R=n.geometries.length;N<R;N++){var V=Xi({geometry:n.geometries[N],type:"Feature",properties:e.properties},t);V&&a.push(V)}return new jt(a);case"FeatureCollection":for(N=0,R=n.features.length;N<R;N++){var me=Xi(n.features[N],t);me&&a.push(me)}return new jt(a);default:throw new Error("Invalid GeoJSON object.")}}function Es(e,t,n,s){return e?e(t,n):new qi(n,s&&s.markersInheritOptions&&s)}function Gn(e){return new X(e[1],e[0],e[2])}function Yi(e,t,n){for(var s=[],a=0,l=e.length,h;a<l;a++)h=t?Yi(e[a],t-1,n):(n||Gn)(e[a]),s.push(h);return s}function Un(e,t){return e=w(e),e.alt!==void 0?[D(e.lng,t),D(e.lat,t),D(e.alt,t)]:[D(e.lng,t),D(e.lat,t)]}function Qi(e,t,n,s){for(var a=[],l=0,h=e.length;l<h;l++)a.push(t?Qi(e[l],tt(e[l])?0:t-1,n,s):Un(e[l],s));return!t&&n&&a.length>0&&a.push(a[0].slice()),a}function oi(e,t){return e.feature?p({},e.feature,{geometry:t}):en(t)}function en(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Wn={toGeoJSON:function(e){return oi(this,{type:"Point",coordinates:Un(this.getLatLng(),e)})}};qi.include(Wn),Fn.include(Wn),Vi.include(Wn),Nt.include({toGeoJSON:function(e){var t=!tt(this._latlngs),n=Qi(this._latlngs,t?1:0,!1,e);return oi(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),ri.include({toGeoJSON:function(e){var t=!tt(this._latlngs),n=t&&!tt(this._latlngs[0]),s=Qi(this._latlngs,n?2:t?1:0,!0,e);return t||(s=[s]),oi(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),si.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),oi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var n=t==="GeometryCollection",s=[];return this.eachLayer(function(a){if(a.toGeoJSON){var l=a.toGeoJSON(e);if(n)s.push(l.geometry);else{var h=en(l);h.type==="FeatureCollection"?s.push.apply(s,h.features):s.push(h)}}}),n?oi(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function Is(e,t){return new Pt(e,t)}var nr=Is,tn=ot.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=ne(t),S(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){A(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&be(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ne(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:j("img");if(Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=_,t.onmousemove=_,t.onload=m(this.fire,this,"load"),t.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;ut(this._image,n,t)},_reset:function(){var e=this._image,t=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Le(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),sr=function(e,t,n){return new tn(e,t,n)},As=tn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:j("video");if(Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=_,t.onmousemove=_,t.onloadeddata=m(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),s=[],a=0;a<n.length;a++)s.push(n[a].src);this._url=n.length>0?s:[t.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var l=0;l<this._url.length;l++){var h=j("source");h.src=this._url[l],t.appendChild(h)}}});function ar(e,t,n){return new As(e,t,n)}var Ds=tn.extend({_initImage:function(){var e=this._image=this._url;Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=_,e.onmousemove=_}});function rr(e,t,n){return new Ds(e,t,n)}var gt=ot.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof X||B(e))?(this._latlng=w(e),S(this,t)):(S(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Ce(this._container,1),this.bringToFront(),this.options.interactive&&(Z(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Ce(this._container,0),this._removeTimeout=setTimeout(m(A,void 0,this._container),200)):A(this._container),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=w(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&be(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof jt){t=null;var n=this._source._layers;for(var s in n)if(n[s]._map){t=n[s];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=G(this.options.offset),n=this._getAnchor();this._zoomAnimated?Le(this._container,e.add(n)):t=t.add(e).add(n);var s=this._containerBottom=-t.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=s+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});fe.include({_initOverlay:function(e,t,n,s){var a=t;return a instanceof e||(a=new e(s).setContent(t)),n&&a.setLatLng(n),a}}),ot.include({_initOverlay:function(e,t,n,s){var a=n;return a instanceof e?(S(a,s),a._source=this):(a=t&&!s?t:new e(s,this),a.setContent(n)),a}});var nn=gt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,gt.prototype.openOn.call(this,e)},onAdd:function(e){gt.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Et||this._source.on("preclick",Ft))},onRemove:function(e){gt.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Et||this._source.off("preclick",Ft))},getEvents:function(){var e=gt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=j("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=j("div",e+"-content-wrapper",t);if(this._contentNode=j("div",e+"-content",n),_i(t),Dn(this._contentNode),oe(t,"contextmenu",Ft),this._tipContainer=j("div",e+"-tip-container",t),this._tip=j("div",e+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=j("a",e+"-close-button",t);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',oe(s,"click",function(a){Ze(a),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var s=e.offsetHeight,a=this.options.maxHeight,l="leaflet-popup-scrolled";a&&s>a?(t.height=a+"px",Z(e,l)):pe(e,l),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Le(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(x(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,s=this._containerWidth,a=new K(this._containerLeft,-n-this._containerBottom);a._add(mt(this._container));var l=e.layerPointToContainerPoint(a),h=G(this.options.autoPanPadding),g=G(this.options.autoPanPaddingTopLeft||h),v=G(this.options.autoPanPaddingBottomRight||h),N=e.getSize(),R=0,V=0;l.x+s+v.x>N.x&&(R=l.x+s-N.x+v.x),l.x-R-g.x<0&&(R=l.x-g.x),l.y+n+v.y>N.y&&(V=l.y+n-N.y+v.y),l.y-V-g.y<0&&(V=l.y-g.y),(R||V)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([R,V]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),or=function(e,t){return new nn(e,t)};fe.mergeOptions({closePopupOnClick:!0}),fe.include({openPopup:function(e,t,n){return this._initOverlay(nn,e,t,n).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),ot.include({bindPopup:function(e,t){return this._popup=this._initOverlay(nn,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof jt||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Gt(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof Et)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var sn=gt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){gt.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){gt.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=gt.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=j("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,s=this._map,a=this._container,l=s.latLngToContainerPoint(s.getCenter()),h=s.layerPointToContainerPoint(e),g=this.options.direction,v=a.offsetWidth,N=a.offsetHeight,R=G(this.options.offset),V=this._getAnchor();g==="top"?(t=v/2,n=N):g==="bottom"?(t=v/2,n=0):g==="center"?(t=v/2,n=N/2):g==="right"?(t=0,n=N/2):g==="left"?(t=v,n=N/2):h.x<l.x?(g="right",t=0,n=N/2):(g="left",t=v+(R.x+V.x)*2,n=N/2),e=e.subtract(G(t,n,!0)).add(R).add(V),pe(a,"leaflet-tooltip-right"),pe(a,"leaflet-tooltip-left"),pe(a,"leaflet-tooltip-top"),pe(a,"leaflet-tooltip-bottom"),Z(a,"leaflet-tooltip-"+g),Le(a,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Ce(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),lr=function(e,t){return new sn(e,t)};fe.include({openTooltip:function(e,t,n){return this._initOverlay(sn,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),ot.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sn,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof jt||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(oe(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),oe(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,n,s;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.mouseEventToContainerPoint(e.originalEvent),s=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(t)}});var zs=ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(le(t),t.appendChild(n.html)):t.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=G(n.bgPos);t.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function cr(e){return new zs(e)}ai.Default=ki;var ji=ot.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){S(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),A(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(be(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=U(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof K?e:new K(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-1/0,1/0),s=0,a=t.length,l;s<a;s++)l=t[s].style.zIndex,t[s]!==this._container&&l&&(n=e(n,+l));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!F.ielt9){Ce(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var s in this._tiles){var a=this._tiles[s];if(!(!a.current||!a.loaded)){var l=Math.min(1,(e-a.loaded)/200);Ce(a.el,l),l<1?t=!0:(a.active?n=!0:this._onOpaqueTile(a),a.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(ae(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=j("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(A(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[e],a=this._map;return s||(s=this._levels[e]={},s.el=j("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=t,s.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),s.zoom=e,this._setZoomTransform(s,a.getCenter(),a.getZoom()),_(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var s=t.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)A(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,s){var a=Math.floor(e/2),l=Math.floor(t/2),h=n-1,g=new K(+a,+l);g.z=+h;var v=this._tileCoordsToKey(g),N=this._tiles[v];return N&&N.active?(N.retain=!0,!0):(N&&N.loaded&&(N.retain=!0),h>s?this._retainParent(a,l,h,s):!1)},_retainChildren:function(e,t,n,s){for(var a=2*e;a<2*e+2;a++)for(var l=2*t;l<2*t+2;l++){var h=new K(a,l);h.z=n+1;var g=this._tileCoordsToKey(h),v=this._tiles[g];if(v&&v.active){v.retain=!0;continue}else v&&v.loaded&&(v.retain=!0);n+1<s&&this._retainChildren(a,l,n+1,s)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,s){var a=Math.round(t);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var l=this.options.updateWhenZooming&&a!==this._tileZoom;(!s||l)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var s=this._map.getZoomScale(n,e.zoom),a=e.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(t,n)).round();F.any3d?ut(e.el,a,s):Le(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],s).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],s).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],s).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),s=t.getZoomScale(n,this._tileZoom),a=t.project(e,this._tileZoom).floor(),l=t.getSize().divideBy(s*2);return new M(a.subtract(l),a.add(l))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(s),l=a.getCenter(),h=[],g=this.options.keepBuffer,v=new M(a.getBottomLeft().subtract([g,-g]),a.getTopRight().add([g,-g]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var N in this._tiles){var R=this._tiles[N].coords;(R.z!==this._tileZoom||!v.contains(new K(R.x,R.y)))&&(this._tiles[N].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(var V=a.min.y;V<=a.max.y;V++)for(var me=a.min.x;me<=a.max.x;me++){var Ke=new K(me,V);if(Ke.z=this._tileZoom,!!this._isValidTile(Ke)){var Be=this._tiles[this._tileCoordsToKey(Ke)];Be?Be.current=!0:h.push(Ke)}}if(h.sort(function(Xe,ci){return Xe.distanceTo(l)-ci.distanceTo(l)}),h.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var it=document.createDocumentFragment();for(me=0;me<h.length;me++)this._addTile(h[me],it);this._level.el.appendChild(it)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(e);return ne(this.options.bounds).overlaps(s)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),s=e.scaleBy(n),a=s.add(n),l=t.unproject(s,e.z),h=t.unproject(a,e.z);return[l,h]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new q(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new K(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(A(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Z(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=_,e.onmousemove=_,F.ielt9&&this.options.opacity<1&&Ce(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),s=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),m(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&he(m(this._tileReady,this,e,null,a)),Le(a,n),this._tiles[s]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var s=this._tileCoordsToKey(e);n=this._tiles[s],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Ce(n.el,0),ae(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(Z(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F.ielt9||!this._map._fadeAnimated?he(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new K(this._wrapX?T(e.x,this._wrapX):e.x,this._wrapY?T(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new M(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function dr(e){return new ji(e)}var li=ji.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=S(this,t),t.detectRetina&&F.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return oe(n,"load",m(this._tileOnLoad,this,t,n)),oe(n,"error",m(this._tileOnError,this,t,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:F.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return I(this._url,p(t,this.options))},_tileOnLoad:function(e,t){F.ielt9?setTimeout(m(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var s=this.options.errorTileUrl;s&&t.getAttribute("src")!==s&&(t.src=s),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset;return n&&(e=t-e),e+s},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=_,t.onerror=_,!t.complete)){t.src=ce;var n=this._tiles[e].coords;A(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",ce),ji.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(!(!this._map||n&&n.getAttribute("src")===ce))return ji.prototype._tileReady.call(this,e,t,n)}});function Os(e,t){return new li(e,t)}var Rs=li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=p({},this.defaultWmsParams);for(var s in t)s in this.options||(n[s]=t[s]);t=S(this,t);var a=t.detectRetina&&F.retina?2:1,l=this.getTileSize();n.width=l.x*a,n.height=l.y*a,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,li.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,s=H(n.project(t[0]),n.project(t[1])),a=s.min,l=s.max,h=(this._wmsVersion>=1.3&&this._crs===Ls?[a.y,a.x,l.y,l.x]:[a.x,a.y,l.x,l.y]).join(","),g=li.prototype.getTileUrl.call(this,e);return g+se(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+h},setParams:function(e,t){return p(this.wmsParams,e),t||this.redraw(),this}});function hr(e,t){return new Rs(e,t)}li.WMS=Rs,Os.wms=hr;var St=ot.extend({options:{padding:.1},initialize:function(e){S(this,e),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),l=s.multiplyBy(-n).add(a).subtract(this._map._getNewPixelOrigin(e,t));F.any3d?ut(this._container,l,n):Le(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new M(n,n.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bs=St.extend({options:{tolerance:0},getEvents:function(){var e=St.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){St.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");oe(e,"mousemove",this._onMouseMove,this),oe(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){ae(this._redrawRequest),delete this._ctx,A(this._container),we(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){St.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),s=F.retina?2:1;Le(t,e.min),t.width=s*n.x,t.height=s*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",F.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){St.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[y(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,s=t.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete e._order,delete this._layers[y(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),n=[],s,a;for(a=0;a<t.length;a++){if(s=Number(t[a]),isNaN(s))return;n.push(s)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||he(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)e=s.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,s,a,l,h=e._parts,g=h.length,v=this._ctx;if(g){for(v.beginPath(),n=0;n<g;n++){for(s=0,a=h[n].length;s<a;s++)l=h[n][s],v[s?"lineTo":"moveTo"](l.x,l.y);t&&v.closePath()}this._fillStroke(v,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,n=this._ctx,s=Math.max(Math.round(e._radius),1),a=(Math.max(Math.round(e._radiusY),1)||s)/s;a!==1&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(t.x,t.y/a,s,0,Math.PI*2,!1),a!==1&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),n,s,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(n))&&(s=n);this._fireEvent(s?[s]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(pe(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,s,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(t)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(e),s&&(Z(this._container,"leaflet-interactive"),this._fireEvent([s],e,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,s=t.prev;if(n)n.prev=s;else return;s?s.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,s=t.prev;if(s)s.next=n;else return;n?n.prev=s:s&&(this._drawLast=s),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function $s(e){return F.canvas?new Bs(e):null}var Ni=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ur={_initContainer:function(){this._container=j("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(St.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Ni("shape");Z(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Ni("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;A(t),e.removeInteractiveTarget(t),delete this._layers[y(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,s=e.options,a=e._container;a.stroked=!!s.stroke,a.filled=!!s.fill,s.stroke?(t||(t=e._stroke=Ni("stroke")),a.appendChild(t),t.weight=s.weight+"px",t.color=s.color,t.opacity=s.opacity,s.dashArray?t.dashStyle=B(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=s.lineCap.replace("butt","flat"),t.joinstyle=s.lineJoin):t&&(a.removeChild(t),e._stroke=null),s.fill?(n||(n=e._fill=Ni("fill")),a.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(a.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),s=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+s+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){ue(e._container)},_bringToBack:function(e){be(e._container)}},an=F.vml?Ni:st,Pi=St.extend({_initContainer:function(){this._container=an("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=an("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){A(this._container),we(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){St.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Le(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=an("path");e.options.className&&Z(t,e.options.className),e.options.interactive&&Z(t,"leaflet-interactive"),this._updateStyle(e),this._layers[y(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){A(e._path),e.removeInteractiveTarget(e._path),delete this._layers[y(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,k(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),s=Math.max(Math.round(e._radiusY),1)||n,a="a"+n+","+s+" 0 1,0 ",l=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+a+n*2+",0 "+a+-n*2+",0 ";this._setPath(e,l)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){ue(e._path)},_bringToBack:function(e){be(e._path)}});F.vml&&Pi.include(ur);function Zs(e){return F.svg||F.vml?new Pi(e):null}fe.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&$s(e)||Zs(e)}});var Hs=ri.extend({initialize:function(e,t){ri.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ne(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function mr(e,t){return new Hs(e,t)}Pi.create=an,Pi.pointsToPath=k,Pt.geometryToLayer=Xi,Pt.coordsToLatLng=Gn,Pt.coordsToLatLngs=Yi,Pt.latLngToCoords=Un,Pt.latLngsToCoords=Qi,Pt.getFeature=oi,Pt.asFeature=en,fe.mergeOptions({boxZoom:!0});var Fs=ft.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){A(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),re(),vi(),this._startPoint=this._map.mouseEventToContainerPoint(e),oe(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=j("div","leaflet-zoom-box",this._container),Z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new M(this._point,this._startPoint),n=t.getSize();Le(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(A(this._box),pe(this._container,"leaflet-crosshair")),ee(),bi(),we(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var t=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});fe.addInitHook("addHandler","boxZoom",Fs),fe.mergeOptions({doubleClickZoom:!0});var Gs=ft.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),s=t.options.zoomDelta,a=e.originalEvent.shiftKey?n-s:n+s;t.options.doubleClickZoom==="center"?t.setZoom(a):t.setZoomAround(e.containerPoint,a)}});fe.addInitHook("addHandler","doubleClickZoom",Gs),fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Us=ft.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Mt(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pe(this._map._container,"leaflet-grab"),pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=ne(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,a=(s-t+n)%e+t-n,l=(s+t+n)%e-t-n,h=Math.abs(a+n)<Math.abs(l+n)?a:l;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=h},_onDragEnd:function(e){var t=this._map,n=t.options,s=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),s)t.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1e3,h=n.easeLinearity,g=a.multiplyBy(h/l),v=g.distanceTo([0,0]),N=Math.min(n.inertiaMaxSpeed,v),R=g.multiplyBy(N/v),V=N/(n.inertiaDeceleration*h),me=R.multiplyBy(-V/2).round();!me.x&&!me.y?t.fire("moveend"):(me=t._limitOffset(me,t.options.maxBounds),he(function(){t.panBy(me,{duration:V,easeLinearity:h,noMoveStart:!0,animate:!0})}))}}});fe.addInitHook("addHandler","dragging",Us),fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ws=ft.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),oe(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),we(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,s=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,s,a;for(s=0,a=n.left.length;s<a;s++)t[n.left[s]]=[-1*e,0];for(s=0,a=n.right.length;s<a;s++)t[n.right[s]]=[e,0];for(s=0,a=n.down.length;s<a;s++)t[n.down[s]]=[0,e];for(s=0,a=n.up.length;s<a;s++)t[n.up[s]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,s,a;for(s=0,a=n.zoomIn.length;s<a;s++)t[n.zoomIn[s]]=e;for(s=0,a=n.zoomOut.length;s<a;s++)t[n.zoomOut[s]]=-e},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){we(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map,s;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(s=this._panKeys[t],e.shiftKey&&(s=G(s).multiplyBy(3)),n.options.maxBounds&&(s=n._limitOffset(G(s),n.options.maxBounds)),n.options.worldCopyJump){var a=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(s)));n.panTo(a)}else n.panBy(s)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;Gt(e)}}});fe.addInitHook("addHandler","keyboard",Ws),fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Js=ft.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=xs(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),s),Gt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,l=n?Math.ceil(a/n)*n:a,h=e._limitZoom(t+(this._delta>0?l:-l))-t;this._delta=0,this._startTime=null,h&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+h):e.setZoomAround(this._lastMousePos,t+h))}});fe.addInitHook("addHandler","scrollWheelZoom",Js);var pr=600;fe.mergeOptions({tapHold:F.touchNative&&F.safari&&F.mobile,tapTolerance:15});var Ks=ft.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new K(t.clientX,t.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",Ze),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),pr),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){we(document,"touchend",Ze),we(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new K(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});fe.addInitHook("addHandler","tapHold",Ks),fe.mergeOptions({touchZoom:F.touch,bounceAtZoomLimits:!0});var qs=ft.extend({addHooks:function(){Z(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var n=t.mouseEventToContainerPoint(e.touches[0]),s=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),Ze(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),s=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(s)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var l=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(a===1&&l.x===0&&l.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(l),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),ae(this._animRequest);var h=m(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=he(h,this,!0),Ze(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ae(this._animRequest),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});fe.addInitHook("addHandler","touchZoom",qs),fe.BoxZoom=Fs,fe.DoubleClickZoom=Gs,fe.Drag=Us,fe.Keyboard=Ws,fe.ScrollWheelZoom=Js,fe.TapHold=Ks,fe.TouchZoom=qs,o.Bounds=M,o.Browser=F,o.CRS=Q,o.Canvas=Bs,o.Circle=Fn,o.CircleMarker=Vi,o.Class=ie,o.Control=rt,o.DivIcon=zs,o.DivOverlay=gt,o.DomEvent=Ea,o.DomUtil=La,o.Draggable=Mt,o.Evented=Ue,o.FeatureGroup=jt,o.GeoJSON=Pt,o.GridLayer=ji,o.Handler=ft,o.Icon=ai,o.ImageOverlay=tn,o.LatLng=X,o.LatLngBounds=q,o.Layer=ot,o.LayerGroup=si,o.LineUtil=Ua,o.Map=fe,o.Marker=qi,o.Mixin=Ba,o.Path=Et,o.Point=K,o.PolyUtil=$a,o.Polygon=ri,o.Polyline=Nt,o.Popup=nn,o.PosAnimation=vs,o.Projection=Wa,o.Rectangle=Hs,o.Renderer=St,o.SVG=Pi,o.SVGOverlay=Ds,o.TileLayer=li,o.Tooltip=sn,o.Transformation=De,o.Util=J,o.VideoOverlay=As,o.bind=m,o.bounds=H,o.canvas=$s,o.circle=er,o.circleMarker=Qa,o.control=yi,o.divIcon=cr,o.extend=p,o.featureGroup=Va,o.geoJSON=Is,o.geoJson=nr,o.gridLayer=dr,o.icon=Xa,o.imageOverlay=sr,o.latLng=w,o.latLngBounds=ne,o.layerGroup=qa,o.map=Ia,o.marker=Ya,o.point=G,o.polygon=ir,o.polyline=tr,o.popup=or,o.rectangle=mr,o.setOptions=S,o.stamp=y,o.svg=Zs,o.svgOverlay=rr,o.tileLayer=Os,o.tooltip=lr,o.transformation=ye,o.version=d,o.videoOverlay=ar;var fr=window.L;o.noConflict=function(){return window.L=fr,this},window.L=o})}(Li,Li.exports)),Li.exports}var Ai=po();const ka=Pr(Ai);function hs(c,r,o){return Object.freeze({instance:c,context:r,container:o})}function us(c,r){return r==null?function(d,p){const u=f.useRef();return u.current||(u.current=c(d,p)),u}:function(d,p){const u=f.useRef();u.current||(u.current=c(d,p));const m=f.useRef(d),{instance:b}=u.current;return f.useEffect(function(){m.current!==d&&(r(b,d,m.current),m.current=d)},[b,d,p]),u}}function fo(c,r){f.useEffect(function(){return(r.layerContainer??r.map).addLayer(c.instance),function(){var u;(u=r.layerContainer)==null||u.removeLayer(c.instance),r.map.removeLayer(c.instance)}},[r,c])}function ja(c){return function(o){const d=cs(),p=c(ds(o,d),d);return ba(d.map,o.attribution),wa(p.current,o.eventHandlers),fo(p.current,d),p}}function go(c,r){const o=us(c,r),d=ja(o);return lo(d)}function xo(c,r){const o=us(c),d=uo(o,r);return co(d)}function vo(c,r){const o=us(c,r),d=ja(o);return ho(d)}function bo(c,r,o){const{opacity:d,zIndex:p}=r;d!=null&&d!==o.opacity&&c.setOpacity(d),p!=null&&p!==o.zIndex&&c.setZIndex(p)}function Na(){return cs().map}function _o(c){const r=Na();return f.useEffect(function(){return r.on(c),function(){r.off(c)}},[r,c]),r}function as(){return as=Object.assign||function(c){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(c[d]=o[d])}return c},as.apply(this,arguments)}function yo({bounds:c,boundsOptions:r,center:o,children:d,className:p,id:u,placeholder:m,style:b,whenReady:y,zoom:U,...T},_){const[D]=f.useState({className:p,id:u,style:b}),[C,E]=f.useState(null);f.useImperativeHandle(_,()=>(C==null?void 0:C.map)??null,[C]);const S=f.useCallback(z=>{if(z!==null&&C===null){const I=new Ai.Map(z,T);o!=null&&U!=null?I.setView(o,U):c!=null&&I.fitBounds(c,r),y!=null&&I.whenReady(y),E(ro(I))}},[]);f.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const se=C?qe.createElement(ya,{value:C},d):m??null;return qe.createElement("div",as({},D,{ref:S}),se)}const wo=f.forwardRef(yo),ia=go(function({position:r,...o},d){const p=new Ai.Marker(r,o);return hs(p,oo(d,{overlayContainer:p}))},function(r,o,d){o.position!==d.position&&r.setLatLng(o.position),o.icon!=null&&o.icon!==d.icon&&r.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==d.zIndexOffset&&r.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==d.opacity&&r.setOpacity(o.opacity),r.dragging!=null&&o.draggable!==d.draggable&&(o.draggable===!0?r.dragging.enable():r.dragging.disable())}),na=xo(function(r,o){const d=new Ai.Popup(r,o.overlayContainer);return hs(d,o)},function(r,o,{position:d},p){f.useEffect(function(){const{instance:m}=r;function b(U){U.popup===m&&(m.update(),p(!0))}function y(U){U.popup===m&&p(!1)}return o.map.on({popupopen:b,popupclose:y}),o.overlayContainer==null?(d!=null&&m.setLatLng(d),m.openOn(o.map)):o.overlayContainer.bindPopup(m),function(){var T;o.map.off({popupopen:b,popupclose:y}),(T=o.overlayContainer)==null||T.unbindPopup(),o.map.removeLayer(m)}},[r,o,p,d])}),ko=vo(function({url:r,...o},d){const p=new Ai.TileLayer(r,ds(o,d));return hs(p,d)},function(r,o,d){bo(r,o,d);const{url:p}=o;p!=null&&p!==d.url&&r.setUrl(p)}),jo=({onLocationUpdate:c,onClose:r,workLocation:o})=>{const[d,p]=f.useState(null),[u,m]=f.useState(null),[b,y]=f.useState("idle"),[U,T]=f.useState(null),[_,D]=f.useState([]),[C,E]=f.useState(!1),[S,se]=f.useState(null),[z,I]=f.useState(null),[B,$]=f.useState(!1),[ce,P]=f.useState(!1),[Y,te]=f.useState({lat:"",lng:""}),[je,Ne]=f.useState(!1),he={bandung:{lat:-6.9175,lng:107.6191,name:"Cabang Bandung"},eastJava:{lat:-7.899104425119698,lng:111.96316396455585,name:"East Java (VPN Issue)"},kediri:{lat:-7.8481,lng:112.0178,name:"RS Kediri Medical Center"}},ae=f.useCallback((M,H,q,ne)=>{const w=M*Math.PI/180,Q=q*Math.PI/180,O=(q-M)*Math.PI/180,ge=(ne-H)*Math.PI/180,ve=Math.sin(O/2)*Math.sin(O/2)+Math.cos(w)*Math.cos(Q)*Math.sin(ge/2)*Math.sin(ge/2);return 6371e3*(2*Math.atan2(Math.sqrt(ve),Math.sqrt(1-ve)))},[]),J=f.useCallback(async()=>{$(!0);const M=[];let H=0;try{const q=Intl.DateTimeFormat().resolvedOptions().timeZone;if(q.includes("Asia/Jakarta")||q.includes("Asia/Makassar")||q.includes("Asia/Jayapura")||(M.push(`Timezone: ${q} (Not Indonesian)`),H+=30),d){const[X,w]=d;X>=-11&&X<=6&&w>=95&&w<=141||(M.push("GPS coordinates outside Indonesia bounds"),H+=40),Object.values(he).forEach(O=>{const ge=ae(X,w,O.lat,O.lng);ge>1e6&&(M.push(`${Math.round(ge/1e3)}km from ${O.name}`),H+=20)})}try{const w=await(await fetch("https://api.ipify.org?format=json")).json();(w.ip.startsWith("10.")||w.ip.startsWith("172.")||w.ip.startsWith("192.168."))&&(M.push(`Private IP detected: ${w.ip}`),H+=20),I({isVPN:H>50,confidence:H,indicators:M,timezone:q,publicIP:w.ip})}catch{I({isVPN:H>50,confidence:H,indicators:M,timezone:q})}}catch(q){console.error("VPN detection failed:",q)}finally{$(!1)}},[d,ae]),ie=f.useCallback(()=>{if(y("loading"),T(null),!navigator.geolocation){y("error"),T("GPS not supported by this browser");return}navigator.geolocation.getCurrentPosition(M=>{const{latitude:H,longitude:q,accuracy:ne,altitude:X,heading:w,speed:Q}=M.coords,O=[H,q];p(O),m(ne),y("success");let ge;o&&(ge=ae(H,q,o.latitude,o.longitude));const ve={timestamp:new Date,latitude:H,longitude:q,accuracy:ne,altitude:X||void 0,heading:w||void 0,speed:Q||void 0,distance:ge};D(De=>[ve,...De].slice(0,50)),c==null||c(O,ne)},M=>{switch(y("error"),M.code){case M.PERMISSION_DENIED:T("GPS permission denied. Please allow location access.");break;case M.POSITION_UNAVAILABLE:T("GPS position unavailable. Check GPS settings.");break;case M.TIMEOUT:T("GPS timeout. Try again.");break;default:T(`GPS error: ${M.message}`)}})},[ae,o,c]),Ae=f.useCallback(()=>{if(S)return;if(!navigator.geolocation){T("GPS not supported by this browser");return}const M={enableHighAccuracy:!0,timeout:5e3,maximumAge:2e3},H=navigator.geolocation.watchPosition(q=>{const{latitude:ne,longitude:X,accuracy:w,altitude:Q,heading:O,speed:ge}=q.coords,ve=[ne,X];p(ve),m(w),y("success");let De;o&&(De=ae(ne,X,o.latitude,o.longitude));const ye={timestamp:new Date,latitude:ne,longitude:X,accuracy:w,altitude:Q||void 0,heading:O||void 0,speed:ge||void 0,distance:De};D(Oe=>[ye,...Oe].slice(0,100)),c==null||c(ve,w)},q=>{y("error"),T(`Tracking error: ${q.message}`)},M);se(H),E(!0)},[S,ae,o,c]),de=f.useCallback(()=>{S&&(navigator.geolocation.clearWatch(S),se(null)),E(!1)},[S]),Ue=()=>{const M=parseFloat(Y.lat),H=parseFloat(Y.lng);if(isNaN(M)||isNaN(H)){alert("Please enter valid coordinates");return}const q=[M,H];p(q),m(1),y("success");const ne={timestamp:new Date,latitude:M,longitude:H,accuracy:1,distance:o?ae(M,H,o.latitude,o.longitude):void 0};D(X=>[ne,...X].slice(0,50)),c==null||c(q,1),Ne(!1)},K=()=>{const M={timestamp:new Date().toISOString(),currentLocation:d,accuracy:u,gpsStatus:b,gpsError:U,vpnDetection:z,locationHistory:_,workLocation:o,knownLocations:he,browserInfo:{userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}},H=new Blob([JSON.stringify(M,null,2)],{type:"application/json"}),q=URL.createObjectURL(H),ne=document.createElement("a");ne.href=q,ne.download=`gps-diagnostics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(q)},We=()=>{if(!d)return;const M=`${d[0]}, ${d[1]}`;navigator.clipboard.writeText(M),alert("Coordinates copied to clipboard!")},G=M=>M<1e3?`${Math.round(M)}m`:`${(M/1e3).toFixed(2)}km`;return f.useEffect(()=>{d&&J()},[d,J]),f.useEffect(()=>()=>{S&&navigator.geolocation.clearWatch(S)},[S]),i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(os,{className:"w-6 h-6"}),i.jsx("h2",{className:"text-xl font-bold",children:"GPS Diagnostics & Debugging"})]}),i.jsx("button",{onClick:r,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:"✕"})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold",children:b==="success"?"✅":b==="loading"?"⏳":"❌"}),i.jsx("div",{className:"text-xs opacity-90",children:"GPS Status"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold",children:u?`±${Math.round(u)}m`:"--"}),i.jsx("div",{className:"text-xs opacity-90",children:"Accuracy"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold",children:d&&o?G(ae(d[0],d[1],o.latitude,o.longitude)):"--"}),i.jsx("div",{className:"text-xs opacity-90",children:"Distance"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold",children:z?z.isVPN?"⚠️":"✅":"⏳"}),i.jsx("div",{className:"text-xs opacity-90",children:"VPN Check"})]})]})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("button",{onClick:ie,disabled:b==="loading",className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors",children:[i.jsx(Zr,{className:"w-4 h-4"}),i.jsx("span",{children:"Get GPS Reading"})]}),i.jsxs("button",{onClick:C?de:Ae,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${C?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:[i.jsx(fn,{className:"w-4 h-4"}),i.jsx("span",{children:C?"Stop Tracking":"Start Tracking"})]}),i.jsxs("button",{onClick:()=>Ne(!je),className:"flex items-center space-x-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[i.jsx(vt,{className:"w-4 h-4"}),i.jsx("span",{children:"Manual Input"})]}),i.jsxs("button",{onClick:J,disabled:B,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 transition-colors",children:[i.jsx(Kn,{className:"w-4 h-4"}),i.jsx("span",{children:"Check VPN"})]}),i.jsxs("button",{onClick:K,className:"flex items-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[i.jsx(Tr,{className:"w-4 h-4"}),i.jsx("span",{children:"Export Data"})]})]}),je&&i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[i.jsx("h3",{className:"font-semibold text-purple-800 mb-3",children:"Manual Coordinate Input"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"number",step:"any",placeholder:"Latitude (e.g., -6.91750000)",value:Y.lat,onChange:M=>te(H=>({...H,lat:M.target.value})),className:"px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),i.jsx("input",{type:"number",step:"any",placeholder:"Longitude (e.g., 107.61910000)",value:Y.lng,onChange:M=>te(H=>({...H,lng:M.target.value})),className:"px-3 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{className:"mt-3 flex justify-between",children:[i.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:"Use These Coordinates"}),i.jsxs("div",{className:"text-sm text-purple-600",children:["Quick fill:",i.jsx("button",{onClick:()=>te({lat:"-6.91750000",lng:"107.61910000"}),className:"ml-1 underline",children:"Bandung"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[i.jsx(fa,{className:"w-5 h-5"}),i.jsx("span",{children:"Current Location"})]}),d&&i.jsxs("button",{onClick:We,className:"flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-800",children:[i.jsx($r,{className:"w-4 h-4"}),i.jsx("span",{children:"Copy"})]})]}),b==="success"&&d?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-600",children:"Coordinates"}),i.jsxs("div",{className:"font-mono text-lg",children:[d[0].toFixed(8),", ",d[1].toFixed(8)]}),i.jsxs("div",{className:"text-sm text-green-600",children:["±",Math.round(u||0),"m accuracy"]})]}),o&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-600",children:"Distance to Work"}),i.jsx("div",{className:"font-semibold text-lg",children:G(ae(d[0],d[1],o.latitude,o.longitude))}),i.jsx("div",{className:`text-sm ${ae(d[0],d[1],o.latitude,o.longitude)<=o.radius_meters?"text-green-600":"text-red-600"}`,children:ae(d[0],d[1],o.latitude,o.longitude)<=o.radius_meters?"✅ Within work radius":"❌ Outside work radius"})]})]}):b==="loading"?i.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[i.jsx(ls,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Getting location..."})]}):b==="error"?i.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[i.jsx(Vt,{className:"w-4 h-4"}),i.jsx("span",{children:U})]}):i.jsx("div",{className:"text-gray-500",children:"No location data available"})]}),z&&i.jsxs("div",{className:`rounded-lg p-4 border ${z.isVPN?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[z.isVPN?i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-5 h-5 text-red-600"}),i.jsx("h3",{className:"font-semibold text-red-800",children:"VPN/Proxy Detected"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-5 h-5 text-green-600"}),i.jsx("h3",{className:"font-semibold text-green-800",children:"No VPN/Proxy Detected"})]}),i.jsxs("span",{className:`text-sm px-2 py-1 rounded ${z.confidence>70?"bg-red-200 text-red-800":z.confidence>40?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:[z.confidence,"% confidence"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("strong",{children:"Timezone:"})," ",z.timezone]}),z.publicIP&&i.jsxs("div",{className:"text-sm",children:[i.jsx("strong",{children:"Public IP:"})," ",z.publicIP]}),z.indicators.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium mb-1",children:"Indicators:"}),i.jsx("ul",{className:"text-sm space-y-1",children:z.indicators.map((M,H)=>i.jsxs("li",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-red-500",children:"•"}),i.jsx("span",{children:M})]},H))})]})]})]}),d&&i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Distance to Known Locations"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(he).map(([M,H])=>{const q=ae(d[0],d[1],H.lat,H.lng);return i.jsxs("div",{className:"bg-white rounded-lg p-3",children:[i.jsx("div",{className:"font-medium text-gray-800",children:H.name}),i.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[H.lat.toFixed(6),", ",H.lng.toFixed(6)]}),i.jsx("div",{className:`font-semibold ${q<1e3?"text-green-600":q<1e4?"text-yellow-600":"text-red-600"}`,children:G(q)})]},M)})})]}),_.length>0&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[i.jsx(nt,{className:"w-5 h-5"}),i.jsxs("span",{children:["Location History (",_.length,")"]})]}),i.jsxs("button",{onClick:()=>P(!ce),className:"flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-800",children:[ce?i.jsx(Ar,{className:"w-4 h-4"}):i.jsx(Dr,{className:"w-4 h-4"}),i.jsxs("span",{children:[ce?"Hide":"Show"," Raw Data"]})]})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:_.slice(0,10).map((M,H)=>i.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm text-gray-600",children:M.timestamp.toLocaleTimeString()}),ce?i.jsxs("div",{className:"font-mono text-xs text-gray-700 mt-1",children:[M.latitude.toFixed(8),", ",M.longitude.toFixed(8)]}):i.jsxs("div",{className:"text-sm font-medium",children:["±",Math.round(M.accuracy),"m accuracy"]}),M.distance&&i.jsxs("div",{className:`text-sm ${M.distance<=((o==null?void 0:o.radius_meters)||50)?"text-green-600":"text-red-600"}`,children:[G(M.distance)," from work"]})]}),M.speed&&M.speed>0&&i.jsxs("div",{className:"text-xs text-blue-600",children:[i.jsx(is,{className:"w-3 h-3 inline mr-1"}),Math.round(M.speed*3.6),"km/h"]})]})},H))}),_.length>10&&i.jsxs("div",{className:"text-sm text-gray-500 text-center mt-2",children:["Showing last 10 readings of ",_.length," total"]})]}),i.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[i.jsx("h3",{className:"font-semibold text-yellow-800 mb-3",children:"Troubleshooting Tips"}),i.jsxs("ul",{className:"text-sm text-yellow-700 space-y-2",children:[i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{children:"VPN Issues:"})," Disable VPN/proxy services as they can show incorrect locations"]})]}),i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{children:"GPS Accuracy:"})," Go outside or near windows for better GPS signal"]})]}),i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Browser Settings:"})," Allow location permission in browser settings"]})]}),i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Device Settings:"})," Enable high accuracy location mode in device settings"]})]}),i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Distance Issues:"})," If you're 491km away, you're likely using a VPN"]})]})]})]})]})]})})},Ye={TIMEOUT_FAST:3e3,TIMEOUT_MEDIUM:7e3,TIMEOUT_SLOW:12e3,CACHE_DURATION:300*1e3,CACHE_MAX_AGE:30*1e3,BATTERY_LOW_THRESHOLD:.2,BATTERY_CRITICAL_THRESHOLD:.1,ACCURACY_EXCELLENT:10,ACCURACY_GOOD:50,ACCURACY_ACCEPTABLE:100};class No{constructor(){ke(this,"cache",null);ke(this,"CONFIDENCE_DECAY_RATE",.1)}set(r){this.cache={...r,timestamp:Date.now()}}get(){if(!this.cache)return null;const r=Date.now()-this.cache.timestamp;if(r>Ye.CACHE_DURATION)return this.cache=null,null;const o=r/(60*1e3),d=Math.max(0,1-o*this.CONFIDENCE_DECAY_RATE),p=this.calculateConfidence(this.cache.accuracy);return{...this.cache,confidence:p*d,source:"cache"}}calculateConfidence(r){return r<=Ye.ACCURACY_EXCELLENT?1:r<=Ye.ACCURACY_GOOD?.8:r<=Ye.ACCURACY_ACCEPTABLE?.6:.4}clear(){this.cache=null}}const Si=new No,Po=(c={})=>{const[r,o]=f.useState({location:null,status:"idle",error:null,attempt:0,batteryLevel:null,isLowBattery:!1}),d=f.useRef(null),p=f.useRef(null),u=f.useCallback(async()=>{if("getBattery"in navigator)try{const _=(await navigator.getBattery()).level;o(D=>({...D,batteryLevel:_,isLowBattery:_<Ye.BATTERY_LOW_THRESHOLD}))}catch{}},[]),m=f.useCallback(async(T=1)=>new Promise((_,D)=>{var P;const C=[Ye.TIMEOUT_FAST,Ye.TIMEOUT_MEDIUM,Ye.TIMEOUT_SLOW],E=C[Math.min(T-1,C.length-1)],S=T<=2?c.enableHighAccuracy!==!1&&!r.isLowBattery:!1,se={enableHighAccuracy:S,timeout:E,maximumAge:T===1?Ye.CACHE_MAX_AGE:T===2?6e4:3e5},z=[`🛰️ Mencari sinyal GPS (percobaan ${T}/3)...`,`📡 Menggunakan GPS akurasi ${S?"tinggi":"normal"}...`,"🔄 Percobaan terakhir dengan pengaturan fleksibel..."],I=(T-1)*25+10;(P=c.onProgress)==null||P.call(c,z[T-1],I);let B=null,$=!1;const ce=()=>{B&&clearTimeout(B)};navigator.geolocation.getCurrentPosition(Y=>{var J;if($)return;$=!0,ce();const{latitude:te,longitude:je,accuracy:Ne}=Y.coords,he={latitude:te,longitude:je,accuracy:Ne,timestamp:Date.now(),source:"gps",confidence:Ne<=Ye.ACCURACY_EXCELLENT?1:Ne<=Ye.ACCURACY_GOOD?.8:Ne<=Ye.ACCURACY_ACCEPTABLE?.6:.4};c.enableCache!==!1&&Si.set(he);const ae=Ne<=10?"sangat akurat":Ne<=50?"akurat":Ne<=100?"cukup akurat":"kurang akurat";(J=c.onProgress)==null||J.call(c,`✅ GPS berhasil (${ae}, ±${Math.round(Ne)}m)`,100),_(he)},Y=>{var te;if(!$)if(ce(),T<3){const je=T===1?1e3:2e3;(te=c.onProgress)==null||te.call(c,`⚠️ Percobaan ${T} gagal, mencoba lagi...`,I+5),setTimeout(()=>{$||m(T+1).then(_).catch(D)},je)}else{$=!0;const je=new Error(So(Y));je.originalError=Y,je.attempt=T,D(je)}},se),B=setTimeout(()=>{var Y;$||(Y=c.onProgress)==null||Y.call(c,`⏳ GPS timeout setelah ${E/1e3}s, mencoba pengaturan lain...`,I+10)},E-1e3)}),[c.enableHighAccuracy,c.enableCache,r.isLowBattery,c.onProgress]),b=f.useCallback(async()=>{var T,_;try{(T=c.onProgress)==null||T.call(c,"Trying network location...",75);const D=new AbortController,C=setTimeout(()=>D.abort(),5e3),E=await fetch("https://ipapi.co/json/",{signal:(_=d.current)==null?void 0:_.signal});clearTimeout(C);const S=await E.json();if(S.latitude&&S.longitude)return{latitude:S.latitude,longitude:S.longitude,accuracy:1e3,timestamp:Date.now(),source:"network",confidence:.3}}catch{}return null},[c.onProgress]),y=f.useCallback(async()=>{var T,_,D;d.current&&d.current.abort(),d.current=new AbortController,o(C=>({...C,status:"loading",error:null,attempt:0}));try{if(c.enableCache!==!1){(T=c.onProgress)==null||T.call(c,"Checking cached location...",10);const z=Si.get();if(z&&z.confidence>.5)return o(I=>({...I,location:z,status:"success"})),(_=c.onProgress)==null||_.call(c,"Using cached location",100),z}const C=[];navigator.geolocation&&C.push(m(1).catch(()=>null)),C.push(b());const S=(await Promise.allSettled(C)).filter(z=>z.status==="fulfilled"&&z.value!==null).map(z=>z.value).sort((z,I)=>I.confidence-z.confidence);if(S.length===0)throw new Error("Unable to determine location");const se=S[0];return o(z=>({...z,location:se,status:"success"})),(D=c.onProgress)==null||D.call(c,"Location acquired successfully",100),se}catch(C){const E=C instanceof GeolocationPositionError?Pa(C):C instanceof Error?C.message:"Unknown GPS error";throw o(S=>({...S,status:"error",error:E})),new Error(E)}},[c.enableCache,m,b,c.onProgress]),U=f.useCallback((T,_={})=>{const D=_.interval||(r.isLowBattery?6e4:3e4);let C=null,E=null;const S=()=>{navigator.geolocation&&(C=navigator.geolocation.watchPosition(z=>{const{latitude:I,longitude:B,accuracy:$}=z.coords,ce={latitude:I,longitude:B,accuracy:$,timestamp:Date.now(),source:"gps",confidence:$<=50?.9:.7};Si.set(ce),T(ce)},z=>{console.warn("GPS watch error:",z)},{enableHighAccuracy:!r.isLowBattery,timeout:Ye.TIMEOUT_MEDIUM,maximumAge:Ye.CACHE_MAX_AGE})),E=setInterval(async()=>{try{const z=await y();T(z)}catch(z){console.warn("Location polling error:",z)}},D)},se=()=>{C!==null&&(navigator.geolocation.clearWatch(C),C=null),E&&(clearInterval(E),E=null)};return S(),se},[r.isLowBattery,y]);return f.useEffect(()=>{u()},[u]),f.useEffect(()=>()=>{d.current&&d.current.abort(),p.current&&clearTimeout(p.current)},[]),{...r,getCurrentLocation:y,watchLocation:U,clearCache:Si.clear.bind(Si),updateBatteryLevel:u}};function Pa(c){switch(c.code){case c.PERMISSION_DENIED:return"Akses lokasi ditolak. Buka pengaturan browser → Izinkan lokasi untuk situs ini.";case c.POSITION_UNAVAILABLE:return"GPS tidak tersedia. Pastikan GPS aktif dan Anda berada di area terbuka.";case c.TIMEOUT:return"GPS timeout. Mencari sinyal GPS lebih lama...";default:return"Kesalahan GPS. Periksa koneksi internet dan pengaturan lokasi."}}function So(c,r){const o=Pa(c),d=To(c);return`${o}

${d}`}function To(c){switch(c.code){case c.PERMISSION_DENIED:return`Langkah-langkah:
1. Klik ikon lokasi di address bar
2. Pilih "Selalu izinkan"
3. Refresh halaman
4. Atau buka Settings → Privacy → Location`;case c.POSITION_UNAVAILABLE:return`Langkah-langkah:
1. Pastikan GPS aktif di perangkat
2. Keluar ke area terbuka
3. Restart aplikasi GPS
4. Periksa mode pesawat tidak aktif`;case c.TIMEOUT:return`Langkah-langkah:
1. Tunggu beberapa detik
2. Pindah ke lokasi terbuka
3. Restart browser
4. Periksa koneksi internet`;default:return`Langkah-langkah:
1. Refresh halaman
2. Periksa koneksi internet
3. Restart browser
4. Coba lagi dalam beberapa menit`}}const Co=({status:c,progress:r,progressText:o,batteryLevel:d,isLowBattery:p,accuracy:u,source:m,onRetry:b})=>{const[y,U]=f.useState("");f.useEffect(()=>{if(c==="loading"){const E=setInterval(()=>{U(S=>S.length>=3?"":S+".")},500);return()=>clearInterval(E)}},[c]);const T=()=>{switch(c){case"loading":return i.jsx(Qn,{className:"w-4 h-4 animate-spin text-yellow-400"});case"success":switch(m){case"cache":return i.jsx(vt,{className:"w-4 h-4 text-blue-400"});case"network":return i.jsx(va,{className:"w-4 h-4 text-orange-400"});case"gps":default:return i.jsx(xa,{className:"w-4 h-4 text-green-400"})}case"error":return i.jsxs("div",{className:"relative",children:[i.jsx(vt,{className:"w-4 h-4 text-red-400"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]});default:return i.jsx(vt,{className:"w-4 h-4 text-gray-400"})}},_=()=>{switch(c){case"loading":return"border-yellow-400/30 bg-yellow-500/10";case"success":switch(m){case"cache":return"border-blue-400/30 bg-blue-500/10";case"network":return"border-orange-400/30 bg-orange-500/10";case"gps":default:return"border-green-400/30 bg-green-500/10"}case"error":return"border-red-400/30 bg-red-500/10";default:return"border-gray-400/30 bg-gray-500/10"}},D=E=>E<=10?{level:"Excellent",color:"text-green-400",icon:"🎯"}:E<=50?{level:"Good",color:"text-yellow-400",icon:"📍"}:E<=100?{level:"Fair",color:"text-orange-400",icon:"📌"}:{level:"Poor",color:"text-red-400",icon:"📍"},C=()=>{switch(m){case"cache":return{name:"Cached",description:"Using stored location",icon:"💾"};case"network":return{name:"Network",description:"IP-based location",icon:"🌐"};case"gps":default:return{name:"GPS",description:"Satellite location",icon:"🛰️"}}};return i.jsxs("div",{className:`border rounded-xl p-4 transition-all duration-300 ${_()}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[T(),i.jsx("span",{className:"text-sm font-medium text-white",children:"GPS Location"})]}),d!==null&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ns,{className:`w-4 h-4 ${p?"text-red-400":"text-green-400"}`}),i.jsxs("span",{className:`text-xs ${p?"text-red-400":"text-green-400"}`,children:[Math.round(d*100),"%"]})]})]}),c==="loading"&&i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.min(r,100)}%`}})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-300",children:[o,y]}),i.jsxs("div",{className:"text-xs text-yellow-400 font-medium",children:[Math.round(r),"%"]})]})]}),c==="success"&&u&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-gray-400",children:"Source:"}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:C().icon}),i.jsx("span",{className:"text-white",children:C().name})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{className:"text-gray-400",children:"Accuracy:"}),i.jsxs("span",{className:`${D(u).color} font-medium`,children:[D(u).icon," ",Math.round(u),"m"]})]})]}),i.jsx("div",{className:"text-xs text-gray-400",children:C().description})]}),c==="error"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-start space-x-2 mb-2",children:[i.jsx("span",{className:"text-red-400 text-sm",children:"❌"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs font-medium text-red-300 mb-1",children:"Tidak dapat mendeteksi lokasi"}),i.jsx("div",{className:"text-xs text-red-200 leading-relaxed",children:"Pastikan GPS aktif dan izin lokasi sudah diberikan"})]})]}),i.jsxs("div",{className:"mt-3 p-2 bg-red-500/5 border border-red-400/20 rounded",children:[i.jsx("div",{className:"text-xs text-red-200 mb-2 font-medium",children:"💡 Langkah troubleshooting:"}),i.jsxs("div",{className:"text-xs text-red-200 space-y-1",children:[i.jsx("div",{children:"1. Klik ikon 🔒 di address bar → Izinkan lokasi"}),i.jsx("div",{children:"2. Pastikan GPS aktif di perangkat"}),i.jsx("div",{children:"3. Keluar ke area terbuka"}),i.jsx("div",{children:"4. Refresh halaman jika perlu"})]})]})]}),b&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:b,className:"px-3 py-2 bg-red-500/20 border border-red-400/30 rounded-lg text-red-300 hover:bg-red-500/30 transition-colors text-xs font-medium flex items-center justify-center space-x-1",children:[i.jsx("span",{children:"🔄"}),i.jsx("span",{children:"Coba Lagi"})]}),i.jsxs("button",{onClick:()=>window.location.reload(),className:"px-3 py-2 bg-blue-500/20 border border-blue-400/30 rounded-lg text-blue-300 hover:bg-blue-500/30 transition-colors text-xs font-medium flex items-center justify-center space-x-1",children:[i.jsx("span",{children:"🔄"}),i.jsx("span",{children:"Refresh"})]})]})]}),p&&c==="loading"&&i.jsx("div",{className:"mt-2 p-2 bg-orange-500/10 border border-orange-400/30 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ns,{className:"w-3 h-3 text-orange-400"}),i.jsx("span",{className:"text-xs text-orange-300",children:"Battery saving mode active"})]})})]})};class Lo{constructor(){ke(this,"capabilities",null);ke(this,"detectionStrategies",[{name:"high_accuracy_fast",description:"GPS akurasi tinggi dengan timeout cepat",timeout:5e3,accuracy:!0,maxAge:1e4,priority:1},{name:"high_accuracy_medium",description:"GPS akurasi tinggi dengan timeout sedang",timeout:1e4,accuracy:!0,maxAge:3e4,priority:2},{name:"normal_accuracy",description:"GPS akurasi normal dengan timeout fleksibel",timeout:15e3,accuracy:!1,maxAge:6e4,priority:3},{name:"cached_location",description:"Lokasi tersimpan (jika tersedia)",timeout:2e4,accuracy:!1,maxAge:3e5,priority:4}])}async checkCapabilities(){var o;if(this.capabilities)return this.capabilities;const r={supported:"geolocation"in navigator,permissionStatus:"unknown",batteryLevel:null,connectionType:((o=navigator.connection)==null?void 0:o.effectiveType)||"unknown",isSecureContext:window.isSecureContext,userAgent:navigator.userAgent};if("permissions"in navigator)try{const d=await navigator.permissions.query({name:"geolocation"});r.permissionStatus=d.state}catch(d){console.warn("Permission API not available:",d)}if("getBattery"in navigator)try{const d=await navigator.getBattery();r.batteryLevel=d.level}catch(d){console.warn("Battery API not available:",d)}return this.capabilities=r,r}getDetailedError(r){const o={code:r.code,technicalMessage:r.message};switch(r.code){case r.PERMISSION_DENIED:return{...o,message:"Akses lokasi ditolak",userFriendlyMessage:"Browser memblokir akses ke lokasi Anda",troubleshootingSteps:["Klik ikon kunci 🔒 atau lokasi 📍 di address bar",'Pilih "Selalu izinkan lokasi untuk situs ini"',"Refresh halaman (F5 atau Ctrl+R)","Jika masih gagal, buka Settings browser → Privacy → Location"],suggestedActions:["Aktifkan izin lokasi di browser","Periksa pengaturan privacy browser","Coba browser berbeda jika masih gagal"],canRetry:!0,estimatedFixTime:"1-2 menit",code:r.code,technicalMessage:r.message};case r.POSITION_UNAVAILABLE:return{...o,message:"Lokasi tidak tersedia",userFriendlyMessage:"GPS tidak dapat menentukan posisi Anda saat ini",troubleshootingSteps:["Pastikan GPS aktif di pengaturan perangkat","Pindah ke area terbuka (hindari gedung tinggi)","Tunggu beberapa menit untuk sinyal GPS stabil","Restart aplikasi GPS jika perlu"],suggestedActions:["Aktifkan GPS di perangkat","Keluar ke area terbuka","Periksa mode pesawat tidak aktif","Restart perangkat jika perlu"],canRetry:!0,estimatedFixTime:"2-5 menit",code:r.code,technicalMessage:r.message};case r.TIMEOUT:return{...o,message:"GPS timeout",userFriendlyMessage:"Pencarian lokasi memakan waktu terlalu lama",troubleshootingSteps:["Tunggu beberapa detik dan coba lagi","Pindah ke lokasi dengan sinyal GPS lebih baik","Periksa koneksi internet stabil","Tutup aplikasi lain yang menggunakan GPS"],suggestedActions:["Coba lagi dengan sabar","Pindah ke area terbuka","Periksa koneksi internet","Restart aplikasi"],canRetry:!0,estimatedFixTime:"30 detik - 2 menit",code:r.code,technicalMessage:r.message};default:return{...o,message:"Kesalahan GPS tidak dikenal",userFriendlyMessage:"Terjadi masalah teknis dengan GPS",troubleshootingSteps:["Refresh halaman dan coba lagi","Periksa koneksi internet stabil","Tutup dan buka kembali browser","Coba lagi dalam beberapa menit"],suggestedActions:["Refresh halaman","Restart browser","Periksa koneksi internet","Hubungi support jika masalah berlanjut"],canRetry:!0,estimatedFixTime:"1-3 menit",code:r.code,technicalMessage:r.message}}}async detectLocationProgressive(r,o){const d=Date.now(),p=await this.checkCapabilities();if(!p.supported)throw new Error("GPS tidak didukung oleh browser ini");if(p.permissionStatus==="denied")throw new Error("Akses lokasi ditolak. Aktifkan izin lokasi di browser.");const u=this.getOptimizedStrategies(p);let m=null;for(let b=0;b<u.length;b++){const y=u[b];o==null||o(y);try{r==null||r(`🛰️ ${y.description}...`,b/u.length*80,y.name);const U=await this.tryLocationStrategy(y,r),T=Date.now()-d;return r==null||r("✅ GPS berhasil dideteksi!",100,y.name),{...U,strategy:y.name,detectionTime:T}}catch(U){m=U,console.warn(`Strategy ${y.name} failed:`,U),b<u.length-1&&(r==null||r(`⚠️ Strategi ${b+1} gagal, mencoba alternatif...`,(b+1)/u.length*80,y.name),await new Promise(T=>setTimeout(T,500)))}}throw m||new Error("Semua strategi GPS gagal")}tryLocationStrategy(r,o){return new Promise((d,p)=>{let u=!1;const m={enableHighAccuracy:r.accuracy,timeout:r.timeout,maximumAge:r.maxAge},b=setTimeout(()=>{u||(u=!0,p(new Error(`Strategy ${r.name} timeout after ${r.timeout}ms`)))},r.timeout+1e3);navigator.geolocation.getCurrentPosition(y=>{if(u)return;u=!0,clearTimeout(b);const{latitude:U,longitude:T,accuracy:_,timestamp:D}=y.coords;d({latitude:U,longitude:T,accuracy:_,timestamp:D||Date.now(),source:r.accuracy?"high-accuracy":"normal",confidence:this.calculateConfidence(_,r),strategy:r.name,detectionTime:0})},y=>{u||(u=!0,clearTimeout(b),p(y))},m)})}getOptimizedStrategies(r){let o=[...this.detectionStrategies];return r.batteryLevel&&r.batteryLevel<.2&&(o=o.filter(d=>!d.accuracy||d.timeout<1e4)),(r.connectionType==="slow-2g"||r.connectionType==="2g")&&o.forEach(d=>d.timeout*=1.5),o.sort((d,p)=>d.priority-p.priority)}calculateConfidence(r,o){let d=1;return r<=10?d*=1:r<=50?d*=.8:r<=100?d*=.6:d*=.4,o.accuracy?d*=1:d*=.8,o.maxAge>6e4&&(d*=.9),Math.max(.1,Math.min(1,d))}getStatusMessage(r,o){const d={checking:"🔍 Memeriksa kemampuan GPS...",high_accuracy_fast:"🎯 Mencari lokasi akurat (cepat)...",high_accuracy_medium:"📍 Mencari lokasi akurat...",normal_accuracy:"🗺️ Mencari lokasi normal...",cached_location:"💾 Menggunakan lokasi tersimpan...",network:"🌐 Menggunakan lokasi jaringan...",success:"✅ Lokasi berhasil ditemukan!",error:"❌ Gagal menemukan lokasi"};return d[o||r]||d[r]||r}getOptimizationTips(r){const o=[];return r.batteryLevel&&r.batteryLevel<.2&&o.push("🔋 Baterai rendah: menggunakan mode hemat untuk GPS"),(r.connectionType==="slow-2g"||r.connectionType==="2g")&&o.push("🐌 Koneksi lambat: membutuhkan waktu lebih lama"),r.isSecureContext||o.push("🔒 Situs tidak aman: beberapa fitur GPS mungkin terbatas"),r.permissionStatus==="prompt"&&o.push("📋 Izinkan akses lokasi ketika diminta"),o}}const Ti=new Lo,Mo=({onLocationDetected:c,onError:r,className:o="",autoStart:d=!1,showDebugInfo:p=!1})=>{const[u,m]=f.useState("idle"),[b,y]=f.useState(0),[U,T]=f.useState(""),[_,D]=f.useState(null),[C,E]=f.useState(null),[S,se]=f.useState(null),[z,I]=f.useState(null),[B,$]=f.useState(!1),[ce,P]=f.useState(0);f.useEffect(()=>{(async()=>{try{const ie=await Ti.checkCapabilities();I(ie),d&&ie.supported&&Y()}catch(ie){console.error("Failed to check GPS capabilities:",ie)}})()},[d]);const Y=f.useCallback(async()=>{m("checking"),y(0),se(null),E(null),P(J=>J+1);try{m("detecting");const J=await Ti.detectLocationProgressive((ie,Ae,de)=>{T(Ti.getStatusMessage(ie,de)),y(Ae)},ie=>{D(ie)});E(J),m("success"),y(100),T("✅ Lokasi berhasil ditemukan!"),c==null||c(J)}catch(J){const ie=J,Ae=Ti.getDetailedError(ie);se(Ae),m("error"),T(`❌ ${Ae.message}`),r==null||r(Ae)}},[c,r]),te=()=>{switch(u){case"checking":case"detecting":return"border-yellow-400/30 bg-yellow-500/10";case"success":return"border-green-400/30 bg-green-500/10";case"error":return"border-red-400/30 bg-red-500/10";default:return"border-gray-400/30 bg-gray-500/10"}},je=()=>{switch(u){case"checking":return i.jsx(un,{className:"w-5 h-5 animate-spin text-blue-400"});case"detecting":return i.jsx(xa,{className:"w-5 h-5 animate-pulse text-yellow-400"});case"success":return i.jsx(Ei,{className:"w-5 h-5 text-green-400"});case"error":return i.jsxs("div",{className:"relative",children:[i.jsx(Vt,{className:"w-5 h-5 text-red-400"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-ping"})]});default:return i.jsx(vt,{className:"w-5 h-5 text-gray-400"})}},Ne=J=>J<=10?{text:"Sangat Akurat",color:"bg-green-500/20 text-green-300",icon:"🎯"}:J<=50?{text:"Akurat",color:"bg-blue-500/20 text-blue-300",icon:"📍"}:J<=100?{text:"Cukup Akurat",color:"bg-yellow-500/20 text-yellow-300",icon:"📌"}:{text:"Kurang Akurat",color:"bg-red-500/20 text-red-300",icon:"📍"},he=J=>{switch(J){case"high-accuracy":return{text:"GPS Akurat",color:"bg-green-500/20 text-green-300",icon:"🛰️"};case"normal":return{text:"GPS Normal",color:"bg-blue-500/20 text-blue-300",icon:"📡"};case"cached":return{text:"Tersimpan",color:"bg-purple-500/20 text-purple-300",icon:"💾"};case"network":return{text:"Jaringan",color:"bg-orange-500/20 text-orange-300",icon:"🌐"};default:return{text:J,color:"bg-gray-500/20 text-gray-300",icon:"❓"}}},ae=J=>J<1e3?`${J}ms`:`${(J/1e3).toFixed(1)}s`;return i.jsxs("div",{className:`border rounded-xl p-4 transition-all duration-300 ${te()} ${o}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[je(),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-white",children:"Enhanced GPS Detector"}),i.jsx("div",{className:"text-xs text-gray-400",children:"Deteksi lokasi cerdas dengan multiple strategi"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[(z==null?void 0:z.batteryLevel)&&i.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${z.batteryLevel<.2?"bg-red-500/20 text-red-300":"bg-green-500/20 text-green-300"}`,children:[i.jsx(ns,{className:"w-3 h-3"}),i.jsxs("span",{children:[Math.round(z.batteryLevel*100),"%"]})]}),z&&!z.isSecureContext&&i.jsx("div",{className:"px-2 py-1 bg-orange-500/20 text-orange-300 rounded-full text-xs",children:"🔒 HTTP"})]})]}),(u==="checking"||u==="detecting")&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-blue-400 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.min(b,100)}%`}})}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-gray-300",children:U}),i.jsxs("span",{className:"text-yellow-400 font-medium",children:[Math.round(b),"%"]})]}),_&&i.jsxs("div",{className:"mt-1 text-xs text-blue-300",children:["📡 Strategi: ",_.description]})]}),u==="success"&&C&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Koordinat"}),i.jsxs("div",{className:"font-mono text-xs text-white bg-black/20 p-2 rounded",children:[C.latitude.toFixed(6),i.jsx("br",{}),C.longitude.toFixed(6)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Informasi"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:`px-2 py-1 rounded text-xs ${Ne(C.accuracy).color}`,children:[Ne(C.accuracy).icon," ",Ne(C.accuracy).text]}),i.jsxs("div",{className:`px-2 py-1 rounded text-xs ${he(C.source).color}`,children:[he(C.source).icon," ",he(C.source).text]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[i.jsxs("div",{className:"text-center p-2 bg-black/20 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Akurasi"}),i.jsxs("div",{className:"text-white font-medium",children:["±",Math.round(C.accuracy),"m"]})]}),i.jsxs("div",{className:"text-center p-2 bg-black/20 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Confidence"}),i.jsxs("div",{className:"text-white font-medium",children:[Math.round(C.confidence*100),"%"]})]}),i.jsxs("div",{className:"text-center p-2 bg-black/20 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Waktu"}),i.jsx("div",{className:"text-white font-medium",children:ae(C.detectionTime)})]})]}),p&&i.jsxs("div",{className:"p-2 bg-black/20 rounded text-xs space-y-1",children:[i.jsx("div",{className:"text-gray-400",children:"Debug Info:"}),i.jsxs("div",{className:"text-gray-300",children:["Strategy: ",C.strategy]}),i.jsxs("div",{className:"text-gray-300",children:["Timestamp: ",new Date(C.timestamp).toISOString()]}),i.jsxs("div",{className:"text-gray-300",children:["Attempts: ",ce]})]})]}),u==="error"&&S&&i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:[i.jsxs("div",{className:"flex items-start space-x-2 mb-2",children:[i.jsx(Vt,{className:"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-red-300 mb-1",children:S.message}),i.jsx("div",{className:"text-xs text-red-200",children:S.userFriendlyMessage})]})]}),i.jsxs("button",{onClick:()=>$(!B),className:"mt-2 flex items-center space-x-2 text-xs text-red-300 hover:text-red-200 transition-colors",children:[i.jsx(ga,{className:"w-3 h-3"}),i.jsxs("span",{children:[B?"Sembunyikan":"Tampilkan"," panduan troubleshooting"]})]}),B&&i.jsxs("div",{className:"mt-3 p-3 bg-red-500/5 border border-red-400/20 rounded",children:[i.jsx("div",{className:"text-xs font-medium text-red-200 mb-2",children:"🛠️ Langkah-langkah troubleshooting:"}),i.jsx("div",{className:"space-y-1",children:S.troubleshootingSteps.map((J,ie)=>i.jsxs("div",{className:"text-xs text-red-200 flex items-start space-x-2",children:[i.jsxs("span",{className:"text-red-400 font-medium",children:[ie+1,"."]}),i.jsx("span",{className:"flex-1",children:J})]},ie))}),i.jsx("div",{className:"mt-3 text-xs font-medium text-red-200 mb-2",children:"💡 Saran tindakan:"}),i.jsx("div",{className:"space-y-1",children:S.suggestedActions.map((J,ie)=>i.jsxs("div",{className:"text-xs text-red-200 flex items-start space-x-2",children:[i.jsx("span",{className:"text-red-400",children:"•"}),i.jsx("span",{className:"flex-1",children:J})]},ie))}),i.jsxs("div",{className:"mt-2 text-xs text-red-300",children:["⏱️ Estimasi waktu perbaikan: ",S.estimatedFixTime]})]})]})}),z&&i.jsx("div",{className:"mt-3",children:Ti.getOptimizationTips(z).map((J,ie)=>i.jsx("div",{className:"text-xs text-blue-300 bg-blue-500/10 p-2 rounded mt-1",children:J},ie))}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:Y,disabled:u==="checking"||u==="detecting",className:"px-4 py-2 bg-blue-500/20 border border-blue-400/30 rounded-lg text-blue-300 hover:bg-blue-500/30 transition-colors text-sm font-medium flex items-center justify-center space-x-2 disabled:opacity-50",children:[i.jsx(ls,{className:`w-4 h-4 ${u==="checking"||u==="detecting"?"animate-spin":""}`}),i.jsx("span",{children:u==="detecting"?"Mendeteksi...":"Deteksi GPS"})]}),i.jsxs("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-500/20 border border-gray-400/30 rounded-lg text-gray-300 hover:bg-gray-500/30 transition-colors text-sm font-medium flex items-center justify-center space-x-2",children:[i.jsx(os,{className:"w-4 h-4"}),i.jsx("span",{children:"Refresh"})]})]}),p&&z&&i.jsxs("div",{className:"mt-3 p-2 bg-black/20 rounded text-xs",children:[i.jsx("div",{className:"text-gray-400 mb-1",children:"Device Capabilities:"}),i.jsxs("div",{className:"space-y-1 text-gray-300",children:[i.jsxs("div",{children:["GPS: ",z.supported?"✅ Supported":"❌ Not Supported"]}),i.jsxs("div",{children:["Permission: ",z.permissionStatus]}),i.jsxs("div",{children:["Secure Context: ",z.isSecureContext?"✅ Yes":"⚠️ No (HTTP)"]}),i.jsxs("div",{children:["Connection: ",z.connectionType]}),z.batteryLevel&&i.jsxs("div",{children:["Battery: ",Math.round(z.batteryLevel*100),"%"]})]})]})]})},Eo=({onClose:c,currentError:r,deviceInfo:o})=>{const[d,p]=f.useState("permission"),[u,m]=f.useState(new Set),[b,y]=f.useState({});f.useEffect(()=>{var S;const E={platform:navigator.platform,userAgent:navigator.userAgent,language:navigator.language,online:navigator.onLine,cookieEnabled:navigator.cookieEnabled,geolocationSupported:"geolocation"in navigator,isSecureContext:window.isSecureContext,connectionType:((S=navigator.connection)==null?void 0:S.effectiveType)||"unknown"};y(E),r&&(r.includes("ditolak")||r.includes("denied")?p("permission"):r.includes("timeout")||r.includes("tidak tersedia")?p("signal"):(r.includes("akurasi")||r.includes("accuracy"))&&p("accuracy"))},[r]);const U=[{id:"permission",title:"Izin Akses Lokasi",description:"Memastikan browser memiliki izin untuk mengakses lokasi",icon:i.jsx(un,{className:"w-5 h-5"}),difficulty:"easy",estimatedTime:"1-2 menit",steps:["Klik ikon kunci 🔒 atau lokasi 📍 di address bar browser",'Pilih "Always allow location" atau "Selalu izinkan lokasi"',"Refresh halaman dengan F5 atau Ctrl+R","Jika masih gagal, buka Settings browser → Privacy & Security → Site Settings → Location","Pastikan situs ini diizinkan mengakses lokasi"],tips:["Chrome: chrome://settings/content/location","Firefox: about:preferences#privacy → Permissions → Location","Safari: Safari → Preferences → Websites → Location","Hindari mode incognito/private untuk akses lokasi yang stabil"],commonIssues:["Izin ditolak secara permanen - perlu reset manual di settings","Mode incognito/private blocking - gunakan normal browsing","Corporate firewall blocking - hubungi IT admin"]},{id:"signal",title:"Sinyal GPS & Koneksi",description:"Memperbaiki masalah sinyal GPS dan koneksi internet",icon:i.jsx(fa,{className:"w-5 h-5"}),difficulty:"medium",estimatedTime:"3-5 menit",steps:["Keluar ke area terbuka (hindari gedung tinggi, basement, atau dalam ruangan)","Pastikan GPS aktif di pengaturan perangkat","Periksa koneksi internet stabil (WiFi atau data seluler)","Tutup aplikasi lain yang menggunakan GPS","Restart GPS: Settings → Location → Turn OFF → Wait 10s → Turn ON","Tunggu 2-3 menit untuk GPS lock pertama kali"],tips:["GPS bekerja lebih baik di area terbuka","Hindari penggunaan saat cuaca buruk (hujan lebat, badai)","Posisi tegak lebih baik dari posisi tidur/miring","Android: Clear GPS data di Settings → Apps → GPS/Location"],commonIssues:["GPS cold start membutuhkan waktu 2-5 menit","Indoor positioning kurang akurat","Interference dari perangkat elektronik lain"]},{id:"accuracy",title:"Akurasi & Performance",description:"Meningkatkan akurasi dan kecepatan deteksi GPS",icon:i.jsx(vt,{className:"w-5 h-5"}),difficulty:"medium",estimatedTime:"2-3 menit",steps:['Aktifkan "High accuracy mode" di pengaturan lokasi perangkat',"Pastikan Google Location Services aktif (Android)","Update Google Play Services ke versi terbaru","Kalibrasi kompas: buka Google Maps → kalibrasi dengan gerakan angka 8","Clear cache aplikasi browser","Disable VPN atau proxy service"],tips:["High accuracy mode menggunakan GPS + WiFi + Mobile data","Kalibrasi kompas secara berkala untuk akurasi yang lebih baik","Hindari penggunaan VPN karena dapat mengubah lokasi","Restart perangkat jika GPS masih tidak akurat"],commonIssues:["VPN/Proxy menyebabkan lokasi salah","Cached location data yang usang","Interference dari metal objects atau magnet"]},{id:"device",title:"Pengaturan Perangkat",description:"Optimasi pengaturan perangkat untuk GPS",icon:i.jsx(Kr,{className:"w-5 h-5"}),difficulty:"medium",estimatedTime:"3-4 menit",steps:["Periksa mode hemat baterai tidak membatasi GPS","Pastikan tanggal dan waktu perangkat akurat","Update sistem operasi ke versi terbaru","Restart perangkat untuk refresh GPS subsystem","Periksa storage space - GPS membutuhkan ruang untuk cache",'Disable "Mock location" atau developer options'],tips:["Battery saver mode dapat membatasi GPS accuracy","Wrong time/date dapat mengganggu GPS calculations","Developer options → Mock location apps → None","Android: Settings → Location → Improve accuracy → WiFi scanning ON"],commonIssues:["Power saving mode limiting GPS performance","Incorrect system time affecting GPS calculations","Mock location apps interfering with real GPS"]},{id:"browser",title:"Pengaturan Browser",description:"Optimasi browser untuk geolocation API",icon:i.jsx(Gr,{className:"w-5 h-5"}),difficulty:"easy",estimatedTime:"2-3 menit",steps:["Update browser ke versi terbaru","Clear browser cache dan cookies","Disable browser extensions yang mungkin interfere","Periksa browser tidak dalam mode privacy/incognito","Reset location permissions: Settings → Site Settings → Location → Reset","Coba browser berbeda sebagai test (Chrome, Firefox, Safari)"],tips:["Chrome memiliki geolocation support terbaik","Firefox: about:config → geo.enabled → true","Safari: Develop → Disable Cross-Origin Restrictions","Edge: Settings → Site permissions → Location"],commonIssues:["Browser extensions blocking geolocation","Outdated browser dengan geolocation bugs","Privacy settings too restrictive"]},{id:"network",title:"Koneksi & Firewall",description:"Mengatasi masalah network dan corporate firewall",icon:i.jsx(va,{className:"w-5 h-5"}),difficulty:"hard",estimatedTime:"5-10 menit",steps:["Periksa koneksi internet stabil dengan speed test","Coba ganti dari WiFi ke mobile data atau sebaliknya","Disable VPN, proxy, atau corporate firewall sementara","Flush DNS: ipconfig /flushdns (Windows) atau sudo dscacheutil -flushcache (Mac)","Restart router/modem jika menggunakan WiFi","Hubungi IT admin jika di corporate network"],tips:["Corporate firewall sering blok geolocation APIs","Public WiFi kadang blok location services","Mobile hotspot bisa jadi alternative test","DNS issues dapat affect location accuracy"],commonIssues:["Corporate firewall blocking Google Location APIs","ISP blocking certain geolocation services","Network congestion affecting API response times"]}],T=E=>{m(S=>new Set([...S,E]))},_=E=>{switch(E){case"easy":return"text-green-400 bg-green-500/20";case"medium":return"text-yellow-400 bg-yellow-500/20";case"hard":return"text-red-400 bg-red-500/20";default:return"text-gray-400 bg-gray-500/20"}},D=U.find(E=>E.id===d),C=u.size/U.length*100;return i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ga,{className:"w-6 h-6 text-blue-400"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"GPS Troubleshooting Guide"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Panduan lengkap mengatasi masalah GPS"})]})]}),i.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:i.jsx(la,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex",children:[i.jsxs("div",{className:"w-80 border-r border-gray-700 p-4",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Progress"}),i.jsxs("span",{className:"text-sm text-blue-400",children:[Math.round(C),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]}),r&&i.jsxs("div",{className:"mb-6 p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:[i.jsx("div",{className:"text-sm font-medium text-red-300 mb-1",children:"Current Issue:"}),i.jsx("div",{className:"text-xs text-red-200",children:r})]}),i.jsxs("div",{className:"mb-6 p-3 bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"System Info"}),i.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[i.jsxs("div",{children:["GPS: ",b.geolocationSupported?"✅ Supported":"❌ Not Supported"]}),i.jsxs("div",{children:["Secure: ",b.isSecureContext?"✅ HTTPS":"⚠️ HTTP"]}),i.jsxs("div",{children:["Online: ",b.online?"✅ Connected":"❌ Offline"]}),i.jsxs("div",{children:["Connection: ",b.connectionType]}),(o==null?void 0:o.batteryLevel)&&i.jsxs("div",{children:["Battery: ",Math.round(o.batteryLevel*100),"%"]})]})]}),i.jsx("div",{className:"space-y-2",children:U.map(E=>i.jsxs("button",{onClick:()=>p(E.id),className:`w-full text-left p-3 rounded-lg transition-colors ${d===E.id?"bg-blue-500/20 border border-blue-400/30":"bg-gray-800 hover:bg-gray-700"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[u.has(E.id)?i.jsx(Ei,{className:"w-4 h-4 text-green-400"}):E.icon,i.jsx("span",{className:"text-sm font-medium text-white",children:E.title})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${_(E.difficulty)}`,children:E.difficulty})]}),i.jsx("div",{className:"text-xs text-gray-400",children:E.description})]},E.id))})]}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto max-h-[80vh]",children:D&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[u.has(D.id)?i.jsx(Ei,{className:"w-8 h-8 text-green-400"}):i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:D.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-white",children:D.title}),i.jsx("p",{className:"text-gray-400",children:D.description})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${_(D.difficulty)}`,children:D.difficulty.toUpperCase()}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["⏱️ ",D.estimatedTime]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"📋 Langkah-langkah:"}),i.jsx("div",{className:"space-y-3",children:D.steps.map((E,S)=>i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:S+1}),i.jsx("div",{className:"text-sm text-gray-300",children:E})]},S))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"💡 Tips & Tricks:"}),i.jsx("div",{className:"space-y-2",children:D.tips.map((E,S)=>i.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-blue-500/10 border border-blue-400/20 rounded-lg",children:[i.jsx("span",{className:"text-blue-400 flex-shrink-0",children:"•"}),i.jsx("span",{className:"text-sm text-blue-200",children:E})]},S))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"⚠️ Common Issues:"}),i.jsx("div",{className:"space-y-2",children:D.commonIssues.map((E,S)=>i.jsxs("div",{className:"flex items-start space-x-2 p-3 bg-yellow-500/10 border border-yellow-400/20 rounded-lg",children:[i.jsx(Vt,{className:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-sm text-yellow-200",children:E})]},S))})]})]}),i.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[i.jsx("button",{onClick:()=>T(D.id),disabled:u.has(D.id),className:`px-6 py-3 rounded-lg font-medium transition-colors ${u.has(D.id)?"bg-green-500/20 text-green-400 border border-green-400/30":"bg-blue-500/20 text-blue-300 border border-blue-400/30 hover:bg-blue-500/30"}`,children:u.has(D.id)?i.jsxs("span",{className:"flex items-center space-x-2",children:[i.jsx(Ei,{className:"w-4 h-4"}),i.jsx("span",{children:"Completed"})]}):i.jsx("span",{children:"Mark as Completed"})}),i.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-purple-500/20 border border-purple-400/30 rounded-lg text-purple-300 hover:bg-purple-500/30 transition-colors font-medium flex items-center space-x-2",children:[i.jsx(ls,{className:"w-4 h-4"}),i.jsx("span",{children:"Test GPS Now"})]})]})]})})]})]})})},Io=(c=!1,r=!1)=>ka.divIcon({className:`custom-hospital-marker animated-pinpoint ${c?"marker-active":""} ${r?"marker-selected":""}`,html:`
      <div class="hospital-pinpoint interactive-marker" data-marker-type="hospital">
        <div class="hospital-pinpoint-ripple"></div>
        <div class="hospital-pinpoint-pulse ${c?"pulse-active":""}"></div>
        <div class="hospital-pinpoint-core ${r?"core-selected":""}"></div>
        <div class="hospital-pinpoint-cross"></div>
        <div class="marker-interaction-ring"></div>
      </div>
    `,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-20]}),Ao=(c=!1,r=!1,o=0)=>{const d=o<10?"accuracy-high":o<50?"accuracy-medium":"accuracy-low";return ka.divIcon({className:`custom-user-marker animated-pinpoint ${c?"marker-active":""} ${r?"marker-selected":""}`,html:`
      <div class="user-pinpoint interactive-marker ${d}" data-marker-type="user">
        <div class="user-pinpoint-ripple"></div>
        <div class="user-pinpoint-pulse ${c?"pulse-active":""}"></div>
        <div class="user-pinpoint-core ${r?"core-selected":""}"></div>
        <div class="user-pinpoint-dot"></div>
        <div class="marker-interaction-ring"></div>
        <div class="accuracy-indicator ${d}"></div>
      </div>
    `,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-20]})},Do=({center:c,userLocation:r,onMapReady:o,shouldRecenter:d,onRecenterComplete:p})=>{const u=Na();return f.useEffect(()=>{u&&o(u)},[u,o]),f.useEffect(()=>{if(u&&r&&d)try{const m=u.getZoom(),b=m<15?17:Math.max(m,16);u.flyTo(r,b,{animate:!0,duration:1.5,easeLinearity:.1,noMoveStart:!1}),console.log(`🗺️ Recentering map to user location: [${r[0].toFixed(6)}, ${r[1].toFixed(6)}]`),setTimeout(()=>{p()},1500)}catch(m){console.warn("Map flyTo failed, using fallback:",m);try{u.setView(r,17),p()}catch(b){console.error("Map fallback recentering failed:",b),p()}}},[u,r,d,p]),_o({click:m=>{console.log("Map clicked at:",m.latlng)},zoomend:()=>{const m=u.getZoom();console.log("Zoom changed to:",m)},moveend:()=>{const m=u.getCenter();console.log("Map moved to:",m)},resize:()=>{setTimeout(()=>{u.invalidateSize()},100)}}),f.useEffect(()=>{if(u){const m=()=>{setTimeout(()=>{u.invalidateSize()},100)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)}},[u]),null};let Xn=0,sa=performance.now(),Sa=60;const Ta=()=>{Xn++;const c=performance.now(),r=c-sa;r>=1e3&&(Sa=Math.round(Xn*1e3/r),Xn=0,sa=c),requestAnimationFrame(Ta)};requestAnimationFrame(Ta);const aa=()=>{const c=window.performance,r=c.memory;return{frameRate:Sa,memoryUsage:r?Math.round(r.usedJSHeapSize/1024/1024):0,renderTime:c.now(),markerCount:document.querySelectorAll(".interactive-marker").length}},Kt=c=>c<1e3?`${Math.round(c)}m`:`${(c/1e3).toFixed(1)}km`,zo=(c,r)=>`
    <div class="enhanced-popup hospital-popup">
      <div class="popup-header">
        <div class="popup-icon hospital-icon">
          <span>🏥</span>
        </div>
        <div class="popup-title">
          <h3>${c.name}</h3>
          <div class="verification-badge ${c.isVerified?"verified":"unverified"}">
            ${c.isVerified?"✓ Verified":"⚠ Unverified"}
          </div>
        </div>
      </div>
      
      <div class="popup-content">
        <div class="info-row">
          <span class="info-icon">📍</span>
          <span class="info-text">${c.address}</span>
        </div>
        
        ${r?`
        <div class="info-row distance-info">
          <span class="info-icon">📏</span>
          <span class="info-text">${Kt(r)} dari lokasi Anda</span>
          <span class="distance-status ${r<=100?"valid":"invalid"}">
            ${r<=100?"✓ Valid":"⚠ Jauh"}
          </span>
        </div>
        `:""}
        
        ${c.phone?`
        <div class="info-row">
          <span class="info-icon">📞</span>
          <span class="info-text">${c.phone}</span>
        </div>
        `:""}
        
        ${c.workingHours?`
        <div class="info-row">
          <span class="info-icon">🕐</span>
          <span class="info-text">${c.workingHours}</span>
        </div>
        `:""}
      </div>
      
      <div class="popup-actions">
        <button class="popup-btn primary" onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c.address)}', '_blank')">
          <span class="btn-icon">🧭</span>
          <span>Directions</span>
        </button>
        <button class="popup-btn secondary" onclick="navigator.clipboard.writeText('${c.address}')">
          <span class="btn-icon">📋</span>
          <span>Copy Address</span>
        </button>
      </div>
    </div>
  `,Oo=c=>{const r=c.accuracy<10?"Excellent":c.accuracy<50?"Good":"Fair",o=c.accuracy<10?"green":c.accuracy<50?"blue":"orange";return`
    <div class="enhanced-popup user-popup">
      <div class="popup-header">
        <div class="popup-icon user-icon">
          <span>📍</span>
        </div>
        <div class="popup-title">
          <h3>Your Location</h3>
          <div class="status-badge ${c.gpsStatus.toLowerCase()}">
            ${c.gpsStatus}
          </div>
        </div>
      </div>
      
      <div class="popup-content">
        <div class="info-row">
          <span class="info-icon">🌐</span>
          <span class="info-text">
            ${c.coordinates[0].toFixed(6)}, ${c.coordinates[1].toFixed(6)}
          </span>
        </div>
        
        <div class="info-row accuracy-row">
          <span class="info-icon">🎯</span>
          <span class="info-text">Accuracy: ±${Math.round(c.accuracy)}m</span>
          <span class="accuracy-status ${o}">${r}</span>
        </div>
        
        <div class="info-row">
          <span class="info-icon">🕐</span>
          <span class="info-text">Updated: ${new Date(c.timestamp).toLocaleTimeString()}</span>
        </div>
        
        ${c.distanceToHospital?`
        <div class="info-row distance-info">
          <span class="info-icon">🎯</span>
          <span class="info-text">${Kt(c.distanceToHospital)} to hospital</span>
        </div>
        `:""}
      </div>
      
      <div class="popup-actions">
        <button class="popup-btn primary" onclick="navigator.clipboard.writeText('${c.coordinates[0]}, ${c.coordinates[1]}')">
          <span class="btn-icon">📋</span>
          <span>Copy Coordinates</span>
        </button>
        <button class="popup-btn secondary" onclick="navigator.geolocation.getCurrentPosition(function(pos) { console.log('Location refreshed'); })">
          <span class="btn-icon">🔄</span>
          <span>Refresh</span>
        </button>
      </div>
    </div>
  `},Ro=({userData:c})=>{var gi,xi;const[r,o]=f.useState(new Date),[d,p]=f.useState(!1),[u,m]=f.useState("checkin"),[b,y]=f.useState({checkInTime:null,checkOutTime:null,workingHours:"00:00:00",overtimeHours:"00:00:00",breakTime:"00:00:00",location:"RS. Kediri Medical Center"}),[U,T]=f.useState(!1),[_,D]=f.useState(null),[C,E]=f.useState(null),[S,se]=f.useState(0),[z,I]=f.useState(""),B=Po({enableHighAccuracy:!b.isCheckedIn,enableCache:!0,enableBatteryOptimization:!0,onProgress:(x,j)=>{se(j),I(x)}}),$=f.useMemo(()=>{const x=B.location;if(!x)return null;const j=parseFloat(x.latitude.toString()),A=parseFloat(x.longitude.toString());return yt(j,A)?ei(j,A):(console.warn("Invalid user coordinates detected:",{lat:j,lng:A}),null)},[B.location]),ce=B.status,P=((gi=B.location)==null?void 0:gi.accuracy)||null,[Y,te]=f.useState(!1),[je,Ne]=f.useState([]),[he,ae]=f.useState([]),[J,ie]=f.useState(null),Ae=f.useRef(null),[de,Ue]=f.useState(null),[K,We]=f.useState(!1),[G,M]=f.useState("loading"),[H,q]=f.useState({frameRate:60,memoryUsage:0,renderTime:0,markerCount:0}),[ne,X]=f.useState(0),[w,Q]=f.useState(Date.now()),[O,ge]=f.useState(!1),[ve,De]=f.useState(!1),[ye,Oe]=f.useState(null),[bt,st]=f.useState(!1),[k,Te]=f.useState(null),[$e,He]=f.useState(!1),[Me,ze]=f.useState(null),[W,Qe]=f.useState(null),[_t,Tt]=f.useState(!1),Re=[-7.8481,112.0178],[Pe,Ve]=f.useState(1),[Ct]=f.useState(5),[Qt,Di]=f.useState("weekly"),[Dt,Lt]=f.useState({type:"annual",startDate:"",endDate:"",reason:"",days:1}),[di]=f.useState([{date:"2025-08-02",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-08-01",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-31",checkIn:"07:45",checkOut:"16:15",status:"Present",hours:"8h 30m"},{date:"2025-07-30",checkIn:"08:00",checkOut:"16:30",status:"Late",hours:"8h 30m"},{date:"2025-07-29",checkIn:"-",checkOut:"-",status:"Sick Leave",hours:"0h 0m"},{date:"2025-07-28",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-27",checkIn:"07:35",checkOut:"16:25",status:"Present",hours:"8h 50m"},{date:"2025-07-26",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-25",checkIn:"08:15",checkOut:"16:30",status:"Late",hours:"8h 15m"},{date:"2025-07-24",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-23",checkIn:"-",checkOut:"-",status:"Annual Leave",hours:"0h 0m"},{date:"2025-07-22",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-21",checkIn:"07:40",checkOut:"16:20",status:"Present",hours:"8h 40m"},{date:"2025-07-20",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"},{date:"2025-07-19",checkIn:"07:30",checkOut:"16:30",status:"Present",hours:"9h 0m"}]),[at]=f.useState({totalDays:22,presentDays:20,lateDays:2,absentDays:0,overtimeHours:15.5,leaveBalance:12});f.useEffect(()=>{const x=setInterval(()=>{if(o(new Date),d&&b.checkInTime){const j=new Date-new Date(b.checkInTime),A=Math.floor(j/(1e3*60*60)),le=Math.floor(j%(1e3*60*60)/(1e3*60)),ue=Math.floor(j%(1e3*60)/1e3);y(be=>({...be,workingHours:`${A.toString().padStart(2,"0")}:${le.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`}))}},1e3);return()=>clearInterval(x)},[d,b.checkInTime]),f.useEffect(()=>{let x=0;const j=3,A=2e3,le=async()=>{try{await ti()}catch(ue){console.error(`GPS detection attempt ${x+1} failed:`,ue),x++,x<j?setTimeout(le,A*x):E("GPS auto-detection failed after 3 attempts. Please enable location manually.")}};le(),$t()},[]),f.useEffect(()=>{$&&k&&jn()},[$,k]);const gn=f.useCallback(x=>{Ae.current=x,Ue(x),M("ready"),console.log("Map initialized successfully")},[]),zt=f.useCallback(()=>{We(!1)},[]),zi=f.useCallback(()=>{if($&&yt($[0],$[1]))return $;const x=wt();return yt(x[0],x[1])?x:hi()},[$]),xn=f.useCallback(()=>$&&P?P<10?18:P<50?17:16:$?17:15,[$,P]);f.useEffect(()=>{if($&&de){const x=de.getCenter();Ot(x.lat,x.lng,$[0],$[1])>100&&We(!0)}},[$,de]);const Ot=(x,j,A,le)=>{const be=(A-x)*Math.PI/180,Ee=(le-j)*Math.PI/180,Z=Math.sin(be/2)*Math.sin(be/2)+Math.cos(x*Math.PI/180)*Math.cos(A*Math.PI/180)*Math.sin(Ee/2)*Math.sin(Ee/2);return 6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))*1e3},yt=(x,j)=>!isNaN(x)&&!isNaN(j)&&x>=-90&&x<=90&&j>=-180&&j<=180&&x!==0&&j!==0,ei=(x,j)=>{const A=Math.round(x*1e8)/1e8,le=Math.round(j*1e8)/1e8;return yt(A,le)?[A,le]:(console.warn("Invalid coordinates detected:",{lat:x,lng:j}),hi())},hi=()=>[-6.369230000000001,106.8310135],wt=()=>{var A,le;if((A=k==null?void 0:k.work_location)!=null&&A.latitude&&((le=k==null?void 0:k.work_location)!=null&&le.longitude)){const ue=parseFloat(k.work_location.latitude.toString()),be=parseFloat(k.work_location.longitude.toString());if(yt(ue,be))return ei(ue,be)}const[x,j]=Re;return yt(x,j)?ei(x,j):hi()},vn=()=>k!=null&&k.work_location?{latitude:k.work_location.latitude,longitude:k.work_location.longitude,name:k.work_location.name||"Work Location",address:k.work_location.address||"Work Address",radius:k.work_location.radius_meters||50,coordinates:[k.work_location.latitude,k.work_location.longitude]}:{latitude:Re[0],longitude:Re[1],name:"RS. Kediri Medical Center",address:"Jl. Ahmad Yani No. 123",radius:50,coordinates:Re},ti=async()=>{try{E(null),se(0),I("Initializing GPS...");const x=await B.getCurrentLocation(),{latitude:j,longitude:A,accuracy:le,source:ue}=x,be=wt(),Ee=Ot(j,A,be[0],be[1]);D(Ee);const Z=vn(),pe={latitude:j,longitude:A,accuracy:le,timestamp:new Date().toISOString(),distance_to_work:Ee,is_in_radius:Ee<=(Z.radius||50),work_location:{latitude:Z.latitude,longitude:Z.longitude,name:Z.name,radius_meters:Z.radius},browser_info:{user_agent:navigator.userAgent,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language},gps_source:ue,battery_level:B.batteryLevel,is_low_battery:B.isLowBattery},ct=j>=-11&&j<=6&&A>=95&&A<=141,dt=pe.browser_info.timezone.includes("Asia/Jakarta")||pe.browser_info.timezone.includes("Asia/Makassar")||pe.browser_info.timezone.includes("Asia/Jayapura");let Ce=0;const ht=[];dt||(Ce+=30,ht.push("Non-Indonesian timezone")),ct||(Ce+=40,ht.push("Coordinates outside Indonesia")),Ee>1e5&&(Ce+=30,ht.push("Very far from work location")),ue==="network"&&(Ce+=20,ht.push("Using network-based location")),pe.vpn_indicators={timezone_mismatch:!dt,coordinates_outside_indonesia:!ct,distance_from_expected:Ee,confidence_score:Ce},(Ce>=50||Ee>2e5)&&(ge(!0),console.warn("GPS Debug: Potential VPN/proxy detected",{confidence:Ce,indicators:ht,coordinates:[j,A],distance:Ee,source:ue}));try{await ln.submitGPSDebugData(pe)}catch(kt){console.warn("Could not submit GPS debug data:",kt)}return x}catch(x){throw console.error("GPS Detection failed:",x),E(x.message||"Terjadi kesalahan saat mengakses lokasi."),x}},Oi=f.useCallback((x,j)=>{X(ue=>ue+1),ie(x),ae(ue=>ue.map(be=>({...be,isActive:be.id===x,isSelected:be.id===x,lastInteraction:Date.now()})));const A=aa();q(A);const le=he.find(ue=>ue.id===x);if(le&&le.position&&de)try{de.flyTo(le.position,18,{animate:!0,duration:1,easeLinearity:.1}),console.log(`Zooming to ${j} marker at`,le.position)}catch(ue){console.warn("Failed to zoom to marker:",ue)}},[he,de]),Ri=f.useCallback(()=>{const x=[],j=wt();x.push({id:"hospital-main",type:"hospital",position:j,isActive:J==="hospital-main",isSelected:J==="hospital-main",lastInteraction:0}),$&&x.push({id:"user-location",type:"user",position:$,isActive:J==="user-location",isSelected:J==="user-location",lastInteraction:0}),ae(x)},[J,$]);f.useEffect(()=>{const x=setInterval(()=>{const j=Date.now();if(j-w>1e3){const A=aa();q(A),Q(j),A.memoryUsage>100&&console.warn(`High memory usage detected: ${A.memoryUsage}MB`),A.markerCount>10&&console.warn(`High marker count detected: ${A.markerCount} markers`)}},1e3);return()=>clearInterval(x)},[w]),f.useEffect(()=>{Ri()},[Ri]);const ui=f.useCallback(()=>{var x,j,A;return{name:((x=k==null?void 0:k.work_location)==null?void 0:x.name)||"RS. Kediri Medical Center",address:((j=k==null?void 0:k.work_location)==null?void 0:j.address)||"Jl. Ahmad Yani No. 123",distance:_,phone:((A=k==null?void 0:k.work_location)==null?void 0:A.phone)||"+62 354 123456",isVerified:!!(k!=null&&k.work_location),workingHours:"24/7 Emergency Services"}},[k,_]),bn=f.useCallback(()=>({coordinates:$||[0,0],accuracy:P||0,timestamp:Date.now(),gpsStatus:ce==="success"?"Active":ce==="loading"?"Searching":ce==="error"?"Error":"Idle",distanceToHospital:_}),[$,P,ce,_]),_n=(x,j)=>{console.log("GPS location update received:",x,j);const A=wt(),le=Ot(x[0],x[1],A[0],A[1]);D(le)},Bi=()=>{te(!0)},yn=()=>{te(!1)},et=async()=>{try{B.clearCache(),await B.updateBatteryLevel(),await ti()}catch(x){console.error("GPS retry failed:",x),E(x.message||"GPS retry failed")}await ti()},F=x=>{console.log("Enhanced GPS detection:",x),E(null);const j=wt(),A=Ot(x.latitude,x.longitude,j[0],j[1]);D(A),Oe(null),console.log("Enhanced GPS detected location:",{coordinates:[x.latitude,x.longitude],accuracy:x.accuracy,source:x.source,strategy:x.strategy,confidence:x.confidence,detectionTime:x.detectionTime})},$i=x=>{Oe(x),E(x.userFriendlyMessage),console.error("Enhanced GPS error:",{code:x.code,message:x.message,userFriendlyMessage:x.userFriendlyMessage,canRetry:x.canRetry})},Zi=()=>{De(!ve)},Hi=()=>{st(!0)},Fi=()=>{st(!1)},mi=x=>x.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),Gi=x=>x.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Bt=(()=>{const x=new Date;return di.filter(A=>{const le=new Date(A.date);if(Qt==="weekly"){const ue=new Date(x);return ue.setDate(x.getDate()-7),le>=ue}else if(Qt==="monthly"){const ue=new Date(x);return ue.setMonth(x.getMonth()-1),le>=ue}return!0})})(),ii=Math.ceil(Bt.length/Ct),pi=(Pe-1)*Ct,Ui=pi+Ct,wn=Bt.slice(pi,Ui),ni=x=>{Ve(x)},kn=x=>{Di(x),Ve(1)},$t=async()=>{He(!0),ze(null);try{const x=await ln.getCurrentSchedule();x?Te(x):ze("Anda belum memiliki jadwal")}catch(x){console.error("Error loading schedule:",x);let j="Gagal terhubung ke server";x.message&&(x.message.includes("No active schedule found")||x.message.includes("404")?j="Anda belum memiliki jadwal":x.message.includes("401")||x.message.includes("Unauthorized")?j="Sesi telah berakhir. Silakan login kembali.":x.message.includes("work_location")?j="Lokasi kerja belum dikonfigurasi. Hubungi administrator.":j=x.message),ze(j)}finally{He(!1)}},jn=async()=>{if($){Tt(!0);try{const x=await ln.validateCheckin($[0],$[1],P);Qe(x)}catch(x){console.error("Error validating check-in:",x);let j="Gagal memvalidasi check-in. Coba lagi.",A="VALIDATION_ERROR";x.message&&(j=x.message,(x.code||x.code)&&(A=x.code||x.code),(x.message.includes("SHIFT_NOT_ALLOWED")||x.message.includes("shift")&&x.message.includes("allowed"))&&(A="SHIFT_NOT_ALLOWED")),Qe({validation:{valid:!1,message:j,code:A,can_checkin:!1}})}finally{Tt(!1)}}},Nn=async()=>{var x,j,A,le,ue,be,Ee;if(!((x=W==null?void 0:W.validation)!=null&&x.can_checkin)){let Z="Check-in tidak diizinkan saat ini.";((j=W==null?void 0:W.validation)==null?void 0:j.code)==="SHIFT_NOT_ALLOWED"?Z=`❌ Shift Anda (${((A=k==null?void 0:k.shift_template)==null?void 0:A.nama_shift)||"tidak diketahui"}) tidak kompatibel dengan lokasi kerja "${((le=k==null?void 0:k.work_location)==null?void 0:le.name)||"tidak diketahui"}".

📞 Silakan hubungi administrator untuk penyesuaian konfigurasi jadwal.`:(ue=W==null?void 0:W.validation)!=null&&ue.message?Z=W.validation.message:$?k?_&&_>(((be=k.work_location)==null?void 0:be.radius_meters)||100)&&(Z=`📏 Anda terlalu jauh dari lokasi kerja (${Kt(_)}). Mendekatlah ke ${((Ee=k.work_location)==null?void 0:Ee.name)||"lokasi kerja"}.`):Z="📅 Jadwal tidak ditemukan. Hubungi administrator.":Z="📍 Lokasi belum terdeteksi. Aktifkan GPS dan coba lagi.",alert(Z);return}try{p(!0);const Z=new Date;y(pe=>({...pe,checkInTime:Z.toISOString(),checkOutTime:null}))}catch(Z){console.error("Error during check-in:",Z),p(!1),alert("Gagal melakukan check-in. Silakan coba lagi.")}},Pn=async()=>{p(!1);const x=new Date;y(j=>({...j,checkOutTime:x.toISOString()}))},Sn=()=>{alert(`Pengajuan cuti ${Dt.type} telah dikirim untuk persetujuan`),T(!1),Lt({type:"annual",startDate:"",endDate:"",reason:"",days:1})},Tn=x=>{switch(x){case"Present":return"text-green-400";case"Late":return"text-yellow-400";case"Absent":return"text-red-400";case"Sick Leave":return"text-blue-400";case"Annual Leave":return"text-purple-400";default:return"text-gray-400"}},fi=[{id:"checkin",icon:nt,label:"Check In"},{id:"history",icon:Hr,label:"History"},{id:"stats",icon:pn,label:"Stats"},{id:"leave",icon:It,label:"Leave"}],Zt=()=>{var x,j,A,le,ue,be,Ee,Z,pe,ct,dt,Ce,ht,kt,ut,Le,mt;switch(u){case"checkin":return i.jsxs("div",{className:"space-y-4 md:space-y-6 lg:space-y-8",children:[((x=k==null?void 0:k.shift_template)==null?void 0:x.nama_shift)!=="Sore"&&i.jsx("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20 mb-4
                            md:rounded-3xl md:p-6
                            lg:p-8`,children:$e?i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"inline-flex items-center space-x-3",children:[i.jsx("div",{className:"w-5 h-5 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"text-cyan-300",children:"Memuat jadwal..."})]})}):Me?i.jsx("div",{className:"text-center py-2",children:Me.includes("Anda belum memiliki jadwal")?i.jsxs("div",{children:[i.jsxs("div",{className:"inline-flex items-center space-x-3 px-4 py-3 rounded-2xl bg-blue-500/20 border border-blue-400/30",children:[i.jsx(It,{className:"w-5 h-5 text-blue-400"}),i.jsx("span",{className:"text-blue-300 font-medium",children:Me})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Silakan hubungi admin untuk mendapatkan jadwal jaga"})]}):i.jsxs("div",{className:"inline-flex items-center space-x-3 px-4 py-2 rounded-2xl bg-yellow-500/20 border border-yellow-400/50",children:[i.jsx(Vt,{className:"w-5 h-5 text-yellow-400"}),i.jsx("span",{className:"text-yellow-300",children:Me})]})}):k?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:((j=k.shift_template)==null?void 0:j.warna)||"#3b82f6"},children:i.jsx(nt,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:((A=k.shift_template)==null?void 0:A.nama_shift)||"Jadwal Jaga"}),i.jsxs("div",{className:"text-sm text-gray-300",children:[k.timing_info.shift_start," - ",k.timing_info.shift_end]})]})]}),i.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${k.schedule_status.status==="checkin_window"?"bg-green-500/20 text-green-400":k.schedule_status.status==="upcoming"?"bg-yellow-500/20 text-yellow-400":k.schedule_status.status==="in_progress"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:k.schedule_status.status==="checkin_window"?"✅ Bisa Check-in":k.schedule_status.status==="upcoming"?"⏳ Belum Waktunya":k.schedule_status.status==="in_progress"?"🔄 Sedang Jaga":"📋 "+k.schedule_status.status})]}),i.jsxs("div",{className:"bg-black/20 rounded-xl p-3 mb-3",children:[i.jsx("div",{className:"text-sm text-white mb-1 font-medium",children:k.timing_info.status}),i.jsx("div",{className:"text-xs text-gray-300",children:k.schedule_status.message})]}),k.work_location&&i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-300",children:[i.jsx(vt,{className:"w-4 h-4"}),i.jsx("span",{children:k.work_location.name}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Radius ",k.work_location.radius_meters,"m"]})]})]}):i.jsxs("div",{className:"text-center py-6",children:[i.jsxs("div",{className:"inline-flex items-center space-x-3 px-4 py-3 rounded-2xl bg-blue-500/20 border border-blue-400/30",children:[i.jsx(It,{className:"w-5 h-5 text-blue-400"}),i.jsx("span",{className:"text-blue-300 font-medium",children:"Anda belum memiliki jadwal"})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Silakan hubungi admin untuk mendapatkan jadwal jaga"})]})}),W&&((le=W.schedule_details)==null?void 0:le.shift_name)!=="Sore"&&i.jsxs("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl p-4 border mb-4 ${W.validation.valid?"border-green-400/50":W.validation.code==="SHIFT_NOT_ALLOWED"?"border-orange-400/50":"border-red-400/50"}`,children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("div",{className:`w-5 h-5 rounded-full ${W.validation.valid?"bg-green-400":W.validation.code==="SHIFT_NOT_ALLOWED"?"bg-orange-400":"bg-red-400"}`}),i.jsx("div",{className:`font-medium ${W.validation.valid?"text-green-300":W.validation.code==="SHIFT_NOT_ALLOWED"?"text-orange-300":"text-red-300"}`,children:W.validation.code==="SHIFT_NOT_ALLOWED"?i.jsxs("div",{children:[i.jsx("div",{className:"text-orange-300 font-semibold mb-1",children:"❌ Konfigurasi Shift Tidak Kompatibel"}),i.jsxs("div",{className:"text-sm text-orange-200 mb-2",children:["Shift Anda (",((ue=k==null?void 0:k.shift_template)==null?void 0:ue.nama_shift)||"tidak diketahui",') tidak sesuai dengan konfigurasi lokasi kerja "',((be=k==null?void 0:k.work_location)==null?void 0:be.name)||"tidak diketahui",'"']}),i.jsx("div",{className:"bg-orange-500/20 rounded-lg p-2 mt-2",children:i.jsxs("div",{className:"text-xs text-orange-100",children:["📞 ",i.jsx("strong",{children:"Solusi:"})," Hubungi administrator untuk:",i.jsx("br",{}),"• Penyesuaian konfigurasi shift di lokasi kerja",i.jsx("br",{}),"• Perubahan jadwal ke shift yang kompatibel"]})})]}):W.validation.message})]}),W.schedule_details&&W.validation.code!=="SHIFT_NOT_ALLOWED"&&i.jsxs("div",{className:"text-xs text-gray-300",children:[i.jsxs("div",{children:["Shift: ",W.schedule_details.shift_name]}),i.jsxs("div",{children:["Jadwal: ",W.schedule_details.effective_start_time," - ",W.schedule_details.effective_end_time]}),W.schedule_details.is_late_checkin&&i.jsx("div",{className:"text-yellow-400 mt-1",children:"⚠️ Check-in terlambat tapi masih dalam toleransi"})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-base md:text-lg lg:text-xl text-purple-200 mb-2",children:Gi(r)}),i.jsx("div",{className:"dokter-responsive-title font-bold text-white",children:mi(r)})]}),i.jsxs("div",{className:`dokter-attendance-card bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20
                            md:rounded-3xl md:p-6
                            lg:p-8`,children:[i.jsx("div",{className:"text-center mb-4",children:i.jsxs("div",{className:`inline-flex items-center space-x-3 px-6 py-3 rounded-2xl transition-all duration-500 ${d?"bg-gradient-to-r from-green-500/30 to-emerald-500/30 border border-green-400/50":"bg-gradient-to-r from-gray-500/30 to-purple-500/30 border border-purple-400/50"}`,children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-400 animate-pulse":"bg-purple-400"}`}),i.jsx("span",{className:"text-white font-semibold",children:d?"🚀 Sedang Bekerja":"😴 Belum Check-in"})]})}),d&&i.jsxs("div",{className:`grid grid-cols-3 gap-3 mt-4
                                md:gap-4 md:mt-6
                                lg:gap-6 lg:mt-8`,children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-base md:text-lg lg:text-xl font-bold text-green-400",children:b.workingHours}),i.jsx("div",{className:"text-xs md:text-sm text-gray-300",children:"Jam Kerja"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-base md:text-lg lg:text-xl font-bold text-blue-400",children:b.breakTime}),i.jsx("div",{className:"text-xs md:text-sm text-gray-300",children:"Istirahat"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-base md:text-lg lg:text-xl font-bold text-purple-400",children:b.overtimeHours}),i.jsx("div",{className:"text-xs md:text-sm text-gray-300",children:"Overtime"})]})]}),(b.checkInTime||b.checkOutTime)&&i.jsx("div",{className:"mt-4 p-4 bg-black/20 rounded-2xl",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Check-in: "}),i.jsx("span",{className:"text-green-400",children:b.checkInTime?new Date(b.checkInTime).toLocaleTimeString("id-ID"):"-"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Check-out: "}),i.jsx("span",{className:"text-red-400",children:b.checkOutTime?new Date(b.checkOutTime).toLocaleTimeString("id-ID"):"-"})]})]})})]}),i.jsxs("div",{className:`dokter-checkin-buttons grid grid-cols-1 gap-4
                            md:grid-cols-2 md:gap-6
                            lg:gap-8`,children:[i.jsxs("button",{onClick:Nn,disabled:d||!((Ee=W==null?void 0:W.validation)!=null&&Ee.can_checkin)||_t,className:`dokter-attendance-button dokter-interactive-element relative group p-4 rounded-2xl transition-all duration-500 transform touch-manipulation min-h-[44px]
                            md:p-6 md:rounded-3xl
                            lg:p-8 lg:rounded-3xl
                            ${d||!((Z=W==null?void 0:W.validation)!=null&&Z.can_checkin)||_t?"opacity-50 cursor-not-allowed":"hover:scale-105 active:scale-95"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/30 to-emerald-600/30 rounded-3xl"}),i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-3xl border border-green-400/30"}),!d&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400/0 to-green-400/20 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative text-center",children:[i.jsx("div",{className:`w-12 h-12 mx-auto mb-3 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center
                                  md:w-16 md:h-16 md:mb-4 md:rounded-2xl
                                  lg:w-20 lg:h-20 lg:mb-6`,children:_t?i.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin md:w-8 md:h-8 lg:w-10 lg:h-10"}):i.jsx(cn,{className:"w-6 h-6 text-white md:w-8 md:h-8 lg:w-10 lg:h-10"})}),i.jsx("div",{className:"text-white font-bold text-base md:text-lg lg:text-xl",children:_t?"Validating...":"Check In"}),i.jsx("div",{className:"text-green-300 text-sm md:text-base",children:(pe=W==null?void 0:W.validation)!=null&&pe.can_checkin?"Siap check-in":((ct=W==null?void 0:W.validation)==null?void 0:ct.valid)===!1?"Tidak bisa check-in":"Mulai bekerja"})]})]}),i.jsxs("button",{onClick:Pn,disabled:!d,className:`dokter-attendance-button dokter-interactive-element relative group p-4 rounded-2xl transition-all duration-500 transform touch-manipulation min-h-[44px]
                            md:p-6 md:rounded-3xl
                            lg:p-8 lg:rounded-3xl
                            ${d?"hover:scale-105 active:scale-95":"opacity-50 cursor-not-allowed"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/30 to-pink-600/30 rounded-3xl"}),i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-3xl border border-purple-400/30"}),d&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400/0 to-purple-400/20 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative text-center",children:[i.jsx("div",{className:`w-12 h-12 mx-auto mb-3 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center
                                  md:w-16 md:h-16 md:mb-4 md:rounded-2xl
                                  lg:w-20 lg:h-20 lg:mb-6`,children:i.jsx(es,{className:"w-6 h-6 text-white md:w-8 md:h-8 lg:w-10 lg:h-10"})}),i.jsx("div",{className:"text-white font-bold text-base md:text-lg lg:text-xl",children:"Check Out"}),i.jsx("div",{className:"text-purple-300 text-sm md:text-base",children:"Selesai bekerja"})]})]})]}),i.jsxs("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 overflow-hidden
                            md:rounded-3xl
                            lg:rounded-3xl`,children:[i.jsxs("div",{className:`p-3 border-b border-white/10
                              md:p-4
                              lg:p-6`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-xl flex items-center justify-center",children:i.jsx(vt,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:"RS. Kediri Medical Center"}),i.jsx("div",{className:"text-green-300 text-sm",children:"Jl. Ahmad Yani No. 123"}),_&&i.jsxs("div",{className:`text-xs ${k!=null&&k.work_location&&_<=k.work_location.radius_meters?"text-green-300":"text-cyan-300"}`,children:["📏 ",Kt(_)," dari Anda",(k==null?void 0:k.work_location)&&_<=k.work_location.radius_meters&&" ✓ Dalam radius"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:ti,disabled:ce==="loading",className:"px-3 py-1.5 bg-purple-500/20 border border-purple-400/30 rounded-lg text-xs text-purple-300 hover:bg-purple-500/30 transition-colors disabled:opacity-50",children:"🔄 GPS"}),i.jsxs("button",{onClick:Zi,className:"px-3 py-1.5 bg-green-500/20 border border-green-400/30 rounded-lg text-xs text-green-300 hover:bg-green-500/30 transition-colors flex items-center space-x-1",title:"Enhanced GPS Detection with Better Error Handling",children:[i.jsx("span",{children:"🛰️"}),i.jsx("span",{children:"Smart GPS"})]}),i.jsxs("button",{onClick:Hi,className:"px-3 py-1.5 bg-yellow-500/20 border border-yellow-400/30 rounded-lg text-xs text-yellow-300 hover:bg-yellow-500/30 transition-colors flex items-center space-x-1",title:"GPS Troubleshooting Guide",children:[i.jsx("span",{children:"🎆"}),i.jsx("span",{children:"Help"})]}),i.jsxs("button",{onClick:Bi,className:"px-3 py-1.5 bg-orange-500/20 border border-orange-400/30 rounded-lg text-xs text-orange-300 hover:bg-orange-500/30 transition-colors flex items-center space-x-1",title:"Open GPS Diagnostics",children:[i.jsx(Or,{className:"w-3 h-3"}),i.jsx("span",{children:"Debug"})]}),i.jsx("button",{onClick:$t,disabled:$e,className:"px-3 py-1.5 bg-blue-500/20 border border-blue-400/30 rounded-lg text-xs text-blue-300 hover:bg-blue-500/30 transition-colors disabled:opacity-50",children:"📅 Jadwal"}),i.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"})]})]}),ve&&i.jsx("div",{className:"mt-3",children:i.jsx(Mo,{onLocationDetected:F,onError:$i,autoStart:!1,showDebugInfo:!1,className:""})}),!ve&&i.jsx("div",{className:"mt-3",children:i.jsx(Co,{status:B.status,progress:S,progressText:z,batteryLevel:B.batteryLevel,isLowBattery:B.isLowBattery,accuracy:P,source:(dt=B.location)==null?void 0:dt.source,onRetry:et})}),ce==="success"&&$&&i.jsxs("div",{className:"mt-3 p-3 bg-black/20 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"text-xs text-gray-300 mb-2 flex items-center justify-between",children:[i.jsx("span",{children:"📍 Koordinat Real-time"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${((Ce=B.location)==null?void 0:Ce.source)==="gps"?"bg-green-500/20 text-green-300":((ht=B.location)==null?void 0:ht.source)==="cache"?"bg-blue-500/20 text-blue-300":((kt=B.location)==null?void 0:kt.source)==="network"?"bg-orange-500/20 text-orange-300":"bg-gray-500/20 text-gray-300"}`,children:((ut=B.location)==null?void 0:ut.source)==="gps"?"🛰️ GPS":((Le=B.location)==null?void 0:Le.source)==="cache"?"💾 Cache":((mt=B.location)==null?void 0:mt.source)==="network"?"🌐 Network":"Unknown"})]}),i.jsxs("div",{className:"font-mono text-xs text-yellow-300 mb-2",children:[$[0].toFixed(8),", ",$[1].toFixed(8)]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"text-gray-400",children:["Zona waktu: ",Intl.DateTimeFormat().resolvedOptions().timeZone]}),i.jsxs("div",{className:"text-gray-400",children:["Akurasi: ±",Math.round(P||0),"m"]}),_&&i.jsxs("div",{className:`font-medium col-span-2 ${_>2e5?"text-red-400":_>1e3?"text-yellow-400":"text-green-400"}`,children:["📏 ",Kt(_)," ke RS",_>2e5&&" ⚠️ Sangat jauh!"]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-white/10",children:[i.jsx("span",{className:"text-xs text-gray-400",children:new Date().toLocaleTimeString("id-ID")}),i.jsxs("button",{onClick:()=>{const re=`${$[0]}, ${$[1]}`;navigator.clipboard.writeText(re),alert("Koordinat disalin ke clipboard!")},className:"text-xs text-blue-300 hover:text-blue-200 underline flex items-center space-x-1",children:["📋 ",i.jsx("span",{children:"Copy"})]})]})]}),C&&i.jsx("div",{className:"mt-2 text-xs text-red-300",children:C}),O&&_&&_>2e5&&i.jsx("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-400/30 rounded-xl",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Vt,{className:"w-5 h-5 text-red-400 mt-0.5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-red-300 mb-1",children:"🚨 GPS Location Warning"}),i.jsxs("div",{className:"text-xs text-red-200 mb-2",children:["Your location appears to be ",Kt(_)," away from work. This suggests you may be using a VPN or proxy service."]}),i.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[i.jsxs("button",{onClick:Bi,className:"px-2 py-1 bg-red-500/20 border border-red-400/30 rounded text-red-300 hover:bg-red-500/30 transition-colors",children:[i.jsx(os,{className:"w-3 h-3 inline mr-1"}),"Debug GPS"]}),i.jsx("button",{onClick:()=>ge(!1),className:"px-2 py-1 bg-gray-500/20 border border-gray-400/30 rounded text-gray-300 hover:bg-gray-500/30 transition-colors",children:"Dismiss"})]})]})]})})]}),i.jsxs("div",{className:"relative h-32 md:h-48 lg:h-64 overflow-hidden",children:[i.jsx("style",{children:`
                  /* Enhanced Leaflet popup styling */
                  .leaflet-popup-content-wrapper {
                    background: rgba(255, 255, 255, 0.98);
                    border-radius: 16px;
                    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(147, 51, 234, 0.2);
                    backdrop-filter: blur(20px);
                  }
                  .leaflet-popup-tip {
                    background: rgba(255, 255, 255, 0.98);
                    border: 1px solid rgba(147, 51, 234, 0.2);
                  }
                  .leaflet-control-zoom {
                    border: none !important;
                  }
                  .leaflet-control-zoom a {
                    background: rgba(0, 0, 0, 0.8) !important;
                    color: white !important;
                    border: 1px solid rgba(147, 51, 234, 0.4) !important;
                    backdrop-filter: blur(15px);
                    border-radius: 8px !important;
                  }
                  .leaflet-control-zoom a:hover {
                    background: rgba(147, 51, 234, 0.9) !important;
                    transform: scale(1.05);
                  }

                  /* Professional Hospital Pin */
                  .hospital-pin-container {
                    position: relative;
                    width: 40px;
                    height: 55px;
                  }
                  .hospital-pin-body {
                    position: absolute;
                    top: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 32px;
                    height: 45px;
                    background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 50%, #C084FC 100%);
                    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    animation: hospitalPinBounce 2s ease-in-out infinite;
                  }
                  .hospital-pin-icon {
                    color: white;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                  }
                  .hospital-pin-pulse {
                    position: absolute;
                    top: 8px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 48px;
                    height: 48px;
                    background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);
                    border-radius: 50%;
                    animation: hospitalPulse 2s ease-out infinite;
                  }
                  .hospital-pin-shadow {
                    position: absolute;
                    bottom: -5px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 20px;
                    height: 8px;
                    background: radial-gradient(ellipse, rgba(0, 0, 0, 0.3) 0%, transparent 70%);
                    border-radius: 50%;
                  }

                  /* Professional User Location Pin */
                  .user-pin-container {
                    position: relative;
                    width: 36px;
                    height: 48px;
                  }
                  .user-pin-body {
                    position: absolute;
                    top: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 28px;
                    height: 38px;
                    background: linear-gradient(135deg, #06B6D4 0%, #0EA5E9 50%, #3B82F6 100%);
                    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.4);
                    border: 2px solid rgba(255, 255, 255, 0.3);
                    animation: userPinBounce 1.5s ease-in-out infinite;
                  }
                  .user-pin-icon {
                    color: white;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                  }
                  .user-pin-pulse {
                    position: absolute;
                    top: 6px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 40px;
                    height: 40px;
                    background: radial-gradient(circle, rgba(6, 182, 212, 0.4) 0%, transparent 70%);
                    border-radius: 50%;
                    animation: userPulse 1.8s ease-out infinite;
                  }
                  .user-pin-accuracy-ring {
                    position: absolute;
                    top: 2px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 50px;
                    height: 50px;
                    border: 2px solid rgba(6, 182, 212, 0.3);
                    border-radius: 50%;
                    animation: accuracyRing 3s linear infinite;
                  }
                  .user-pin-shadow {
                    position: absolute;
                    bottom: -3px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 16px;
                    height: 6px;
                    background: radial-gradient(ellipse, rgba(0, 0, 0, 0.25) 0%, transparent 70%);
                    border-radius: 50%;
                  }

                  /* Animations */
                  @keyframes hospitalPinBounce {
                    0%, 100% { transform: translateX(-50%) translateY(0); }
                    50% { transform: translateX(-50%) translateY(-4px); }
                  }
                  @keyframes userPinBounce {
                    0%, 100% { transform: translateX(-50%) translateY(0); }
                    50% { transform: translateX(-50%) translateY(-3px); }
                  }
                  @keyframes hospitalPulse {
                    0% { opacity: 1; transform: translateX(-50%) scale(0.8); }
                    100% { opacity: 0; transform: translateX(-50%) scale(1.4); }
                  }
                  @keyframes userPulse {
                    0% { opacity: 1; transform: translateX(-50%) scale(0.7); }
                    100% { opacity: 0; transform: translateX(-50%) scale(1.2); }
                  }
                  @keyframes accuracyRing {
                    0% { opacity: 0.6; transform: translateX(-50%) scale(0.8) rotate(0deg); }
                    50% { opacity: 0.3; transform: translateX(-50%) scale(1.1) rotate(180deg); }
                    100% { opacity: 0.6; transform: translateX(-50%) scale(0.8) rotate(360deg); }
                  }
                `}),i.jsxs(wo,{center:zi(),zoom:xn(),scrollWheelZoom:!1,touchZoom:!0,doubleClickZoom:!1,dragging:!0,className:"h-full w-full rounded-none",style:{filter:"hue-rotate(280deg) saturate(1.2) brightness(0.95) contrast(1.1)",zIndex:1},children:[i.jsx(Do,{center:zi(),userLocation:$,onMapReady:gn,shouldRecenter:K,onRecenterComplete:zt}),i.jsx(ko,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),i.jsx(ia,{position:wt(),icon:Io(J==="hospital-main",J==="hospital-main"),eventHandlers:{click:()=>Oi("hospital-main","hospital"),mouseover:()=>{ae(re=>re.map(ee=>ee.id==="hospital-main"?{...ee,isActive:!0}:ee))},mouseout:()=>{J!=="hospital-main"&&ae(re=>re.map(ee=>ee.id==="hospital-main"?{...ee,isActive:!1}:ee))}},children:i.jsx(na,{closeButton:!1,className:"enhanced-popup-container",maxWidth:320,children:i.jsx("div",{dangerouslySetInnerHTML:{__html:zo(ui(),_)}})})}),$&&i.jsx(ia,{position:$,icon:Ao(J==="user-location",J==="user-location",P||0),eventHandlers:{click:()=>Oi("user-location","user"),mouseover:()=>{ae(re=>re.map(ee=>ee.id==="user-location"?{...ee,isActive:!0}:ee))},mouseout:()=>{J!=="user-location"&&ae(re=>re.map(ee=>ee.id==="user-location"?{...ee,isActive:!1}:ee))}},children:i.jsx(na,{closeButton:!1,className:"enhanced-popup-container",maxWidth:300,children:i.jsx("div",{dangerouslySetInnerHTML:{__html:Oo(bn())}})})})]}),i.jsxs("div",{className:"absolute top-4 left-4 bg-black/80 backdrop-blur-md rounded-2xl p-3 border border-white/20 z-[1000] shadow-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${ce==="success"?"bg-green-400":ce==="loading"?"bg-yellow-400":ce==="error"?"bg-red-400":"bg-gray-400"}`}),i.jsx("span",{className:"text-white text-sm font-medium",children:ce==="success"?"🎯 GPS Aktif":ce==="loading"?"📍 Mencari...":ce==="error"?"❌ GPS Error":"📍 GPS Ready"}),G!=="ready"&&i.jsxs("div",{className:"flex items-center space-x-1 ml-2 pl-2 border-l border-white/20",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-blue-300 text-xs",children:G==="loading"?"Loading Map...":"Map Error"})]})]}),ce==="success"&&_&&i.jsxs("div",{className:"text-cyan-300 text-xs mt-1 font-medium",children:["📏 ",Kt(_)," ke RS"]})]}),ce==="success"&&P&&i.jsx("div",{className:"absolute top-4 right-4 bg-black/80 backdrop-blur-md rounded-2xl p-2 border border-white/20 z-[1000] shadow-lg",children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-cyan-400 rounded-full"}),i.jsxs("span",{className:"text-cyan-300 text-xs font-medium",children:["±",Math.round(P),"m"]})]})}),de&&$&&i.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 z-[1000]",children:[i.jsx("button",{onClick:()=>We(!0),className:"bg-black/80 backdrop-blur-md border border-white/20 rounded-xl p-2 text-white hover:bg-white/10 transition-all duration-300 shadow-lg",title:"Recenter Map to Your Location",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M12 1v6m0 6v6M21 12h-6m-6 0H3"})]})}),i.jsx("button",{onClick:()=>{const re=wt();if(de&&re)try{de.flyTo(re,17,{animate:!0,duration:1.5,easeLinearity:.1})}catch(ee){console.warn("Failed to zoom to hospital:",ee)}},className:"bg-black/80 backdrop-blur-md border border-white/20 rounded-xl p-2 text-white hover:bg-white/10 transition-all duration-300 shadow-lg",title:"Zoom to Hospital/Work Location",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 9V5a3 3 0 0 0-6 0v4"}),i.jsx("rect",{x:"2",y:"9",width:"20",height:"11",rx:"2",ry:"2"}),i.jsx("circle",{cx:"12",cy:"15",r:"1"})]})})]}),i.jsx("div",{className:"absolute bottom-4 left-4 bg-black/80 backdrop-blur-md rounded-2xl p-3 border border-white/20 z-[1000] shadow-lg",children:i.jsxs("div",{className:"text-xs text-white space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[i.jsx("span",{children:"Performance:"}),i.jsxs("span",{className:`font-mono ${H.frameRate>=50?"text-green-400":H.frameRate>=30?"text-yellow-400":"text-red-400"}`,children:[Math.round(H.frameRate),"fps"]})]}),i.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[i.jsx("span",{children:"Memory:"}),i.jsxs("span",{className:`font-mono ${H.memoryUsage<50?"text-green-400":H.memoryUsage<100?"text-yellow-400":"text-red-400"}`,children:[H.memoryUsage,"MB"]})]}),i.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[i.jsx("span",{children:"Markers:"}),i.jsx("span",{className:"text-cyan-400 font-mono",children:H.markerCount})]}),i.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[i.jsx("span",{children:"Interactions:"}),i.jsx("span",{className:"text-purple-400 font-mono",children:ne})]})]})}),!1]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-6 border border-white/20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[i.jsx(nt,{className:"w-5 h-5 text-blue-400"}),i.jsx("span",{children:"Jam Kerja Hari Ini"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs text-green-300",children:"Live"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsx("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-2xl p-4 border border-green-400/30",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center",children:i.jsx(cn,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-bold text-green-400",children:b.checkInTime?new Date(b.checkInTime).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"--:--"}),i.jsx("div",{className:"text-xs text-green-300",children:"Check In"})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-2xl p-4 border border-purple-400/30",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-xl flex items-center justify-center",children:i.jsx(es,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-bold text-purple-400",children:b.checkOutTime?new Date(b.checkOutTime).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"--:--"}),i.jsx("div",{className:"text-xs text-purple-300",children:"Check Out"})]})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"Progress Hari Ini"}),i.jsx("span",{className:"text-cyan-400",children:(()=>{if(!d||!b.checkInTime)return"0%";const ee=(new Date-new Date(b.checkInTime))/(1e3*60*60);return`${Math.min(ee/8*100,100).toFixed(1)}%`})()})]}),i.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-3",children:i.jsx("div",{className:"bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500 relative overflow-hidden",style:{width:`${(()=>{if(!d||!b.checkInTime)return 0;const ee=(new Date-new Date(b.checkInTime))/(1e3*60*60);return Math.min(ee/8*100,100)})()}%`},children:i.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("div",{className:`p-3 rounded-xl border ${!d||!b.checkInTime?"bg-red-500/10 border-red-400/30":(new Date-new Date(b.checkInTime))/(1e3*60*60)>=8?"bg-green-500/10 border-green-400/30":"bg-red-500/10 border-red-400/30"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`text-lg font-bold ${(()=>{if(!d||!b.checkInTime)return"text-red-400";const ee=(new Date-new Date(b.checkInTime))/(1e3*60*60);return Math.max(8-ee,0)>0?"text-red-400":"text-green-400"})()}`,children:(()=>{if(!d||!b.checkInTime)return"8:00:00";const ee=(new Date-new Date(b.checkInTime))/(1e3*60*60),Je=Math.max(8-ee,0),Ht=Math.floor(Je),vi=Math.floor(Je%1*60),bi=Math.floor(Je%1*60%1*60);return Je>0?`${Ht.toString().padStart(2,"0")}:${vi.toString().padStart(2,"0")}:${bi.toString().padStart(2,"0")}`:"0:00:00"})()}),i.jsxs("div",{className:"text-xs text-gray-300 flex items-center justify-center space-x-1",children:[i.jsx(Vt,{className:"w-3 h-3"}),i.jsx("span",{children:"Kekurangan"})]})]})}),i.jsx("div",{className:`p-3 rounded-xl border ${!d||!b.checkInTime||(new Date-new Date(b.checkInTime))/(1e3*60*60)>8,"bg-blue-500/10 border-blue-400/30"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold text-blue-400",children:d?b.workingHours:"0:00:00"}),i.jsxs("div",{className:"text-xs text-gray-300 flex items-center justify-center space-x-1",children:[i.jsx(nt,{className:"w-3 h-3"}),i.jsx("span",{children:"Jam Kerja"})]})]})})]}),i.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-cyan-500/10 via-blue-500/10 to-purple-500/10 rounded-xl border border-cyan-400/20",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx("span",{className:"text-xs text-white font-bold",children:"💡"})}),i.jsx("div",{className:"text-xs text-cyan-200",children:(()=>{if(!d)return"Jangan lupa check-in untuk memulai perhitungan jam kerja!";if(!b.checkInTime)return"Mulai hari kerja Anda dengan semangat!";const ee=(new Date-new Date(b.checkInTime))/(1e3*60*60);return ee<4?"Semangat! Hari masih panjang untuk mencapai target 8 jam.":ee<6?"Kerja bagus! Sudah setengah perjalanan menuju target harian.":ee<8?"Hampir sampai target! Pertahankan semangat kerja Anda.":ee<9?"Target tercapai! Jam kerja tambahan akan dihitung sebagai overtime.":"Luar biasa! Anda sudah bekerja melebihi jam standar hari ini."})()})]})})]})]});case"history":return i.jsxs("div",{className:"space-y-3 md:space-y-4 lg:space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-3 mb-4 md:flex-row md:justify-between md:items-center md:space-y-0 md:mb-6 lg:mb-8",children:[i.jsx("h3",{className:"text-lg md:text-xl lg:text-2xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Riwayat Presensi"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Lr,{className:"w-4 h-4 text-purple-300 md:w-5 md:h-5"}),i.jsxs("select",{value:Qt,onChange:re=>kn(re.target.value),className:`bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-400
                             md:px-4 md:py-2.5 md:text-base
                             min-h-[44px] touch-manipulation`,children:[i.jsx("option",{value:"weekly",className:"bg-gray-800",children:"7 Hari"}),i.jsx("option",{value:"monthly",className:"bg-gray-800",children:"30 Hari"})]})]})]}),wn.map((re,ee)=>i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-white font-semibold",children:re.date}),i.jsx("span",{className:`text-sm font-medium ${Tn(re.status)}`,children:re.status})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Masuk: "}),i.jsx("span",{className:"text-white",children:re.checkIn})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Keluar: "}),i.jsx("span",{className:"text-white",children:re.checkOut})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Durasi: "}),i.jsx("span",{className:"text-white",children:re.hours})]})]})]},ee)),ii>1&&i.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[i.jsx("button",{onClick:()=>ni(Pe-1),disabled:Pe===1,className:`p-2 rounded-xl transition-all ${Pe===1?"bg-gray-500/20 text-gray-500 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:i.jsx(ma,{className:"w-4 h-4"})}),[...Array(ii)].map((re,ee)=>{const Je=ee+1;return i.jsx("button",{onClick:()=>ni(Je),className:`w-8 h-8 rounded-xl transition-all text-sm font-medium ${Pe===Je?"bg-gradient-to-r from-cyan-500 to-purple-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:Je},Je)}),i.jsx("button",{onClick:()=>ni(Pe+1),disabled:Pe===ii,className:`p-2 rounded-xl transition-all ${Pe===ii?"bg-gray-500/20 text-gray-500 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:i.jsx(dn,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center text-sm text-gray-300 mt-4",children:["Menampilkan ",pi+1,"-",Math.min(Ui,Bt.length)," dari ",Bt.length," data"]})]});case"stats":return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-6 text-center bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Statistik Bulanan"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-400",children:at.presentDays}),i.jsx("div",{className:"text-sm text-gray-300",children:"Hari Hadir"})]})}),i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:at.lateDays}),i.jsx("div",{className:"text-sm text-gray-300",children:"Hari Terlambat"})]})}),i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[at.overtimeHours,"h"]}),i.jsx("div",{className:"text-sm text-gray-300",children:"Overtime"})]})}),i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:at.leaveBalance}),i.jsx("div",{className:"text-sm text-gray-300",children:"Sisa Cuti"})]})})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Tingkat Kehadiran"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-300",children:"Kehadiran"}),i.jsxs("span",{className:"text-green-400",children:[(at.presentDays/at.totalDays*100).toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-500 h-2 rounded-full",style:{width:`${at.presentDays/at.totalDays*100}%`}})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-6 text-center",children:"Achievement Rings"}),i.jsxs("div",{className:"flex justify-center space-x-8",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"2"}),i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient1)",strokeWidth:"2",strokeDasharray:"85, 100",className:"animate-pulse"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#10B981"}),i.jsx("stop",{offset:"100%",stopColor:"#34D399"})]})})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:"28"}),i.jsx("div",{className:"text-xs text-green-300",children:"Days"})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"2"}),i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient2)",strokeWidth:"2",strokeDasharray:"72, 100",className:"animate-pulse"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),i.jsx("stop",{offset:"100%",stopColor:"#60A5FA"})]})})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:"7.2"}),i.jsx("div",{className:"text-xs text-blue-300",children:"Hours"})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"2"}),i.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient3)",strokeWidth:"2",strokeDasharray:"96, 100",className:"animate-pulse"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gradient3",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"#8B5CF6"}),i.jsx("stop",{offset:"100%",stopColor:"#A78BFA"})]})})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold text-white",children:"96%"}),i.jsx("div",{className:"text-xs text-purple-300",children:"Score"})]})})]})]})]})]});case"leave":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Manajemen Cuti"}),i.jsxs("button",{onClick:()=>T(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 px-4 py-2 rounded-xl flex items-center space-x-2 transition-all",children:[i.jsx(Cr,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Ajukan Cuti"})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Saldo Cuti"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"12"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Cuti Tahunan"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-400",children:"5"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Cuti Sakit"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"3"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Cuti Khusus"})]})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[i.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Pengajuan Terakhir"}),i.jsx("div",{className:"space-y-3",children:[{date:"15-20 Jul 2025",type:"Cuti Tahunan",status:"Approved",days:4},{date:"28 Jun 2025",type:"Cuti Sakit",status:"Approved",days:1},{date:"10-11 Jun 2025",type:"Cuti Khusus",status:"Pending",days:2}].map((re,ee)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-black/20 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-medium",children:re.type}),i.jsxs("div",{className:"text-sm text-gray-300",children:[re.date," • ",re.days," hari"]})]}),i.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${re.status==="Approved"?"bg-green-500/20 text-green-400":re.status==="Pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:re.status})]},ee))})]})]});default:return null}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white",children:i.jsxs("div",{className:`dokter-attendance-container w-full max-w-sm mx-auto min-h-screen relative overflow-hidden
                      md:max-w-2xl lg:max-w-4xl
                      md:px-4 lg:px-6`,children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[i.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-400/10 rounded-full blur-xl animate-pulse"}),i.jsx("div",{className:"absolute top-40 right-5 w-24 h-24 bg-purple-400/10 rounded-full blur-lg animate-bounce"}),i.jsx("div",{className:"absolute bottom-40 left-5 w-40 h-40 bg-pink-400/10 rounded-full blur-2xl animate-pulse"})]}),i.jsxs("div",{className:`flex justify-between items-center px-4 pt-3 pb-2 text-white text-sm font-semibold relative z-10
                        md:px-6 lg:px-8`,children:[i.jsx("span",{className:"md:hidden"}),i.jsx("div",{className:"flex items-center space-x-1 md:hidden",children:i.jsx("div",{className:"w-6 h-3 border border-white rounded-sm relative",children:i.jsx("div",{className:"w-4 h-2 bg-green-500 rounded-sm absolute top-0.5 left-0.5"})})})]}),i.jsx("div",{className:`px-4 pt-6 pb-4 relative z-10
                        md:px-6 md:pt-8 md:pb-6
                        lg:px-8 lg:pt-10 lg:pb-8`,children:i.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[i.jsx("h1",{className:"font-bold mb-2 bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",style:{fontSize:"clamp(1.875rem, 5vw, 3.5rem)"},children:"Smart Attendance"}),i.jsx("p",{className:"text-purple-200 text-base md:text-lg lg:text-xl",children:(c==null?void 0:c.name)||"Doctor"})]})}),i.jsxs("div",{className:`px-4 mb-4 relative z-10
                        md:px-6 md:mb-6
                        lg:px-8 lg:mb-8`,children:[i.jsxs("div",{className:`dokter-gaming-nav dokter-tab-navigation flex bg-gradient-to-r from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-sm rounded-lg border border-cyan-400/20 p-0.5 shadow-lg shadow-cyan-500/10
                          md:rounded-xl md:p-1
                          lg:rounded-2xl lg:p-1.5`,children:[i.jsx("div",{className:`absolute top-0.5 bottom-0.5 bg-gradient-to-r from-cyan-500/30 via-purple-500/30 to-pink-500/30 backdrop-blur-xl rounded-md border border-cyan-400/40 transition-all duration-300 ease-out ${u==="checkin"?"left-0.5 w-[calc(25%-2px)]":u==="history"?"left-[calc(25%+1px)] w-[calc(25%-2px)]":u==="stats"?"left-[calc(50%+1px)] w-[calc(25%-2px)]":"left-[calc(75%+1px)] w-[calc(25%-2px)]"}`,children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400/20 to-purple-400/20 rounded-md animate-pulse"})}),fi.map((x,j)=>{const A=x.icon,le=u===x.id;return i.jsxs("button",{onClick:()=>m(x.id),className:`dokter-gaming-nav-item dokter-tab-item relative z-10 flex-1 flex items-center justify-center space-x-1.5 px-2 py-1.5 rounded-md transition-all duration-200 group ${le?"text-cyan-300 scale-105":"text-gray-400 hover:text-cyan-400 hover:scale-102"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx(A,{className:`w-3.5 h-3.5 flex-shrink-0 transition-all duration-200 ${le?"filter drop-shadow-sm drop-shadow-cyan-400/50":"group-hover:drop-shadow-sm group-hover:drop-shadow-cyan-400/30"}`}),le&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-1 h-1 bg-cyan-400 rounded-full animate-ping opacity-60"}),i.jsx("div",{className:"absolute -bottom-0.5 -left-0.5 w-0.5 h-0.5 bg-purple-400 rounded-full animate-ping delay-200 opacity-60"})]})]}),i.jsx("span",{className:`text-xs font-medium truncate transition-all duration-200 ${le?"text-cyan-300 font-semibold":"group-hover:text-cyan-400"}`,children:x.label}),le&&i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full border border-slate-800 text-[6px] font-bold text-black flex items-center justify-center",children:"•"})]},x.id)})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/5 via-purple-500/5 to-pink-500/5 rounded-lg blur-xl -z-10"})]}),i.jsx("div",{className:`px-4 pb-20 relative z-10
                        md:px-6 md:pb-24
                        lg:px-8 lg:pb-28`,children:Zt()}),U&&i.jsx("div",{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4
                          md:p-6 lg:p-8`,children:i.jsxs("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20 w-full max-w-sm
                            md:rounded-3xl md:p-6 md:max-w-md
                            lg:p-8 lg:max-w-lg`,children:[i.jsx("h3",{className:`text-lg md:text-xl lg:text-2xl font-bold text-white mb-4 text-center
                          md:mb-6 lg:mb-8`,children:"Pengajuan Cuti"}),i.jsxs("div",{className:"space-y-3 md:space-y-4 lg:space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm md:text-base font-medium text-gray-300 mb-2",children:"Jenis Cuti"}),i.jsxs("select",{value:Dt.type,onChange:x=>Lt(j=>({...j,type:x.target.value})),className:`w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400
                               md:text-base lg:text-lg
                               min-h-[44px] touch-manipulation`,children:[i.jsx("option",{value:"annual",className:"bg-gray-800",children:"Cuti Tahunan"}),i.jsx("option",{value:"sick",className:"bg-gray-800",children:"Cuti Sakit"}),i.jsx("option",{value:"special",className:"bg-gray-800",children:"Cuti Khusus"})]})]}),i.jsxs("div",{className:`grid grid-cols-1 gap-3
                                md:grid-cols-2 md:gap-4
                                lg:gap-6`,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm md:text-base font-medium text-gray-300 mb-2",children:"Tanggal Mulai"}),i.jsx("input",{type:"date",value:Dt.startDate,onChange:x=>Lt(j=>({...j,startDate:x.target.value})),className:`w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400
                                 md:text-base lg:text-lg
                                 min-h-[44px] touch-manipulation`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm md:text-base font-medium text-gray-300 mb-2",children:"Tanggal Selesai"}),i.jsx("input",{type:"date",value:Dt.endDate,onChange:x=>Lt(j=>({...j,endDate:x.target.value})),className:`w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400
                                 md:text-base lg:text-lg
                                 min-h-[44px] touch-manipulation`})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm md:text-base font-medium text-gray-300 mb-2",children:"Alasan"}),i.jsx("textarea",{value:Dt.reason,onChange:x=>Lt(j=>({...j,reason:x.target.value})),className:`w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-400 h-20 resize-none
                               md:text-base md:h-24
                               lg:text-lg lg:h-32
                               touch-manipulation`,placeholder:"Jelaskan alasan pengajuan cuti..."})]})]}),i.jsxs("div",{className:`flex flex-col space-y-3 mt-4
                              md:flex-row md:space-y-0 md:space-x-3 md:mt-6
                              lg:mt-8`,children:[i.jsx("button",{onClick:()=>T(!1),className:`flex-1 bg-gray-500/20 hover:bg-gray-500/30 px-4 py-3 rounded-xl text-white transition-colors
                             min-h-[44px] touch-manipulation
                             md:text-base lg:text-lg`,children:"Batal"}),i.jsxs("button",{onClick:Sn,className:`flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 px-4 py-3 rounded-xl text-white transition-colors flex items-center justify-center space-x-2
                             min-h-[44px] touch-manipulation
                             md:text-base lg:text-lg`,children:[i.jsx(Jr,{className:"w-4 h-4"}),i.jsx("span",{children:"Kirim"})]})]})]})}),Y&&i.jsx(jo,{onLocationUpdate:_n,onClose:yn,workLocation:k!=null&&k.work_location?{latitude:k.work_location.latitude,longitude:k.work_location.longitude,name:k.work_location.name,address:k.work_location.address,radius_meters:k.work_location.radius_meters}:{latitude:Re[0],longitude:Re[1],name:"RS. Kediri Medical Center",address:"Jl. Ahmad Yani No. 123",radius_meters:50}}),bt&&i.jsx(Eo,{onClose:Fi,currentError:C||(ye==null?void 0:ye.userFriendlyMessage),deviceInfo:{userAgent:navigator.userAgent,isSecureContext:window.isSecureContext,connectionType:((xi=navigator.connection)==null?void 0:xi.effectiveType)||"unknown",batteryLevel:B.batteryLevel}})]})})},Wt=[{id:1,tanggal:"2024-01-15",shift:"Pagi",jam:"07:00 - 14:00",lokasi:"IGD",tarif:75e4,bonus:15e4,status:"completed",keterangan:"Jaga normal, tidak ada kasus emergency"},{id:2,tanggal:"2024-01-18",shift:"Malam",jam:"20:00 - 07:00",lokasi:"ICU",tarif:95e4,bonus:2e5,status:"completed",keterangan:"Jaga malam dengan 2 kasus critical"},{id:3,tanggal:"2024-01-22",shift:"Siang",jam:"14:00 - 20:00",lokasi:"Poli Umum",tarif:65e4,bonus:1e5,status:"pending",keterangan:"Jaga siang hari, antrian padat"},{id:4,tanggal:"2024-01-25",shift:"Pagi",jam:"07:00 - 14:00",lokasi:"Ruang Bedah",tarif:85e4,bonus:18e4,status:"scheduled",keterangan:"Stanby untuk operasi elektif"},{id:5,tanggal:"2024-01-28",shift:"Malam",jam:"20:00 - 07:00",lokasi:"IGD",tarif:95e4,bonus:25e4,status:"scheduled",keterangan:"Weekend shift, tarif premium"},{id:6,tanggal:"2024-01-30",shift:"Siang",jam:"14:00 - 20:00",lokasi:"Poli Spesialis",tarif:7e5,bonus:12e4,status:"scheduled",keterangan:"Konsultasi spesialis kardio"}],Jt=[{id:1,tanggal:"2024-01-16",tindakan:"Operasi Appendektomi",jenis:"Bedah Mayor",durasi:"2.5 jam",tarif:25e5,complexity:"high",tim:["dr. Andi","dr. Budi","Sister Citra"],status:"completed"},{id:2,tanggal:"2024-01-19",tindakan:"Konsultasi Kardiologi",jenis:"Konsultasi",durasi:"45 menit",tarif:35e4,complexity:"low",tim:["dr. Andi"],status:"completed"},{id:3,tanggal:"2024-01-21",tindakan:"Endoskopi",jenis:"Diagnostik",durasi:"1 jam",tarif:85e4,complexity:"medium",tim:["dr. Andi","Nurse Dewi"],status:"completed"},{id:4,tanggal:"2024-01-24",tindakan:"Emergency Surgery",jenis:"Bedah Darurat",durasi:"4 jam",tarif:42e5,complexity:"critical",tim:["dr. Andi","dr. Budi","dr. Celine","Sister Fiona"],status:"completed"},{id:5,tanggal:"2024-01-26",tindakan:"Pemeriksaan Rutin",jenis:"Check-up",durasi:"30 menit",tarif:2e5,complexity:"low",tim:["dr. Andi"],status:"pending"},{id:6,tanggal:"2024-01-29",tindakan:"Operasi Hernia",jenis:"Bedah Minor",durasi:"1.5 jam",tarif:18e5,complexity:"medium",tim:["dr. Andi","Sister Gina"],status:"scheduled"},{id:7,tanggal:"2024-02-01",tindakan:"Konsultasi Multidisiplin",jenis:"Konsultasi Tim",durasi:"2 jam",tarif:65e4,complexity:"high",tim:["dr. Andi","dr. Hendra","dr. Ina"],status:"scheduled"}],Bo=()=>{const[c,r]=f.useState("overview"),[o,d]=f.useState(1),[p,u]=f.useState(1),m=3,[b,y]=f.useState(!1);f.useEffect(()=>{const P=navigator.userAgent.toLowerCase();y(P.includes("ipad"))},[]);const U=P=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(P),T=P=>{const Y={completed:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30",label:"Selesai"},pending:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",label:"Tertunda"},scheduled:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",label:"Terjadwal"}},te=Y[P]||Y.pending;return i.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${te.bg} ${te.text} ${te.border}`,children:te.label})},_=P=>{const Y={low:{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",label:"Rendah",icon:"●"},medium:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",label:"Sedang",icon:"●●"},high:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30",label:"Tinggi",icon:"●●●"},critical:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30",label:"Kritis",icon:"●●●●"}},te=Y[P]||Y.low;return i.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${te.bg} ${te.text} ${te.border}`,children:[i.jsx("span",{className:"mr-2",children:te.icon}),te.label]})},D=Wt.reduce((P,Y)=>P+Y.tarif+Y.bonus,0),C=Jt.reduce((P,Y)=>P+Y.tarif,0),E=D+C,S=Wt.filter(P=>P.status==="completed").length,se=Jt.filter(P=>P.status==="completed").length,z=()=>{const P=(o-1)*m;return Wt.slice(P,P+m)},I=()=>{const P=(p-1)*m;return Jt.slice(P,P+m)},B=Math.ceil(Wt.length/m),$=Math.ceil(Jt.length/m),ce=({currentPage:P,totalPages:Y,onPageChange:te,type:je})=>i.jsxs("div",{className:"flex items-center justify-between mt-6 px-4",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Halaman ",P," dari ",Y]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>te(Math.max(1,P-1)),disabled:P===1,className:`p-2 rounded-lg border ${P===1?"border-gray-600 text-gray-600 cursor-not-allowed":"border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/10"} transition-colors`,children:i.jsx(ma,{className:"w-4 h-4"})}),i.jsx("div",{className:"flex items-center space-x-1",children:[...Array(Y)].map((Ne,he)=>i.jsx("button",{onClick:()=>te(he+1),className:`w-8 h-8 rounded-lg border transition-colors ${P===he+1?"border-emerald-500 bg-emerald-500/20 text-emerald-400":"border-gray-600 text-gray-400 hover:border-emerald-500/50"}`,children:he+1},he))}),i.jsx("button",{onClick:()=>te(Math.min(Y,P+1)),disabled:P===Y,className:`p-2 rounded-lg border ${P===Y?"border-gray-600 text-gray-600 cursor-not-allowed":"border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/10"} transition-colors`,children:i.jsx(dn,{className:"w-4 h-4"})})]})]});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:i.jsxs("div",{className:"w-full max-w-none px-4 md:px-6 lg:px-8 pt-8 pb-32",children:[i.jsxs("div",{className:"relative mb-8",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-600/30 via-green-600/30 to-teal-600/30 rounded-3xl backdrop-blur-2xl"}),i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-3xl border border-white/20"}),i.jsxs("div",{className:"relative p-8",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-400 via-green-500 to-teal-500 rounded-2xl flex items-center justify-center relative overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),i.jsx(ts,{className:"w-10 h-10 text-white relative z-10"})]}),i.jsxs("div",{className:"ml-6",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-emerald-400 to-green-400 bg-clip-text text-transparent mb-2",children:"Jasa Pelayanan (JASPEL)"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"Dashboard Pendapatan Dokter"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-green-500/10 rounded-2xl p-6 border border-emerald-400/20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-emerald-300 text-sm mb-1",children:"Total Pendapatan"}),i.jsx("p",{className:"text-3xl font-bold text-white",children:U(E)})]}),i.jsx(Mr,{className:"w-8 h-8 text-emerald-400"})]}),i.jsx("p",{className:"text-xs text-emerald-300 mt-2",children:"Jaga + Tindakan"})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-2xl p-6 border border-blue-400/20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-300 text-sm mb-1",children:"Shift Selesai"}),i.jsxs("p",{className:"text-3xl font-bold text-white",children:[S,"/",Wt.length]})]}),i.jsx(nt,{className:"w-8 h-8 text-blue-400"})]}),i.jsx("p",{className:"text-xs text-blue-300 mt-2",children:"Jaga terlaksana"})]}),i.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-2xl p-6 border border-purple-400/20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-purple-300 text-sm mb-1",children:"Tindakan Selesai"}),i.jsxs("p",{className:"text-3xl font-bold text-white",children:[se,"/",Jt.length]})]}),i.jsx(da,{className:"w-8 h-8 text-purple-400"})]}),i.jsx("p",{className:"text-xs text-purple-300 mt-2",children:"Prosedur medis"})]})]})]})]}),i.jsx("div",{className:"bg-white/5 backdrop-blur-2xl rounded-2xl p-2 mb-8 border border-white/10",children:i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"overview",label:"Ringkasan",icon:pn},{id:"jaga",label:"Jaga",icon:nt},{id:"tindakan",label:"Tindakan",icon:Mi}].map(({id:P,label:Y,icon:te})=>i.jsxs("button",{onClick:()=>r(P),className:`flex items-center justify-center px-6 py-3 rounded-xl font-medium transition-all duration-300 ${c===P?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-white/5"}`,children:[i.jsx(te,{className:"w-5 h-5 mr-2"}),Y]},P))})}),c==="overview"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl p-6 border border-white/10",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsx(nt,{className:"w-6 h-6 text-blue-400 mr-3"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"Statistik Jaga"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-2xl p-4 border border-blue-400/20",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-blue-300",children:"Total Pendapatan Jaga"}),i.jsx("span",{className:"text-white font-bold",children:U(D)})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-400/20",children:[i.jsx("p",{className:"text-green-300 text-sm",children:"Selesai"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:S})]}),i.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-400/20",children:[i.jsx("p",{className:"text-yellow-300 text-sm",children:"Tertunda"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:Wt.filter(P=>P.status==="pending").length})]})]})]})]}),i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl p-6 border border-white/10",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsx(Mi,{className:"w-6 h-6 text-purple-400 mr-3"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"Statistik Tindakan"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-2xl p-4 border border-purple-400/20",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-purple-300",children:"Total Pendapatan Tindakan"}),i.jsx("span",{className:"text-white font-bold",children:U(C)})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-400/20",children:[i.jsx("p",{className:"text-green-300 text-sm",children:"Selesai"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:se})]}),i.jsxs("div",{className:"bg-orange-500/10 rounded-xl p-4 border border-orange-400/20",children:[i.jsx("p",{className:"text-orange-300 text-sm",children:"Kompleks"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:Jt.filter(P=>P.complexity==="high"||P.complexity==="critical").length})]})]})]})]})]}),c==="jaga"&&i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(nt,{className:"w-6 h-6 text-blue-400 mr-3"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"Jadwal Jaga"})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[Wt.length," total jaga"]})]})}),i.jsx("div",{className:"divide-y divide-white/10",children:z().map(P=>i.jsx("div",{className:"p-6 hover:bg-white/5 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(It,{className:"w-4 h-4 text-emerald-400 mr-2"}),i.jsx("span",{className:"text-white font-semibold",children:P.tanggal}),i.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),i.jsx("span",{className:"text-blue-300",children:P.shift})]}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(vt,{className:"w-4 h-4 text-purple-400 mr-2"}),i.jsx("span",{className:"text-gray-300",children:P.lokasi}),i.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),i.jsx("span",{className:"text-gray-300",children:P.jam})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:P.keterangan})]}),i.jsxs("div",{className:"text-right ml-6",children:[i.jsx("div",{className:"mb-2",children:T(P.status)}),i.jsx("div",{className:"text-white font-bold text-lg",children:U(P.tarif+P.bonus)}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Tarif: ",U(P.tarif)," + Bonus: ",U(P.bonus)]})]})]})},P.id))}),i.jsx(ce,{currentPage:o,totalPages:B,onPageChange:d,type:"jaga"})]}),c==="tindakan"&&i.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Mi,{className:"w-6 h-6 text-purple-400 mr-3"}),i.jsx("h3",{className:"text-xl font-bold text-white",children:"Tindakan Medis"})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[Jt.length," total tindakan"]})]})}),i.jsx("div",{className:"divide-y divide-white/10",children:I().map(P=>i.jsx("div",{className:"p-6 hover:bg-white/5 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(ca,{className:"w-4 h-4 text-emerald-400 mr-2"}),i.jsx("span",{className:"text-white font-semibold",children:P.tindakan})]}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(fn,{className:"w-4 h-4 text-blue-400 mr-2"}),i.jsx("span",{className:"text-blue-300",children:P.jenis}),i.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),i.jsx("span",{className:"text-gray-300",children:P.durasi}),i.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),i.jsx("span",{className:"text-gray-300",children:P.tanggal})]}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(mn,{className:"w-4 h-4 text-purple-400 mr-2"}),i.jsxs("span",{className:"text-gray-300 text-sm",children:["Tim: ",P.tim.join(", ")]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[_(P.complexity),T(P.status)]})]}),i.jsxs("div",{className:"text-right ml-6",children:[i.jsx("div",{className:"text-white font-bold text-xl",children:U(P.tarif)}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Fee tindakan"})]})]})},P.id))}),i.jsx(ce,{currentPage:p,totalPages:$,onPageChange:u,type:"tindakan"})]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-gray-500 text-sm",children:"JASPEL • Jasa Pelayanan Medis • Dashboard Dokter"})})]})})},$o=()=>{const[c,r]=f.useState("profile"),[o,d]=f.useState(!1),[p,u]=f.useState(!1),[m,b]=f.useState(!1),[y,U]=f.useState("portrait"),[T,_]=f.useState({name:"Dr. Naning Paramedis",email:"naning.paramedis@hospital.com",phone:"+62 812-3456-7890",address:"Jl. Ahmad Yani No. 123, Kediri, Jawa Timur",birthDate:"15 Maret 1990",gender:"Perempuan",specialization:"Dokter Umum",licenseNumber:"STR.12345678901",hospital:"RS. Kediri Medical Center",experience:"5 tahun",bio:"Dokter umum yang berpengalaman dalam pelayanan medis komprehensif dengan fokus pada pencegahan dan pengobatan berbagai kondisi kesehatan."});f.useEffect(()=>{const I=()=>{const B=window.innerWidth,$=window.innerHeight;b(B>=768),U(B>$?"landscape":"portrait")};return I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I)}},[]);const D=[{id:1,title:"Perfect Attendance",description:"100% hadir selama 3 bulan berturut-turut",icon:Ci,color:"from-yellow-500 to-orange-500",date:"Juli 2025",rarity:"Gold"},{id:2,title:"Patient Care Excellence",description:"Rating 5.0 dari 100+ pasien",icon:ha,color:"from-pink-500 to-red-500",date:"Juni 2025",rarity:"Platinum"},{id:3,title:"Emergency Hero",description:"Menangani 50+ kasus darurat",icon:Ii,color:"from-blue-500 to-cyan-500",date:"Mei 2025",rarity:"Diamond"},{id:4,title:"Knowledge Master",description:"Menyelesaikan 20 pelatihan medis",icon:ua,color:"from-purple-500 to-indigo-500",date:"April 2025",rarity:"Gold"},{id:5,title:"Team Player",description:"Kolaborasi terbaik dengan tim medis",icon:mn,color:"from-green-500 to-emerald-500",date:"Maret 2025",rarity:"Silver"},{id:6,title:"Innovation Pioneer",description:"Mengimplementasikan 3 prosedur baru",icon:hn,color:"from-cyan-500 to-blue-500",date:"Februari 2025",rarity:"Platinum"}],C=[{id:1,name:"Basic Life Support (BLS)",issuer:"American Heart Association",issueDate:"Januari 2023",expiryDate:"Januari 2025",status:"Valid"},{id:2,name:"Advanced Cardiac Life Support (ACLS)",issuer:"American Heart Association",issueDate:"Maret 2023",expiryDate:"Maret 2025",status:"Valid"},{id:3,name:"Pediatric Advanced Life Support (PALS)",issuer:"American Heart Association",issueDate:"Juni 2023",expiryDate:"Juni 2025",status:"Valid"},{id:4,name:"Emergency Medicine Certification",issuer:"Indonesian Medical Association",issueDate:"September 2022",expiryDate:"September 2025",status:"Valid"}],E=[{label:"Jam Kerja Total",value:"2,847",icon:nt,color:"text-blue-400"},{label:"Pasien Ditangani",value:"1,234",icon:mn,color:"text-green-400"},{label:"Rating Kepuasan",value:"4.9/5",icon:hn,color:"text-yellow-400"},{label:"Sertifikasi",value:"12",icon:Ci,color:"text-purple-400"},{label:"Pelatihan",value:"28",icon:zr,color:"text-cyan-400"},{label:"Pengalaman",value:"5 Tahun",icon:pn,color:"text-orange-400"}],S=I=>{switch(I){case"Silver":return"text-gray-300 bg-gray-400/20 border-gray-400/50";case"Gold":return"text-yellow-400 bg-yellow-400/20 border-yellow-400/50";case"Platinum":return"text-cyan-400 bg-cyan-400/20 border-cyan-400/50";case"Diamond":return"text-purple-400 bg-purple-400/20 border-purple-400/50";default:return"text-gray-400 bg-gray-400/20 border-gray-400/50"}},se=()=>{d(!1)},z=()=>{d(!1)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:i.jsxs("div",{className:"w-full min-h-screen relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[i.jsx("div",{className:"absolute top-20 bg-purple-500 bg-opacity-5 rounded-full blur-3xl animate-pulse",style:{left:"10%",width:"30vw",maxWidth:"400px",height:"30vw",maxHeight:"400px"}}),i.jsx("div",{className:"absolute top-60 bg-cyan-500 bg-opacity-5 rounded-full blur-2xl animate-bounce",style:{right:"5%",width:"25vw",maxWidth:"350px",height:"25vw",maxHeight:"350px"}}),i.jsx("div",{className:"absolute bottom-80 bg-pink-500 bg-opacity-5 rounded-full blur-3xl animate-pulse",style:{left:"15%",width:"28vw",maxWidth:"380px",height:"28vw",maxHeight:"380px"}})]}),i.jsxs("div",{className:"relative z-10 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 pt-8 pb-6",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:`font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2
              ${m?"text-3xl md:text-4xl lg:text-5xl":"text-2xl sm:text-3xl"}
            `,children:"Doctor Profile"}),i.jsx("p",{className:`text-purple-200 ${m?"text-lg md:text-xl":"text-base"}`,children:"Professional Information & Achievements"})]}),i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-2 border border-white/20",children:i.jsx("div",{className:"flex space-x-2 md:space-x-4",children:[{id:"profile",label:"Profile",icon:on},{id:"achievements",label:"Achievements",icon:Ci},{id:"certifications",label:"Certifications",icon:ea},{id:"settings",label:"Settings",icon:un}].map(I=>{const B=I.icon;return i.jsxs("button",{onClick:()=>r(I.id),className:`
                        flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300
                        ${c===I.id?"bg-purple-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-white/10"}
                      `,children:[i.jsx(B,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium hidden sm:block",children:I.label})]},I.id)})})})})]}),i.jsxs("div",{className:"relative z-10 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 pb-32",children:[c==="profile"&&i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl p-6 md:p-8 border border-white/20",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:`
                      ${m?"w-32 h-32 md:w-40 md:h-40":"w-24 h-24 sm:w-32 sm:h-32"}
                      bg-gradient-to-br from-cyan-400 via-purple-500 to-pink-500 rounded-3xl 
                      flex items-center justify-center relative overflow-hidden
                    `,children:[i.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),i.jsx(on,{className:`text-white relative z-10 ${m?"w-16 h-16 md:w-20 md:h-20":"w-12 h-12 sm:w-16 sm:h-16"}`})]}),i.jsx("button",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center border-2 border-white transition-colors",children:i.jsx(Br,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"absolute -top-3 -left-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold px-3 py-1 rounded-full border-2 border-white shadow-lg",children:"Lv.7"})]}),i.jsxs("div",{className:"flex-1 text-center md:text-left",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:`font-bold text-white mb-2 ${m?"text-2xl md:text-3xl":"text-xl sm:text-2xl"}`,children:T.name}),i.jsx("p",{className:`text-purple-300 mb-2 ${m?"text-lg":"text-base"}`,children:T.specialization}),i.jsx("p",{className:`text-gray-400 ${m?"text-base":"text-sm"}`,children:T.hospital})]}),i.jsxs("button",{onClick:()=>d(!0),className:"mt-4 md:mt-0 flex items-center space-x-2 bg-purple-600/30 hover:bg-purple-600/50 px-4 py-2 rounded-xl transition-colors border border-purple-400/30",children:[i.jsx(Er,{className:"w-4 h-4 text-purple-300"}),i.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"Edit Profile"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`font-bold text-cyan-400 ${m?"text-xl md:text-2xl":"text-lg"}`,children:"Level 7"}),i.jsx("div",{className:`text-gray-400 ${m?"text-sm":"text-xs"}`,children:"Doctor Rank"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`font-bold text-green-400 ${m?"text-xl md:text-2xl":"text-lg"}`,children:"2,847"}),i.jsx("div",{className:`text-gray-400 ${m?"text-sm":"text-xs"}`,children:"XP Points"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`font-bold text-yellow-400 ${m?"text-xl md:text-2xl":"text-lg"}`,children:"96.5%"}),i.jsx("div",{className:`text-gray-400 ${m?"text-sm":"text-xs"}`,children:"Performance"})]})]})]})]})}),i.jsxs("div",{className:`
                grid gap-6 md:gap-8
                ${m&&y==="landscape"?"lg:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-2":"sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2"}
              `,children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-white/30 transition-all duration-300",children:[i.jsxs("h3",{className:`font-bold text-white mb-6 flex items-center ${m?"text-xl md:text-2xl":"text-lg sm:text-xl"}`,children:[i.jsx(on,{className:`mr-2 text-cyan-400 ${m?"w-6 h-6":"w-5 h-5"}`}),"Personal Information"]}),i.jsx("div",{className:"space-y-4",children:[{icon:Fr,label:"Email",value:T.email},{icon:Ur,label:"Phone",value:T.phone},{icon:vt,label:"Address",value:T.address},{icon:It,label:"Birth Date",value:T.birthDate},{icon:on,label:"Gender",value:T.gender}].map((I,B)=>{const $=I.icon;return i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx($,{className:`text-gray-400 mt-0.5 flex-shrink-0 ${m?"w-5 h-5":"w-4 h-4 sm:w-5 sm:h-5"}`}),i.jsxs("div",{children:[i.jsx("div",{className:`text-gray-400 ${m?"text-sm":"text-xs sm:text-sm"}`,children:I.label}),i.jsx("div",{className:`text-white font-medium ${m?"text-base":"text-sm sm:text-base"}`,children:I.value})]})]},B)})})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-white/30 transition-all duration-300",children:[i.jsxs("h3",{className:`font-bold text-white mb-6 flex items-center ${m?"text-xl md:text-2xl":"text-lg sm:text-xl"}`,children:[i.jsx(da,{className:`mr-2 text-purple-400 ${m?"w-6 h-6":"w-5 h-5"}`}),"Professional Information"]}),i.jsx("div",{className:"space-y-4",children:[{icon:Ci,label:"License Number",value:T.licenseNumber},{icon:Rr,label:"Hospital",value:T.hospital},{icon:nt,label:"Experience",value:T.experience},{icon:fn,label:"Specialization",value:T.specialization}].map((I,B)=>{const $=I.icon;return i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx($,{className:`text-gray-400 mt-0.5 flex-shrink-0 ${m?"w-5 h-5":"w-4 h-4 sm:w-5 sm:h-5"}`}),i.jsxs("div",{children:[i.jsx("div",{className:`text-gray-400 ${m?"text-sm":"text-xs sm:text-sm"}`,children:I.label}),i.jsx("div",{className:`text-white font-medium ${m?"text-base":"text-sm sm:text-base"}`,children:I.value})]})]},B)})})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-white/30 transition-all duration-300",children:[i.jsxs("h3",{className:`font-bold text-white mb-4 flex items-center ${m?"text-xl md:text-2xl":"text-lg sm:text-xl"}`,children:[i.jsx(ca,{className:`mr-2 text-green-400 ${m?"w-6 h-6":"w-5 h-5"}`}),"Bio"]}),i.jsx("p",{className:`text-gray-300 leading-relaxed ${m?"text-base md:text-lg":"text-sm sm:text-base"}`,children:T.bio})]}),i.jsx("div",{className:`
                grid gap-4 md:gap-6
                ${m&&y==="landscape"?"grid-cols-3 lg:grid-cols-6 xl:grid-cols-6 2xl:grid-cols-6":"grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-6 xl:grid-cols-6"}
              `,children:E.map((I,B)=>{const $=I.icon;return i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-4 border border-white/20 hover:border-white/30 transition-all duration-300 text-center",children:[i.jsx($,{className:`mx-auto mb-2 ${I.color} ${m?"w-8 h-8":"w-6 h-6 sm:w-8 sm:h-8"}`}),i.jsx("div",{className:`font-bold text-white ${m?"text-lg md:text-xl":"text-base sm:text-lg"}`,children:I.value}),i.jsx("div",{className:`text-gray-400 ${m?"text-xs":"text-xs sm:text-xs"}`,children:I.label})]},B)})})]}),c==="achievements"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Doctor Achievements"}),i.jsx("div",{className:`
                grid gap-6 md:gap-8
                ${m&&y==="landscape"?"lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3":"sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3"}
              `,children:D.map(I=>{const B=I.icon;return i.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-purple-400/50 transition-all duration-300 group",children:i.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[i.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${I.color} rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:i.jsx(B,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:I.title}),i.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${S(I.rarity)}`,children:I.rarity})]}),i.jsx("p",{className:"text-gray-300 text-sm mb-2",children:I.description}),i.jsx("p",{className:"text-gray-400 text-xs",children:I.date})]})]})},I.id)})})]}),c==="certifications"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Medical Certifications"}),i.jsx("div",{className:"space-y-4",children:C.map(I=>i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-green-400/50 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center",children:i.jsx(ea,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:I.name}),i.jsx("p",{className:"text-green-300",children:I.issuer})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 bg-green-500/20 px-3 py-1.5 rounded-full border border-green-400/50",children:[i.jsx(Ei,{className:"w-4 h-4 text-green-400"}),i.jsx("span",{className:"text-green-400 text-sm font-medium",children:I.status})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm",children:"Issue Date"}),i.jsx("div",{className:"text-white font-medium",children:I.issueDate})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-400 text-sm",children:"Expiry Date"}),i.jsx("div",{className:"text-white font-medium",children:I.expiryDate})]})]})]},I.id))})]}),c==="settings"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Account Settings"}),i.jsxs("div",{className:`
                grid gap-6 md:gap-8
                ${m&&y==="landscape"?"lg:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-2":"sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2"}
              `,children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-white/30 transition-all duration-300",children:[i.jsxs("h3",{className:`font-bold text-white mb-6 flex items-center ${m?"text-xl md:text-2xl":"text-lg sm:text-xl"}`,children:[i.jsx(Qs,{className:`mr-2 text-red-400 ${m?"w-6 h-6":"w-5 h-5"}`}),"Security Settings"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10 hover:border-purple-400/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Qs,{className:"w-5 h-5 text-gray-400"}),i.jsx("span",{className:"text-white",children:"Change Password"})]}),i.jsx(un,{className:"w-4 h-4 text-gray-400"})]}),i.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10 hover:border-purple-400/50 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ii,{className:"w-5 h-5 text-gray-400"}),i.jsx("span",{className:"text-white",children:"Two-Factor Authentication"})]}),i.jsx("div",{className:"text-green-400 text-sm",children:"Enabled"})]})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 hover:border-white/30 transition-all duration-300",children:[i.jsxs("h3",{className:`font-bold text-white mb-6 flex items-center ${m?"text-xl md:text-2xl":"text-lg sm:text-xl"}`,children:[i.jsx(Ir,{className:`mr-2 text-yellow-400 ${m?"w-6 h-6":"w-5 h-5"}`}),"Notifications"]}),i.jsx("div",{className:"space-y-4",children:[{label:"Schedule Reminders",enabled:!0},{label:"Patient Updates",enabled:!0},{label:"System Alerts",enabled:!1},{label:"Marketing Emails",enabled:!1}].map((I,B)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10",children:[i.jsx("span",{className:"text-white",children:I.label}),i.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${I.enabled?"bg-green-500":"bg-gray-600"}`,children:i.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform ${I.enabled?"translate-x-6":"translate-x-0"}`})})]},B))})]})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"bg-white/10 backdrop-blur-2xl rounded-3xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Profile"}),i.jsx("button",{onClick:z,className:"p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:i.jsx(la,{className:"w-5 h-5 text-white"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:`
                    grid gap-4 md:gap-6
                    ${m&&y==="landscape"?"lg:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-2":"sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2"}
                  `,children:[i.jsxs("div",{children:[i.jsx("label",{className:`block text-gray-300 mb-2 ${m?"text-sm":"text-xs sm:text-sm"}`,children:"Full Name"}),i.jsx("input",{type:"text",value:T.name,className:`w-full bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 hover:border-white/30 focus:border-purple-400/50 transition-colors ${m?"px-4 py-3":"px-3 py-2 sm:px-4 sm:py-3"}`,placeholder:"Enter full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:`block text-gray-300 mb-2 ${m?"text-sm":"text-xs sm:text-sm"}`,children:"Email"}),i.jsx("input",{type:"email",value:T.email,className:`w-full bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 hover:border-white/30 focus:border-purple-400/50 transition-colors ${m?"px-4 py-3":"px-3 py-2 sm:px-4 sm:py-3"}`,placeholder:"Enter email"})]})]}),i.jsxs("div",{className:"flex flex-col space-y-3 md:flex-row md:space-y-0 md:space-x-4",children:[i.jsxs("button",{onClick:se,className:"flex-1 flex items-center justify-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl transition-colors",children:[i.jsx(Wr,{className:"w-4 h-4"}),i.jsx("span",{children:"Save Changes"})]}),i.jsx("button",{onClick:z,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-xl transition-colors",children:"Cancel"})]})]})]})})})]})})},Zo=c=>c<=25?300+Math.random()*100:c<=50?500+Math.random()*100:c<=75?700+Math.random()*100:900+Math.random()*300,ra=({percentage:c,delay:r=0,className:o="",gradientColors:d,barClassName:p=""})=>{const[u,m]=f.useState(0),[b,y]=f.useState(750);f.useEffect(()=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){const C=setTimeout(()=>{m(c)},r);return y(0),()=>clearTimeout(C)}const _=Zo(c);y(_);const D=setTimeout(()=>{m(c)},r);return()=>clearTimeout(D)},[c,r]);const U={width:`${u}%`,transitionDuration:`${b}ms`};return i.jsx("div",{className:`w-full rounded-full h-2 overflow-hidden ${o}`,children:i.jsx("div",{className:`h-2 rounded-full transition-all ease-out shadow-lg ${d} ${p}`,style:U,role:"progressbar","aria-valuenow":Math.round(u),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progress: ${Math.round(u)}%`})})},Yt=({userData:c})=>{const[r,o]=f.useState(new Date),[d,p]=f.useState(7),[u,m]=f.useState(2847),[b,y]=f.useState(3e3),[U,T]=f.useState(15),[_,D]=f.useState("home"),[C,E]=f.useState({jaspel:{currentMonth:0,previousMonth:0,growthPercentage:0,progressPercentage:0},attendance:{rate:0,daysPresent:0,totalDays:0,displayText:"0%"},patients:{today:0,thisMonth:0}}),[S,se]=f.useState({dashboard:!0,error:null});f.useEffect(()=>{const te=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(te)},[]),f.useEffect(()=>{(async()=>{var je,Ne,he,ae,J;try{se({dashboard:!0,error:null});const ie=await ln.getDashboard();if(ie){const Ae=((je=ie.jaspel_summary)==null?void 0:je.current_month)||0,de=((Ne=ie.jaspel_summary)==null?void 0:Ne.last_month)||0,Ue=de>0?(Ae-de)/de*100:0,K=Math.min(Math.max(Ae/1e7*100,0),100),We=((he=ie.performance)==null?void 0:he.attendance_rate)||0,G=30,M=Math.round(We/100*G);E({jaspel:{currentMonth:Ae,previousMonth:de,growthPercentage:Math.round(Ue*10)/10,progressPercentage:Math.round(K*10)/10},attendance:{rate:We,daysPresent:M,totalDays:G,displayText:`${We}%`},patients:{today:((ae=ie.patient_count)==null?void 0:ae.today)||0,thisMonth:((J=ie.patient_count)==null?void 0:J.this_month)||0}})}}catch(ie){console.error("Error fetching dashboard data:",ie),se({dashboard:!1,error:"Failed to load dashboard data"}),E({jaspel:{currentMonth:0,previousMonth:0,growthPercentage:0,progressPercentage:0},attendance:{rate:0,daysPresent:0,totalDays:30,displayText:"0%"},patients:{today:0,thisMonth:0}})}finally{se({dashboard:!1,error:null})}})()},[]);const z=()=>{const te=r.getHours();return te<12?{greeting:"Good Morning, Doctor!",icon:cn,color:"from-amber-400 to-orange-500"}:te<17?{greeting:"Good Afternoon, Doctor!",icon:cn,color:"from-blue-400 to-cyan-500"}:{greeting:"Good Evening, Doctor!",icon:es,color:"from-purple-400 to-indigo-500"}},I=()=>{switch(_){case"missions":return i.jsx("div",{className:"w-full",children:i.jsx(io,{userData:c,onNavigate:D})});case"presensi":return i.jsx("div",{className:"w-full",children:i.jsx(Ro,{userData:c})});case"jaspel":return i.jsx("div",{className:"w-full",children:i.jsx(Bo,{})});case"profile":return i.jsx("div",{className:"w-full",children:i.jsx($o,{})});default:return P()}},{greeting:B,icon:$,color:ce}=z(),P=()=>i.jsxs(i.Fragment,{children:[S.dashboard&&i.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"}),i.jsx("p",{className:"text-purple-300",children:"Loading dashboard data..."})]})}),S.error&&i.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:i.jsxs("div",{className:"bg-red-900/30 border border-red-500/30 rounded-2xl p-4 text-center",children:[i.jsx("p",{className:"text-red-300 mb-2",children:"Failed to load dashboard data"}),i.jsx("p",{className:"text-red-200 text-sm",children:"Using fallback data"})]})}),i.jsx("div",{className:"px-6 pt-8 pb-6 relative z-10",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/30 via-purple-600/30 to-pink-600/30 rounded-3xl backdrop-blur-2xl"}),i.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-3xl border border-white/20"}),i.jsxs("div",{className:"relative p-8",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-cyan-400 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),i.jsx(ss,{className:"w-10 h-10 text-white relative z-10 animate-bounce"})]}),i.jsxs("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-bold px-2 py-1 rounded-full border-2 border-white shadow-lg animate-pulse",children:["Lv.",d]})]}),i.jsxs("div",{children:[i.jsx("h1",{className:`text-2xl md:text-3xl lg:text-4xl font-bold bg-gradient-to-r ${ce} bg-clip-text text-transparent mb-1`,children:B}),i.jsx("p",{className:"text-purple-200 text-lg md:text-xl",children:(c==null?void 0:c.name)||"Doctor"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-cyan-300",children:"Klinik Dokterku"}),i.jsx("span",{className:"text-white font-semibold",children:"Akreditasi Paripurna"})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(pa,{className:"w-5 h-5 text-orange-400 mr-2"}),i.jsx("span",{className:"text-xl font-bold text-white",children:U})]}),i.jsx("span",{className:"text-orange-300 text-sm",children:"Jumlah Jaga"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(hn,{className:"w-5 h-5 text-yellow-400 mr-2"}),i.jsx("span",{className:"text-xl font-bold text-white",children:S.dashboard?"...":C.attendance.displayText})]}),i.jsx("span",{className:"text-yellow-300 text-sm",children:"Tingkat Kehadiran"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(Ci,{className:"w-5 h-5 text-purple-400 mr-2"}),i.jsx("span",{className:"text-xl font-bold text-white",children:S.dashboard?"...":C.patients.thisMonth})]}),i.jsx("span",{className:"text-purple-300 text-sm",children:"Jumlah Pasien"})]})]})]})]})}),!S.dashboard&&i.jsxs("div",{className:"px-6 mb-8 relative z-10",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-6 text-center bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",children:"Doctor Analytics"}),i.jsx("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl p-6 border border-white/10",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-white mb-4",children:"Recent Achievements"}),i.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-2xl border border-green-400/30",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center",children:i.jsx(ts,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"font-medium text-white",children:"Jaspel vs Bulan Lalu"})}),i.jsx("div",{className:"text-2xl",children:"🟡"})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-right text-white font-semibold text-sm mb-1",children:S.dashboard?"...":C.jaspel.growthPercentage>=0?`+${C.jaspel.growthPercentage}%`:`${C.jaspel.growthPercentage}%`}),S.dashboard?i.jsx("div",{className:"w-full h-2 bg-green-900/30 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-green-400/50 to-emerald-400/50 rounded-full animate-pulse"})}):i.jsx(ra,{percentage:C.jaspel.progressPercentage,delay:800,className:"bg-green-900/30",gradientColors:"bg-gradient-to-r from-green-400 via-emerald-400 to-yellow-400"})]})]}),i.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-2xl border border-blue-400/30",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center",children:i.jsx(It,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-white",children:"Tingkat Kehadiran"}),i.jsx("div",{className:"text-blue-300 text-sm",children:S.dashboard?"... hari bulan ini":`${C.attendance.daysPresent}/${C.attendance.totalDays} hari bulan ini`})]}),i.jsx("div",{className:"text-2xl",children:"📅"})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-right text-white font-semibold text-sm mb-1",children:S.dashboard?"...":C.attendance.displayText}),S.dashboard?i.jsx("div",{className:"w-full h-2 bg-blue-900/30 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400/50 to-cyan-400/50 rounded-full animate-pulse"})}):i.jsx(ra,{percentage:C.attendance.rate,delay:500,className:"bg-blue-900/30",gradientColors:"bg-gradient-to-r from-blue-400 via-cyan-400 to-emerald-400"})]})]})]})})]}),!S.dashboard&&i.jsxs("div",{className:"px-6 pb-32 relative z-10",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-6 text-center bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"Elite Doctor Leaderboard"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-4 bg-gradient-to-r from-yellow-500/30 to-amber-500/30 rounded-2xl p-4 border-2 border-yellow-400/50",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-amber-500 rounded-xl flex items-center justify-center font-bold text-white text-lg",children:"👑"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-white",children:"Dr. Maya Sari"}),i.jsx("div",{className:"text-yellow-300",children:"Level 9 • 98.7% Score"})]}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:"4,750 XP"})})]}),i.jsxs("div",{className:"flex items-center space-x-4 bg-gradient-to-r from-gray-400/30 to-slate-500/30 rounded-2xl p-4 border-2 border-gray-400/50",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-500 to-slate-600 rounded-xl flex items-center justify-center font-bold text-white text-lg",children:"🥈"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-white",children:(c==null?void 0:c.name)||"Doctor"}),i.jsx("div",{className:"text-green-300",children:"Level 7 • 96.2% Score"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[u," XP"]}),i.jsx("div",{className:"text-xs text-green-300",children:"You"})]})]})]})]})]}),Y=()=>i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-slate-800/90 via-purple-800/80 to-slate-700/90 backdrop-blur-3xl px-6 py-4 border-t border-purple-400/20 relative z-10 rounded-t-3xl",children:i.jsxs("div",{className:"flex justify-center items-center gap-4 md:gap-6",children:[i.jsxs("button",{onClick:()=>D("home"),className:`relative group transition-all duration-500 ease-out ${_==="home"?"bg-gradient-to-r from-cyan-500/40 to-purple-500/40 backdrop-blur-xl border border-cyan-300/30 p-3 rounded-2xl shadow-2xl shadow-purple-500/30 scale-115":""}`,children:[_==="home"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/30 to-purple-500/30 rounded-2xl blur-lg scale-150 opacity-60"})]}),i.jsx("div",{className:`relative ${_==="home"?"":"p-3 rounded-2xl transition-all duration-500 group-hover:bg-purple-600/20 group-hover:scale-110 group-hover:shadow-lg"}`,children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ss,{className:`w-5 h-5 mb-1 ${_==="home"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-cyan-400"}`}),i.jsx("span",{className:`text-xs font-medium ${_==="home"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-cyan-400"}`,children:"Home"})]})})]}),i.jsxs("button",{onClick:()=>D("missions"),className:`relative group transition-all duration-500 ease-out ${_==="missions"?"bg-gradient-to-r from-cyan-500/40 to-purple-500/40 backdrop-blur-xl border border-cyan-300/30 p-3 rounded-2xl shadow-2xl shadow-purple-500/30 scale-115":""}`,children:[_==="missions"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/30 to-purple-500/30 rounded-2xl blur-lg scale-150 opacity-60"})]}),i.jsx("div",{className:`${_==="missions"?"":"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-blue-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}`}),i.jsx("div",{className:`relative ${_==="missions"?"":"p-3 rounded-2xl transition-all duration-500 group-hover:bg-purple-600/20 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-blue-500/20"}`,children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(It,{className:`w-5 h-5 mb-1 ${_==="missions"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-blue-400"}`}),i.jsx("span",{className:`text-xs font-medium ${_==="missions"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-blue-400"}`,children:"Missions"})]})})]}),i.jsxs("button",{onClick:()=>D("presensi"),className:`relative group transition-all duration-500 ease-out ${_==="presensi"?"bg-gradient-to-r from-cyan-500/40 to-purple-500/40 backdrop-blur-xl border border-cyan-300/30 p-3 rounded-2xl shadow-2xl shadow-purple-500/30 scale-115":""}`,children:[_==="presensi"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/30 to-purple-500/30 rounded-2xl blur-lg scale-150 opacity-60"})]}),i.jsx("div",{className:`${_==="presensi"?"":"absolute inset-0 bg-gradient-to-br from-green-500/0 to-green-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}`}),i.jsx("div",{className:`relative ${_==="presensi"?"":"p-3 rounded-2xl transition-all duration-500 group-hover:bg-purple-600/20 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-green-500/20"}`,children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(nt,{className:`w-5 h-5 mb-1 ${_==="presensi"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-green-400"}`}),i.jsx("span",{className:`text-xs font-medium ${_==="presensi"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-green-400"}`,children:"Presensi"})]})})]}),i.jsxs("button",{onClick:()=>D("jaspel"),className:`relative group transition-all duration-500 ease-out ${_==="jaspel"?"bg-gradient-to-r from-cyan-500/40 to-purple-500/40 backdrop-blur-xl border border-cyan-300/30 p-3 rounded-2xl shadow-2xl shadow-purple-500/30 scale-115":""}`,children:[_==="jaspel"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/30 to-purple-500/30 rounded-2xl blur-lg scale-150 opacity-60"})]}),i.jsx("div",{className:`${_==="jaspel"?"":"absolute inset-0 bg-gradient-to-br from-emerald-500/0 to-emerald-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}`}),i.jsx("div",{className:`relative ${_==="jaspel"?"":"p-3 rounded-2xl transition-all duration-500 group-hover:bg-purple-600/20 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-emerald-500/20"}`,children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ts,{className:`w-5 h-5 mb-1 ${_==="jaspel"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-emerald-400"}`}),i.jsx("span",{className:`text-xs font-medium ${_==="jaspel"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-emerald-400"}`,children:"Jaspel"})]})})]}),i.jsxs("button",{onClick:()=>D("profile"),className:`relative group transition-all duration-500 ease-out ${_==="profile"?"bg-gradient-to-r from-cyan-500/40 to-purple-500/40 backdrop-blur-xl border border-cyan-300/30 p-3 rounded-2xl shadow-2xl shadow-purple-500/30 scale-115":""}`,children:[_==="profile"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gradient-to-r from-cyan-400 to-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/30 to-purple-500/30 rounded-2xl blur-lg scale-150 opacity-60"})]}),i.jsx("div",{className:`${_==="profile"?"":"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-purple-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}`}),i.jsx("div",{className:`relative ${_==="profile"?"":"p-3 rounded-2xl transition-all duration-500 group-hover:bg-purple-600/20 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-purple-500/20"}`,children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ua,{className:`w-5 h-5 mb-1 ${_==="profile"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-purple-400"}`}),i.jsx("span",{className:`text-xs font-medium ${_==="profile"?"text-white":"transition-colors duration-500 text-gray-400 group-hover:text-purple-400"}`,children:"Profile"})]})})]})]})});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:i.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[_==="home"&&i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[i.jsx("div",{className:"absolute top-20 left-8 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute top-60 right-4 w-32 h-32 bg-purple-500/5 rounded-full blur-2xl animate-bounce"}),i.jsx("div",{className:"absolute bottom-80 left-6 w-36 h-36 bg-pink-500/5 rounded-full blur-3xl animate-pulse"})]}),i.jsx("div",{className:`relative z-10 ${_==="missions"||_==="presensi"||_==="jaspel"||_==="profile"?"w-full":"max-w-sm mx-auto md:max-w-md lg:max-w-lg xl:max-w-xl"}`,children:I()}),Y(),i.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gradient-to-r from-transparent via-purple-400/60 to-transparent rounded-full shadow-lg shadow-purple-400/30"})]})})},qt=class qt{constructor(){ke(this,"token",null);this.refreshToken()}static getInstance(){return qt.instance||(qt.instance=new qt),qt.instance}refreshToken(){const r=document.querySelector('meta[name="csrf-token"]');this.token=(r==null?void 0:r.getAttribute("content"))||null,this.token||console.warn("⚠️ CSRF token not found in meta tag")}getToken(){return this.token||this.refreshToken(),this.token||""}getHeaders(r={}){return{"X-CSRF-TOKEN":this.getToken(),"Content-Type":"application/json",Accept:"application/json",...r}}setupAxiosDefaults(){if(typeof window<"u"&&window.axios){const r=window.axios;r.defaults.headers.common["X-CSRF-TOKEN"]=this.getToken(),r.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}}addTokenToForm(r){const o=r.querySelector('input[name="_token"]');if(o)o.value=this.getToken();else{const d=document.createElement("input");d.type="hidden",d.name="_token",d.value=this.getToken(),r.appendChild(d)}}interceptFetch(){const r=window.fetch;window.fetch=async(o,d)=>{const p=typeof o=="string"?o:o.toString();return(p.startsWith("/")||p.startsWith(window.location.origin))&&(d!=null&&d.method)&&["POST","PUT","PATCH","DELETE"].includes(d.method)&&(d.headers={...d.headers,"X-CSRF-TOKEN":this.getToken()}),r(o,d)}}};ke(qt,"instance");let rs=qt;const Yn=rs.getInstance();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",oa):oa();function oa(){Yn.setupAxiosDefaults(),Yn.interceptFetch(),document.addEventListener("submit",c=>{const r=c.target;r.method.toUpperCase()!=="GET"&&Yn.addTokenToForm(r)}),console.log("✅ CSRF protection initialized")}class Ho{constructor(){ke(this,"errors",[]);ke(this,"maxErrors",50);this.initializeGlobalHandlers(),this.initializePerformanceMonitoring()}initializeGlobalHandlers(){window.addEventListener("unhandledrejection",r=>{var o,d,p,u;if(this.handleError("promise_rejection",((o=r.reason)==null?void 0:o.message)||"Unknown promise rejection",(d=r.reason)==null?void 0:d.stack),this.isNonCriticalError((p=r.reason)==null?void 0:p.message)){console.warn("🛡️ Suppressed non-critical error:",(u=r.reason)==null?void 0:u.message),r.preventDefault();return}console.warn("🚨 Unhandled Promise Rejection:",r.reason),r.preventDefault()}),window.addEventListener("error",r=>{var d,p;const o=((d=r.error)==null?void 0:d.message)||r.message;if(o==="ResizeObserver loop completed with undelivered notifications."){console.warn("🔄 ResizeObserver loop detected - suppressed (non-critical)"),r.stopImmediatePropagation();return}if(this.handleError("javascript_error",o,(p=r.error)==null?void 0:p.stack),this.isNonCriticalError(o)){console.warn("🛡️ Suppressed non-critical JS error:",o);return}console.warn("🚨 JavaScript Error:",r.error)}),window.addEventListener("error",r=>{var o,d;r.target!==window&&this.handleError("resource_error",`Failed to load: ${((o=r.target)==null?void 0:o.src)||((d=r.target)==null?void 0:d.href)||"unknown"}`,"")},!0)}initializePerformanceMonitoring(){"performance"in window&&"measure"in performance&&performance.mark("dokterku-app-start")}isNonCriticalError(r){return r?["IntersectionObserver","target","Element","observe","ResizeObserver","MutationObserver","requestIdleCallback"].some(d=>r.includes(d)):!1}handleError(r,o,d){const p={timestamp:Date.now(),type:r,message:o,stack:d,userAgent:navigator.userAgent,url:window.location.href,userId:this.getUserId()};this.errors.push(p),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(-this.maxErrors));try{localStorage.setItem("dokterku_errors",JSON.stringify(this.errors.slice(-10)))}catch{}}getUserId(){try{const r=document.querySelector('meta[name="user-data"]');if(r){const o=JSON.parse(r.getAttribute("content")||"{}");return o.email||o.name}}catch{}}getErrorReport(){return[...this.errors]}clearErrors(){this.errors=[],localStorage.removeItem("dokterku_errors")}}class Ca{constructor(){ke(this,"errorHandler");ke(this,"retryCount",0);ke(this,"maxRetries",3);ke(this,"retryDelay",1e3);this.errorHandler=new Ho,this.initializeApp()}async initializeApp(){console.log("🌟 DOKTERKU Mobile App: World-class initialization starting...");try{await this.performPreflightChecks(),await this.mountReactApp(),this.performPostInitializationTasks()}catch(r){console.error("❌ DOKTERKU Mobile App initialization failed:",r),await this.handleInitializationFailure(r)}}async performPreflightChecks(){if(console.log("🔍 Performing pre-flight checks..."),!document.getElementById("dokter-app"))throw new Error("Container element #dokter-app not found");if(!qe||!At.createRoot)throw new Error("React dependencies not loaded");const o=document.querySelector('meta[name="user-authenticated"]');if(!o||o.getAttribute("content")!=="true")throw new Error("User not authenticated");console.log("✅ Pre-flight checks passed"),this.initializeAuthentication()}initializeAuthentication(){try{console.log("🔐 Initializing authentication...");const r=document.querySelector('meta[name="api-token"]'),o=r==null?void 0:r.getAttribute("content");o&&o.trim()?(Fe().setToken(o.trim()),console.log("✅ API token initialized from meta tag")):console.warn("⚠️ No API token found in meta tag, may affect API calls")}catch(r){console.error("❌ Authentication initialization failed:",r)}}async mountReactApp(){console.log("🚀 Mounting React application..."),performance.mark("react-mount-start");const r=document.getElementById("dokter-app");if(!r)throw new Error("Container not found during mount");let o=null;const d=document.querySelector('meta[name="user-data"]');if(d)try{const m=d.getAttribute("content")||"{}";m.trim()&&m!=="{}"&&(o=JSON.parse(m),console.log("✅ User data loaded:",o.name||"Unknown"))}catch(m){console.error("❌ Failed to parse user data:",m)}(!o||Object.keys(o).length===0)&&(o={name:"Dokter",email:"",greeting:"Selamat datang",initials:"DR"},console.log("⚠️ Using fallback user data"));const p=document.getElementById("loading");p&&(p.style.transition="opacity 0.3s ease-out",p.style.opacity="0",setTimeout(()=>{p.style.display="none"},300)),At.createRoot(r).render(i.jsx(qe.StrictMode,{children:i.jsx(Fo,{children:i.jsx(Yt,{userData:o})})})),performance.mark("react-mount-end"),performance.measure("react-mount-duration","react-mount-start","react-mount-end"),console.log("✅ React application mounted successfully"),setTimeout(()=>this.validateNavigationRendering(),2e3)}validateNavigationRendering(){var d;this.cleanupEmergencyNavigation();const r=['#dokter-app .absolute.bottom-0[class*="bg-gradient-to-t"][class*="rounded-t-3xl"]','#dokter-app [class*="backdrop-blur-3xl"][class*="border-purple-400"]','#dokter-app button[class*="group"][class*="transition-all"]','#dokter-app [class*="bg-gradient-to-r"][class*="purple-400"][class*="rounded-full"]'];let o=!1;for(const p of r){const u=document.querySelectorAll(p);if(u.length>0&&Array.from(u).some(b=>{const y=b.innerHTML||"";return y.includes("Home")||y.includes("Missions")||y.includes("Guardian")||y.includes("Rewards")||y.includes("Profile")||b.className.includes("rounded-t-3xl")})){o=!0,console.log("✅ Gaming navigation validated successfully with selector:",p),console.log("🎮 Gaming navigation elements count:",u.length);break}}if(!o){const p=document.querySelectorAll('#dokter-app [class*="bottom-0"], #dokter-app [class*="navigation"]');p.length>0&&(o=!0,console.log("✅ Basic navigation found in dokter-app:",p.length))}o?console.log("🎯 Navigation validation complete - single gaming navigation confirmed"):(console.warn("⚠️ Gaming navigation not detected - React component may still be rendering"),console.log("🔍 Available elements in dokter-app:",((d=document.querySelector("#dokter-app"))==null?void 0:d.children.length)||0))}cleanupEmergencyNavigation(){console.log("🧹 Starting comprehensive emergency navigation cleanup...");const r=[".emergency-navigation",".emergency-navigation-fix",".emergency-nav",".emergency-nav-fix",'[class*="emergency"][class*="nav"]','[class*="emergency-nav"]'];let o=0;r.forEach(u=>{document.querySelectorAll(u).forEach(b=>{console.log(`🧹 Removing emergency navigation: ${u}`),b.remove(),o++})}),document.querySelectorAll(['[class*="fixed"][class*="bottom"]','[style*="bottom: 0"]','[style*="bottom:0"]','[style*="position: fixed"]','[style*="z-index: 99999"]'].join(", ")).forEach(u=>{const m=u.innerHTML||"",b=/[\u{1F300}-\u{1F9FF}]|👑|📅|🛡️|⭐|🧠/u.test(m),y=/emergency/i.test(u.className),U=u.style.zIndex==="99999",T=/navigation|missions|guardian|rewards|profile/i.test(m);(b||y||U)&&T&&!u.closest("#dokter-app")&&(console.log("🧹 Removing suspected injected navigation with patterns:",{emojis:b,emergency:y,highZ:U,keywords:T}),u.remove(),o++)});const p=document.querySelectorAll(['[class*="bottom-0"]','[style*="bottom: 0"]'].join(", "));p.length>1&&(console.log(`🔍 Found ${p.length} bottom navigations, keeping only React component`),p.forEach((u,m)=>{const b=u.closest("#dokter-app")!==null,y=u.className.includes("backdrop-blur")&&u.className.includes("gradient");(!b||!y)&&m>0&&(console.log(`🧹 Removing duplicate bottom navigation #${m+1}`),u.remove(),o++)})),console.log(`✅ Emergency navigation cleanup complete. Removed ${o} elements.`),this.setupNavigationProtection()}setupNavigationProtection(){new MutationObserver(o=>{o.forEach(d=>{d.addedNodes.forEach(p=>{if(p.nodeType===1){const u=p,m=u.classList.contains("emergency-navigation")||u.classList.contains("emergency-nav")||u.classList.contains("emergency-navigation-fix")||/emergency.*nav/i.test(u.className),b=/[\u{1F300}-\u{1F9FF}]|👑|📅|🛡️|⭐|🧠/u.test(u.innerHTML||"")&&/bottom.*0|fixed.*bottom/i.test(u.style.cssText||u.className);(m||b)&&(console.log("🛡️ Prevented emergency navigation re-injection:",u.className),u.remove())}})})}).observe(document.body,{childList:!0,subtree:!0}),console.log("🛡️ Navigation protection active - MutationObserver monitoring injections")}injectEmergencyNavigation(){console.log("🚫 Emergency navigation permanently disabled - React component provides navigation")}performPostInitializationTasks(){"performance"in window&&(performance.mark("dokterku-app-ready"),performance.measure("dokterku-total-init","dokterku-app-start","dokterku-app-ready"),performance.getEntriesByType("measure").forEach(o=>{console.log(`📊 Performance: ${o.name} took ${o.duration.toFixed(2)}ms`)})),window.dokterKuDiagnostics={getErrors:()=>this.errorHandler.getErrorReport(),clearErrors:()=>this.errorHandler.clearErrors(),getPerformance:()=>performance.getEntriesByType("measure")},console.log("🌟 DOKTERKU Mobile App: World-class initialization completed successfully")}async handleInitializationFailure(r){if(this.retryCount++,this.retryCount<=this.maxRetries){console.log(`🔄 Retrying initialization (${this.retryCount}/${this.maxRetries}) in ${this.retryDelay}ms...`),setTimeout(()=>{this.initializeApp()},this.retryDelay),this.retryDelay*=2;return}this.showEnterpriseErrorScreen(r)}showEnterpriseErrorScreen(r){const o=document.getElementById("dokter-app")||document.body;o.innerHTML=`
            <div style="
                min-height: 100vh;
                background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                padding: 20px;
            ">
                <div style="
                    background: rgba(30, 41, 59, 0.9);
                    border: 2px solid #8b5cf6;
                    border-radius: 16px;
                    padding: 40px;
                    max-width: 500px;
                    text-align: center;
                    backdrop-filter: blur(10px);
                ">
                    <div style="font-size: 48px; margin-bottom: 20px;">🚨</div>
                    <h1 style="margin: 0 0 20px 0; font-size: 24px; color: #ef4444;">Aplikasi Tidak Dapat Dimuat</h1>
                    <p style="margin: 0 0 30px 0; color: #d1d5db; line-height: 1.6;">
                        Terjadi kesalahan teknis saat memuat aplikasi DOKTERKU Gaming Dashboard. 
                        Tim teknis telah diberitahu secara otomatis.
                    </p>
                    <div style="margin: 30px 0;">
                        <button onclick="window.location.reload()" style="
                            background: linear-gradient(to right, #06b6d4, #8b5cf6);
                            border: none;
                            color: white;
                            padding: 12px 24px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: bold;
                            margin: 5px;
                        ">🔄 Coba Lagi</button>
                        <button onclick="this.nextElementSibling.style.display='block'" style="
                            background: transparent;
                            border: 1px solid #6b7280;
                            color: #d1d5db;
                            padding: 12px 24px;
                            border-radius: 8px;
                            cursor: pointer;
                            margin: 5px;
                        ">🔍 Detail Error</button>
                    </div>
                    <details style="
                        margin-top: 20px;
                        text-align: left;
                        background: rgba(0, 0, 0, 0.3);
                        padding: 15px;
                        border-radius: 8px;
                        border: 1px solid #374151;
                    ">
                        <summary style="cursor: pointer; font-weight: bold; margin-bottom: 10px;">Detail Teknis</summary>
                        <pre style="
                            background: #111827;
                            color: #f59e0b;
                            padding: 10px;
                            border-radius: 4px;
                            overflow: auto;
                            font-size: 12px;
                            white-space: pre-wrap;
                        ">${r.message}

${r.stack||"No stack trace available"}</pre>
                    </details>
                    <div style="margin-top: 30px; font-size: 12px; color: #6b7280;">
                        Error ID: ${Date.now()}<br>
                        Waktu: ${new Date().toLocaleString("id-ID")}<br>
                        Browser: ${navigator.userAgent.split(" ").slice(-2).join(" ")}
                    </div>
                </div>
            </div>
        `;const d=document.getElementById("loading");d&&(d.style.display="none")}}class Fo extends qe.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,o){var d,p;console.error("🚨 React Error Boundary caught error:",r,o),window.dokterKuDiagnostics&&((p=(d=window.dokterKuDiagnostics).logReactError)==null||p.call(d,r,o))}render(){var r,o;return this.state.hasError?i.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',padding:"20px"},children:i.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.9)",border:"2px solid #8b5cf6",borderRadius:"16px",padding:"40px",maxWidth:"500px",textAlign:"center",backdropFilter:"blur(10px)"},children:[i.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"⚠️"}),i.jsx("h1",{style:{margin:"0 0 20px 0",fontSize:"24px",color:"#f59e0b"},children:"Komponen React Bermasalah"}),i.jsx("p",{style:{margin:"0 0 30px 0",color:"#d1d5db",lineHeight:"1.6"},children:"Terjadi kesalahan dalam komponen React. Error telah dicatat untuk diperbaiki."}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("button",{onClick:()=>window.location.reload(),style:{background:"linear-gradient(to right, #06b6d4, #8b5cf6)",border:"none",color:"white",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",marginRight:"10px"},children:"🔄 Muat Ulang Halaman"}),i.jsx("button",{onClick:()=>{window.dokterKuDebug&&(console.log("Manual reinitialization attempt..."),window.dokterKuDebug.reinitialize())},style:{background:"rgba(34, 197, 94, 0.8)",border:"none",color:"white",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"🔧 Coba Perbaiki"})]}),i.jsxs("details",{style:{marginTop:"20px",padding:"15px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",border:"1px solid #374151"},children:[i.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold",marginBottom:"10px"},children:"Detail Error"}),i.jsxs("div",{style:{fontSize:"12px",color:"#f59e0b"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Error:"})," ",((r=this.state.error)==null?void 0:r.message)||"Unknown error"]}),i.jsxs("div",{style:{marginTop:"10px"},children:[i.jsx("strong",{children:"Browser:"})," ",navigator.userAgent]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Time:"})," ",new Date().toLocaleString("id-ID")]}),((o=this.state.error)==null?void 0:o.stack)&&i.jsx("pre",{style:{marginTop:"10px",padding:"10px",background:"#111827",borderRadius:"4px",overflow:"auto",fontSize:"11px",whiteSpace:"pre-wrap"},children:this.state.error.stack.split(`
`).slice(0,10).join(`
`)})]})]})]})}):this.props.children}}class Ge{static getInstance(){return this._initializationPromise?this._initializationPromise:this._instance&&!this._isInitializing?Promise.resolve(this._instance):(this._initializationPromise=this.initializeInstance(),this._initializationPromise)}static async verifyDependencies(r=1){const o={window:typeof window<"u",document:typeof document<"u",React:typeof qe<"u"&&qe!==null,createRoot:typeof At.createRoot=="function",HolisticMedicalDashboard:typeof Yt<"u",UnifiedAuth:typeof UnifiedAuth<"u",container:document.getElementById("dokter-app")!==null},d=Object.entries(o).filter(([p,u])=>!u).map(([p,u])=>p);return d.length===0?(console.log(`✅ All dependencies verified successfully (attempt ${r})`),!0):(console.warn(`⚠️ Missing dependencies (attempt ${r}):`,d),!1)}static async initializeInstance(){this._isInitializing=!0;let r=null;for(let o=1;o<=this._maxRetries;o++)try{if(console.log(`🚀 Bootstrap initialization attempt ${o}/${this._maxRetries}`),!await this.verifyDependencies(o))throw new Error(`Dependencies not ready on attempt ${o}`);return await this.performSafetyChecks(),this._instance=new Ca,await this.verifyInstanceHealth(),this.startHealthMonitoring(),console.log("✅ Bootstrap singleton initialized successfully"),this._isInitializing=!1,this._instance}catch(d){if(r=d,console.error(`❌ Bootstrap initialization attempt ${o} failed:`,d),o<this._maxRetries){const p=this._retryDelay*Math.pow(1.5,o-1);console.log(`🔄 Retrying in ${p}ms...`),await this.sleep(p)}}throw this._isInitializing=!1,this._initializationPromise=null,await this.handleFinalFailure(r),new Error(`Bootstrap initialization failed after ${this._maxRetries} attempts: ${r==null?void 0:r.message}`)}static async performSafetyChecks(){try{if(!(qe&&At.createRoot&&Yt))throw new Error("TDZ violation detected in dependency access")}catch(o){throw new Error(`TDZ safety check failed: ${o.message}`)}if(document.readyState==="loading"&&(console.log("📋 Waiting for DOM to be ready..."),await this.waitForDOMReady()),!document.getElementById("dokter-app"))throw new Error("Required container element #dokter-app not found");if("performance"in window&&"memory"in performance){const o=performance.memory;o.usedJSHeapSize>o.jsHeapSizeLimit*.9&&console.warn("⚠️ High memory usage detected, initialization may be slower")}}static async verifyInstanceHealth(){if(!this._instance)throw new Error("Instance creation failed");if(!this._instance.errorHandler)throw new Error("Error handler not properly initialized");const r=document.getElementById("dokter-app");r&&r.children.length===0&&await this.sleep(500)}static startHealthMonitoring(){this._healthCheckInterval&&clearInterval(this._healthCheckInterval),this._healthCheckInterval=window.setInterval(()=>{try{if(!this._instance){console.error("🚨 Bootstrap instance lost - attempting recovery"),this.recoverInstance();return}const r=document.getElementById("dokter-app");if((!r||r.children.length===0)&&console.warn("⚠️ React app appears unmounted - monitoring"),"performance"in window&&"memory"in performance){const o=performance.memory;o.usedJSHeapSize>o.jsHeapSizeLimit*.95&&console.warn("🚨 Critical memory usage detected")}}catch(r){console.error("🚨 Health check failed:",r)}},3e4)}static async recoverInstance(){try{console.log("🔄 Attempting bootstrap instance recovery..."),this._instance=null,this._initializationPromise=null,this._isInitializing=!1,await this.getInstance(),console.log("✅ Bootstrap instance recovered successfully")}catch(r){console.error("❌ Bootstrap recovery failed:",r)}}static async handleFinalFailure(r){console.error("🚨 Bootstrap initialization failed permanently:",r),this._healthCheckInterval&&clearInterval(this._healthCheckInterval);const o=document.getElementById("dokter-app")||document.body,d=`ERR_${Date.now()}`,p=new Date().toLocaleString("id-ID");o.innerHTML=`
            <div style="
                min-height: 100vh;
                background: linear-gradient(135deg, #0f172a 0%, #dc2626 20%, #0f172a 100%);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                padding: 20px;
            ">
                <div style="
                    background: rgba(30, 41, 59, 0.95);
                    border: 2px solid #dc2626;
                    border-radius: 20px;
                    padding: 40px;
                    max-width: 600px;
                    text-align: center;
                    backdrop-filter: blur(15px);
                    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
                ">
                    <div style="font-size: 64px; margin-bottom: 20px; animation: pulse 2s infinite;">🚨</div>
                    <h1 style="margin: 0 0 20px 0; font-size: 28px; color: #dc2626; font-weight: bold;">Sistem Tidak Dapat Dimuat</h1>
                    <p style="margin: 0 0 30px 0; color: #e5e7eb; line-height: 1.8; font-size: 16px;">
                        Aplikasi DOKTERKU mengalami kegagalan sistem yang kritis. Tim teknis telah diberitahu secara otomatis dan akan mengatasi masalah ini sesegera mungkin.
                    </p>
                    
                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid #dc2626; border-radius: 12px; padding: 20px; margin: 20px 0; text-align: left;">
                        <h3 style="margin: 0 0 15px 0; color: #fca5a5; font-size: 16px;">📋 Langkah Pemulihan:</h3>
                        <ol style="margin: 0; padding-left: 20px; color: #e5e7eb; line-height: 1.6;">
                            <li>Klik tombol "🔄 Muat Ulang Halaman" di bawah</li>
                            <li>Jika masalah berlanjut, tutup dan buka kembali browser</li>
                            <li>Periksa koneksi internet Anda</li>
                            <li>Hubungi administrator sistem jika masalah terus terjadi</li>
                        </ol>
                    </div>
                    
                    <div style="margin: 30px 0;">
                        <button onclick="window.location.reload()" style="
                            background: linear-gradient(135deg, #dc2626, #b91c1c);
                            border: none;
                            color: white;
                            padding: 15px 30px;
                            border-radius: 12px;
                            cursor: pointer;
                            font-weight: bold;
                            font-size: 16px;
                            margin: 8px;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
                        " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            🔄 Muat Ulang Halaman
                        </button>
                        <button onclick="this.nextElementSibling.style.display='block'; this.style.display='none';" style="
                            background: rgba(107, 114, 128, 0.8);
                            border: 1px solid #6b7280;
                            color: #e5e7eb;
                            padding: 15px 30px;
                            border-radius: 12px;
                            cursor: pointer;
                            font-size: 16px;
                            margin: 8px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(107, 114, 128, 1)'" onmouseout="this.style.background='rgba(107, 114, 128, 0.8)'">
                            🔍 Detail Teknis
                        </button>
                    </div>
                    
                    <div style="display: none; margin-top: 30px; text-align: left; background: rgba(0, 0, 0, 0.4); padding: 20px; border-radius: 12px; border: 1px solid #374151;">
                        <h3 style="color: #fbbf24; margin: 0 0 15px 0; font-size: 16px;">🔧 Informasi Teknis</h3>
                        <div style="background: #111827; color: #f59e0b; padding: 15px; border-radius: 8px; font-family: 'Monaco', 'Menlo', monospace; font-size: 13px; line-height: 1.4; overflow-x: auto;">
                            <div><strong>Error ID:</strong> ${d}</div>
                            <div><strong>Timestamp:</strong> ${p}</div>
                            <div><strong>Message:</strong> ${r.message}</div>
                            <div><strong>Browser:</strong> ${navigator.userAgent.split(" ").slice(-2).join(" ")}</div>
                            <div><strong>URL:</strong> ${window.location.href}</div>
                            ${r.stack?`<div style="margin-top: 10px;"><strong>Stack Trace:</strong></div><pre style="margin: 5px 0 0 0; white-space: pre-wrap; font-size: 11px;">${r.stack.split(`
`).slice(0,8).join(`
`)}</pre>`:""}
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #374151; font-size: 14px; color: #9ca3af;">
                        <div>🛡️ DOKTERKU Gaming Dashboard - Enterprise Error Handler</div>
                        <div style="margin-top: 5px;">Error akan dilaporkan secara otomatis untuk perbaikan sistem</div>
                    </div>
                </div>
            </div>
            <style>
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }
            </style>
        `;const u=document.getElementById("loading");u&&(u.style.display="none")}static sleep(r){return new Promise(o=>setTimeout(o,r))}static waitForDOMReady(){return new Promise(r=>{if(document.readyState!=="loading"){r();return}const o=()=>{document.removeEventListener("DOMContentLoaded",o),r()};document.addEventListener("DOMContentLoaded",o)})}static reset(){this._healthCheckInterval&&(clearInterval(this._healthCheckInterval),this._healthCheckInterval=null),this._instance=null,this._isInitializing=!1,this._initializationPromise=null,console.log("🔄 Bootstrap singleton reset successfully")}static getStatus(){return{initialized:this._instance!==null,initializing:this._isInitializing,healthy:this._instance!==null&&!this._isInitializing}}}ke(Ge,"_instance",null),ke(Ge,"_isInitializing",!1),ke(Ge,"_initializationPromise",null),ke(Ge,"_maxRetries",5),ke(Ge,"_retryDelay",1e3),ke(Ge,"_healthCheckInterval",null);async function Go(){var c;try{console.log("🌟 DOKTERKU Bootstrap: Starting world-class initialization...");const r=await Ge.getInstance();console.log("✅ Bootstrap initialization completed successfully"),typeof window<"u"&&(window.dokterKuBootstrapInstance=r)}catch(r){if(console.error("🚨 World-class system initialization failed:",r),r instanceof Error){const o={message:r.message,stack:(c=r.stack)==null?void 0:c.split(`
`).slice(0,10),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,dependencies:{React:typeof qe<"u",createRoot:typeof At.createRoot<"u",HolisticMedicalDashboard:typeof Yt<"u",UnifiedAuth:typeof UnifiedAuth<"u",container:document.getElementById("dokter-app")!==null}};console.error("📊 Detailed error report:",o);try{localStorage.setItem("dokterku_critical_error",JSON.stringify(o))}catch{console.warn("⚠️ Could not store error report in localStorage")}}throw r}}class Xt{static async waitForDependencies(r=this.MAX_WAIT_TIME){const o=Date.now(),d=o+r;let p=0;for(;Date.now()<d;){p++;const m=this.checkAllDependencies();if(m.allReady)return console.log(`✅ All dependencies ready after ${Date.now()-o}ms (${p} checks)`),!0;p%10===0&&(console.log(`🔄 Dependencies check ${p}: ${m.ready}/${m.total} ready`),console.log("⏳ Still waiting for:",m.missing.join(", "))),await this.smartWait(p)}const u=this.checkAllDependencies();return console.error("🚨 Dependency timeout reached:",{duration:Date.now()-o,attempts:p,ready:u.ready,total:u.total,missing:u.missing,details:u.details}),!1}static checkAllDependencies(){const r={window:()=>typeof window<"u"&&window!==null,document:()=>typeof document<"u"&&document!==null&&document.readyState!=="loading",React:()=>{try{return typeof qe<"u"&&qe!==null&&typeof qe.createElement=="function"}catch{return!1}},createRoot:()=>{try{return typeof At.createRoot=="function"}catch{return!1}},HolisticMedicalDashboard:()=>{try{return typeof Yt<"u"&&Yt!==null}catch{return!1}},UnifiedAuth:()=>{try{return typeof UnifiedAuth<"u"&&UnifiedAuth!==null}catch{return!1}},container:()=>{try{const u=document.getElementById("dokter-app");return u!==null&&u instanceof HTMLElement}catch{return!1}},meta:()=>{try{return document.querySelector('meta[name="user-authenticated"]')!==null}catch{return!1}}},o={},d=[];let p=0;for(const[u,m]of Object.entries(r))try{const b=m();o[u]=b,b?p++:d.push(u)}catch(b){o[u]=!1,d.push(u),console.warn(`⚠️ Dependency check failed for ${u}:`,b)}return{allReady:d.length===0,ready:p,total:Object.keys(r).length,missing:d,details:o}}static async smartWait(r){let o;return r<=5?o=this.CHECK_INTERVAL:r<=20?o=this.CHECK_INTERVAL*1.5:o=this.CHECK_INTERVAL*2,new Promise(d=>setTimeout(d,o))}static async emergencyDependencyCheck(){try{if(typeof qe>"u")return{success:!1,message:"React library not loaded - check script tags"};if(typeof At.createRoot>"u")return{success:!1,message:"React 18 createRoot not available - check React version"};if(!document.getElementById("dokter-app"))return{success:!1,message:"Container element #dokter-app missing from DOM"};const r=document.querySelector('meta[name="user-authenticated"]');return!r||r.getAttribute("content")!=="true"?{success:!1,message:"User authentication meta tag missing or invalid"}:{success:!0,message:"All critical dependencies verified"}}catch(r){return{success:!1,message:`Emergency check failed: ${r.message}`}}}}ke(Xt,"MAX_WAIT_TIME",15e3),ke(Xt,"CHECK_INTERVAL",200),ke(Xt,"CRITICAL_DEPENDENCIES",["window","document","React","createRoot","HolisticMedicalDashboard","UnifiedAuth"]);class lt{static async launch(){return this._launchAttempted?this._launchPromise||Promise.resolve():(this._launchAttempted=!0,this._launchPromise=this.executeLaunch(),this._launchPromise)}static async executeLaunch(){try{console.log("🌟 DOKTERKU Application Launcher: Starting bulletproof initialization..."),await this.validateEnvironment(),await this.loadDependencies(),await Go(),console.log("🎯 Application launch completed successfully")}catch(r){console.error("🚨 Application launch failed:",r),await this.handleLaunchFailure(r)}}static async validateEnvironment(){if(typeof window>"u"||typeof document>"u")throw new Error("Browser environment not detected - server-side rendering not supported");if(!document.getElementById("dokter-app"))throw new Error("Required container element #dokter-app not found in DOM");const r=document.querySelector('meta[name="user-authenticated"]');if((!r||r.getAttribute("content")!=="true")&&console.warn("⚠️ User authentication not verified - some features may be limited"),!window.Promise)throw new Error("Browser does not support Promises - upgrade required");window.fetch||console.warn("⚠️ Fetch API not available - API calls may use fallback methods"),console.log("✅ Environment validation passed")}static async loadDependencies(){if(console.log("📦 Loading dependencies..."),await this.ensureDOMReady(),!await Xt.waitForDependencies(15e3)){const o=await Xt.emergencyDependencyCheck();if(!o.success)throw new Error(`Dependencies not ready: ${o.message}`)}console.log("✅ All dependencies loaded successfully")}static async ensureDOMReady(){if(document.readyState!=="complete"){if(document.readyState==="interactive"){await new Promise(r=>setTimeout(r,100));return}return new Promise(r=>{const o=()=>{document.removeEventListener("DOMContentLoaded",o),r()};document.addEventListener("DOMContentLoaded",o)})}}static async handleLaunchFailure(r){console.error("🚨 Handling launch failure:",r),this._launchAttempted=!1,this._launchPromise=null;try{const o=document.getElementById("dokter-app")||document.body,d=document.createElement("div");d.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #0f172a 0%, #dc2626 20%, #0f172a 100%);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 999999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            `,d.innerHTML=`
                <div style="
                    text-align: center;
                    background: rgba(30, 41, 59, 0.95);
                    padding: 40px;
                    border-radius: 20px;
                    border: 2px solid #dc2626;
                    backdrop-filter: blur(15px);
                    max-width: 500px;
                    margin: 20px;
                ">
                    <div style="font-size: 48px; margin-bottom: 20px;">🚨</div>
                    <h1 style="margin: 0 0 20px 0; color: #dc2626;">Aplikasi Gagal Dimuat</h1>
                    <p style="margin: 0 0 30px 0; color: #e5e7eb; line-height: 1.6;">
                        Terjadi kesalahan saat memuat aplikasi DOKTERKU. Tim teknis akan segera memperbaiki masalah ini.
                    </p>
                    <button onclick="window.location.reload()" style="
                        background: linear-gradient(135deg, #dc2626, #b91c1c);
                        border: none;
                        color: white;
                        padding: 15px 30px;
                        border-radius: 12px;
                        cursor: pointer;
                        font-weight: bold;
                        font-size: 16px;
                    ">
                        🔄 Muat Ulang Halaman
                    </button>
                    <div style="margin-top: 20px; font-size: 12px; color: #9ca3af;">
                        Error: ${r.message}<br>
                        Time: ${new Date().toLocaleString("id-ID")}
                    </div>
                </div>
            `,o===document.body?document.body.appendChild(d):(o.innerHTML="",o.appendChild(d))}catch(o){console.error("🚨 Failed to display launch failure message:",o),alert("Application failed to load. Please refresh the page.")}try{localStorage.setItem("dokterku_launch_error",JSON.stringify({message:r.message,stack:r.stack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent}))}catch{console.warn("⚠️ Could not store launch error in localStorage")}}}ke(lt,"_launchAttempted",!1),ke(lt,"_launchPromise",null);typeof document<"u"&&typeof window<"u"?(document.readyState!=="loading"?(console.log("🚀 DOM ready - launching immediately with TDZ protection"),setTimeout(()=>{lt.launch().catch(c=>{console.error("🚨 Immediate launch failed:",c)})},0)):(console.log("📋 DOM loading - waiting for DOMContentLoaded"),document.addEventListener("DOMContentLoaded",()=>{console.log("🚀 DOM loaded - launching application"),lt.launch().catch(c=>{console.error("🚨 DOM ready launch failed:",c)})})),window.addEventListener("load",()=>{console.log("🎯 Window fully loaded - ensuring application is launched"),lt.launch().catch(c=>{console.error("🚨 Window load launch failed:",c)})}),setTimeout(()=>{console.log("⏰ Emergency timeout launch - ensuring application starts"),lt.launch().catch(c=>{console.error("🚨 Emergency launch failed:",c)})},5e3)):console.error("🚨 Browser environment not detected - cannot initialize application");typeof window<"u"&&(window.DokterKuBootstrap=Ca,window.BootstrapSingleton=Ge,window.ApplicationLauncher=lt,window.DependencyManager=Xt,window.dokterKuBootstrapInstance=async()=>{try{return await Ge.getInstance()}catch(c){return console.error("🚨 Failed to get bootstrap instance:",c),null}},window.dokterKuDebug={async getBootstrap(){try{return await Ge.getInstance()}catch(c){return console.error("🚨 Failed to get bootstrap:",c),null}},getBootstrapStatus(){return Ge.getStatus()},resetBootstrap(){console.log("🔄 Resetting bootstrap singleton..."),Ge.reset(),console.log("✅ Bootstrap reset complete")},async reinitialize(){console.log("🔄 Manual reinitialization triggered...");try{return Ge.reset(),await lt.launch(),console.log("✅ Reinitialization successful"),!0}catch(c){return console.error("🚨 Reinitialization failed:",c),!1}},async emergencyRestart(){console.log("🚨 Emergency restart initiated...");try{return Ge.reset(),lt._launchAttempted=!1,lt._launchPromise=null,await lt.launch(),console.log("✅ Emergency restart successful"),!0}catch(c){return console.error("🚨 Emergency restart failed:",c),!1}},checkDependencies(){const c=Ge.getStatus();return{React:typeof qe<"u",createRoot:typeof At.createRoot<"u",HolisticMedicalDashboard:typeof Yt<"u",UnifiedAuth:typeof UnifiedAuth<"u",container:document.getElementById("dokter-app")!==null,bootstrapInitialized:c.initialized,bootstrapInitializing:c.initializing,bootstrapHealthy:c.healthy,domReady:document.readyState,containerExists:!!document.getElementById("dokter-app"),userAuthenticated:(()=>{const r=document.querySelector('meta[name="user-authenticated"]');return(r==null?void 0:r.getAttribute("content"))==="true"})(),hasApiToken:(()=>{var o;const r=document.querySelector('meta[name="api-token"]');return!!((o=r==null?void 0:r.getAttribute("content"))!=null&&o.trim())})()}},async fullDiagnostic(){console.log("🔍 Running full system diagnostic...");const c=this.checkDependencies(),r=await Xt.emergencyDependencyCheck(),o=Ge.getStatus(),d={timestamp:new Date().toISOString(),dependencies:c,emergencyCheck:r,bootstrapStatus:o,errors:(()=>{try{return JSON.parse(localStorage.getItem("dokterku_errors")||"[]")}catch{return[]}})(),performance:"performance"in window?{navigation:performance.getEntriesByType("navigation"),measures:performance.getEntriesByType("measure")}:null,memory:"memory"in performance?performance.memory:null};return console.log("📊 Full diagnostic report:",d),d},getErrors(){try{return JSON.parse(localStorage.getItem("dokterku_errors")||"[]")}catch{return[]}},clearErrors(){localStorage.removeItem("dokterku_errors"),localStorage.removeItem("dokterku_critical_error"),localStorage.removeItem("dokterku_launch_error"),console.log("🧹 All error logs cleared")},getPerformance(){return"performance"in window?{measures:performance.getEntriesByType("measure"),navigation:performance.getEntriesByType("navigation"),memory:"memory"in performance?performance.memory:null}:null},simulateError(){throw console.log("🧪 Simulating error for testing..."),new Error("Simulated error for testing error handling")},forceReload(){console.log("🔄 Forcing page reload..."),window.location.reload()},help(){console.log(`
🛠️ DOKTERKU Debug Utilities Help

📋 Bootstrap Management:
  - getBootstrap()          Get bootstrap instance
  - getBootstrapStatus()    Get current status
  - resetBootstrap()        Reset singleton state
  - reinitialize()          Soft restart
  - emergencyRestart()      Hard restart

🔍 Diagnostics:
  - checkDependencies()     Check all dependencies
  - fullDiagnostic()        Complete system report
  - getErrors()             Get error logs
  - clearErrors()           Clear error logs
  - getPerformance()        Performance metrics

🧪 Testing:
  - simulateError()         Test error handling
  - forceReload()           Force page reload
  - help()                  Show this help
`)}},console.log("🛠️ DOKTERKU Debug utilities available at window.dokterKuDebug"),console.log("💡 Run dokterKuDebug.help() for available commands"));
